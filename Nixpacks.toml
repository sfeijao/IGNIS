# Explicit Nixpacks config to control build and caching

# Fix: Optimize Railway build to avoid SIGTERM during startup
# Move Next.js build out of startup phase to prevent timeouts

[phases.setup]
# no-op: rely on default Node detection

[phases.install]
cmd = "npm ci"

[phases.build]
# Only install dashboard dependencies - skip Next.js build to avoid startup timeout
# Next.js build is now done during Railway build phase via railway.json
cmd = "npm install --no-audit --no-fund && cd dashboard/next && npm install --legacy-peer-deps --no-audit --no-fund"

[phases.start]
cmd = "npm start"

[caches]
# Disable node_modules caching to force fresh install
paths = []

