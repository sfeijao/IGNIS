"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[472],{1472:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var s=a(7437),l=a(2265),r=a(9988),n=a(2837);function i(e){let{guildId:t,ticketId:a,onClose:n}=e,[i,o]=(0,l.useState)(!0),[u,x]=(0,l.useState)(null),[m,h]=(0,l.useState)(null),[p,g]=(0,l.useState)(null),[b,v]=(0,l.useState)(0),[j,f]=(0,l.useState)(!1),[k,N]=(0,l.useState)("overview"),[y,w]=(0,l.useState)([]),[C,S]=(0,l.useState)(null),[T,P]=(0,l.useState)([]),_=e=>{let t=(null!=e?e:"").toString().toLowerCase();return"0"===t||"text"===t||"guild_text"===t?"Text":"2"===t||"voice"===t||"guild_voice"===t?"Voice":"4"===t||"category"===t||"guild_category"===t?"Category":"5"===t||"announcement"===t||"guild_announcement"===t?"Announcement":"Channel"};(0,l.useEffect)(()=>{let e=!1;return(async()=>{o(!0),x(null);try{let l=await r.h.getTicketDetails(t,a),n=await r.h.getTicketLogs(t,a,{limit:200,offset:0}),i=await r.h.getChannels(t).catch(()=>({channels:[]}));if(!e){var s;h(l),g(n),v((null==n?void 0:null===(s=n.logs)||void 0===s?void 0:s.length)||0),P((i.channels||i||[]).filter(e=>e&&e.id&&e.name));try{let s=await r.h.getTicketMessages(t,a,{limit:100});e||(w(s.messages||[]),S(s.nextBefore||null))}catch(e){}}}catch(t){e||x((null==t?void 0:t.message)||"Failed to load ticket")}finally{e||o(!1)}})(),()=>{e=!0}},[t,a]);let F=async()=>{if(!j)try{var e;f(!0);let s=await r.h.getTicketLogs(t,a,{limit:200,offset:b});g(e=>e?{...e,logs:[...e.logs,...s.logs]}:s),v(b+((null==s?void 0:null===(e=s.logs)||void 0===e?void 0:e.length)||0))}catch(e){}finally{f(!1)}},L=async()=>{if(C)try{let e=await r.h.getTicketMessages(t,a,{limit:100,before:C});w(t=>[...e.messages||[],...t]),S(e.nextBefore||null)}catch(e){}};return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60",onClick:n}),(0,s.jsxs)("div",{className:"relative z-10 w-full max-w-5xl card p-0 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-5 py-3 border-b border-neutral-800",children:[(0,s.jsxs)("div",{className:"font-semibold",children:["Ticket #",a]}),(0,s.jsx)("button",{onClick:n,className:"text-neutral-400 hover:text-white",children:"✕"})]}),i&&(0,s.jsx)("div",{className:"p-6 text-neutral-400",children:"Carregando…"}),u&&(0,s.jsx)("div",{className:"p-6 text-red-400",children:u}),!i&&!u&&m&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"px-5 pt-3 flex items-center gap-2 border-b border-neutral-800",children:[(0,s.jsx)("button",{className:"px-3 py-2 text-sm rounded-t ".concat("overview"===k?"bg-neutral-800 border border-neutral-700 border-b-neutral-800":"text-neutral-400 hover:text-white"),onClick:()=>N("overview"),children:"Overview"}),(0,s.jsx)("button",{className:"px-3 py-2 text-sm rounded-t ".concat("logs"===k?"bg-neutral-800 border border-neutral-700 border-b-neutral-800":"text-neutral-400 hover:text-white"),onClick:()=>N("logs"),children:"Logs"}),(0,s.jsx)("button",{className:"px-3 py-2 text-sm rounded-t ".concat("transcript"===k?"bg-neutral-800 border border-neutral-700 border-b-neutral-800":"text-neutral-400 hover:text-white"),onClick:()=>N("transcript"),children:"Transcript"}),"transcript"===k&&(0,s.jsx)("a",{className:"ml-auto mr-5 text-sm text-blue-400 hover:text-blue-300 underline",href:"/api/guild/".concat(t,"/tickets/").concat(a,"?download=transcript"),target:"_blank",rel:"noreferrer",children:"Download transcript"})]}),"overview"===k&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x divide-neutral-800",children:[(0,s.jsxs)("div",{className:"p-4 space-y-2",children:[(0,s.jsx)(c,{label:"Status",value:m.ticket.status}),(0,s.jsx)(c,{label:"Priority",value:m.ticket.priority||"normal"}),(0,s.jsx)(c,{label:"Owner",value:"".concat(m.ticket.ownerTag," (").concat(m.ticket.user_id,")")}),m.ticket.claimedByTag&&(0,s.jsx)(c,{label:"Claimed by",value:m.ticket.claimedByTag}),(0,s.jsx)(c,{label:"Channel",value:(()=>{let e=T.find(e=>e.id===m.ticket.channel_id);return e?"#".concat(e.name," (").concat(_(e.type),")"):m.ticket.channelName?"#".concat(m.ticket.channelName):String(m.ticket.channel_id)})()}),(0,s.jsx)(c,{label:"Opened",value:m.ticket.timeAgo})]}),(0,s.jsxs)("div",{className:"p-4 md:col-span-2",children:[(0,s.jsx)("div",{className:"font-medium mb-2",children:"Recent activity"}),(0,s.jsx)("div",{className:"max-h-96 overflow-auto pr-1",children:(0,s.jsx)(d,{items:((null==p?void 0:p.logs)||[]).slice(0,20)})})]})]}),"logs"===k&&(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"font-medium mb-2",children:"Logs"}),(0,s.jsx)("div",{className:"max-h-96 overflow-auto pr-1",children:(0,s.jsx)(d,{items:(null==p?void 0:p.logs)||[]})}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("button",{onClick:F,disabled:j,className:"px-3 py-1.5 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 disabled:opacity-50 text-sm",children:j?"Loading…":"Load more"})})]}),"transcript"===k&&(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"font-medium mb-2",children:"Transcript"}),(0,s.jsxs)("div",{className:"max-h-[28rem] overflow-auto space-y-3",children:[y.map(e=>{var t,a;return(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("span",{className:"text-neutral-500",children:["[",new Date(e.timestamp).toLocaleString(),"]"]})," ",(0,s.jsxs)("span",{className:"text-neutral-300",children:[null===(t=e.author)||void 0===t?void 0:t.username,"#",null===(a=e.author)||void 0===a?void 0:a.discriminator]}),":"," ",(0,s.jsx)("span",{className:"text-neutral-200 whitespace-pre-wrap break-words",children:e.content||""})]},e.id)}),0===y.length&&(0,s.jsx)("div",{className:"text-neutral-400 text-sm",children:"No recent messages captured. Try the Download transcript link for a full export."})]}),(0,s.jsx)("div",{className:"mt-3 flex items-center gap-2",children:(0,s.jsx)("button",{onClick:L,disabled:!C,className:"px-3 py-1.5 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 disabled:opacity-50 text-sm",children:C?"Load older messages":"No more messages"})})]})]})]})]})}function c(e){let{label:t,value:a}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-neutral-400",children:t}),(0,s.jsx)("div",{className:"text-neutral-200",children:a})]})}function d(e){let{items:t}=e;return(0,s.jsx)("ol",{className:"relative border-l border-neutral-800 pl-4",children:t.map((e,t)=>(0,s.jsxs)("li",{className:"mb-4 ml-2",children:[(0,s.jsx)("div",{className:"absolute -left-1.5 mt-1.5 w-3 h-3 bg-neutral-700 rounded-full border border-neutral-600"}),(0,s.jsx)("time",{className:"text-xs text-neutral-500",children:new Date(e.timestamp).toLocaleString()}),(0,s.jsxs)("div",{className:"text-sm text-neutral-300",children:[(0,s.jsx)("span",{className:"font-semibold",children:e.action}),e.actorTag?" by ".concat(e.actorTag):""]}),e.message&&(0,s.jsx)("div",{className:"text-sm text-neutral-400 whitespace-pre-wrap break-words",children:e.message})]},t))})}var o=a(7814);let u=["","open","claimed","closed","pending"],x=["","low","normal","high","urgent"],m=e=>{var t;if(!e)return"";let a=(null!==(t=null==e?void 0:e.type)&&void 0!==t?t:"").toString().toLowerCase();return"0"===a||"text"===a||"guild_text"===a?"Text":"2"===a||"voice"===a||"guild_voice"===a?"Voice":"4"===a||"category"===a||"guild_category"===a?"Category":"5"===a||"announcement"===a||"guild_announcement"===a?"Announcement":"Channel"};function h(){var e,t;let a=(0,n._)(),{t:c}=(0,o.QT)(),[d,h]=(0,l.useState)(""),[g,b]=(0,l.useState)(""),[v,j]=(0,l.useState)(""),[f,k]=(0,l.useState)(1),[N,y]=(0,l.useState)(20),[w,C]=(0,l.useState)(!1),[S,T]=(0,l.useState)(null),[P,_]=(0,l.useState)(null),[F,L]=(0,l.useState)({}),[A,E]=(0,l.useState)(null),[M,O]=(0,l.useState)([]),[R,I]=(0,l.useState)([]),[B,D]=(0,l.useState)(""),[z,U]=(0,l.useState)([]),[q,V]=(0,l.useState)(""),[G,H]=(0,l.useState)(!1),[Q,J]=(0,l.useState)(!1),[K,W]=(0,l.useState)(null),X=(0,l.useMemo)(()=>{let e=M.find(e=>e.id===B);return e?e.name:""},[M,B]),Y=(0,l.useMemo)(()=>({status:d,priority:g,q:v,page:f,pageSize:N,staffOnly:G,role:G?B:"",deepRoleFetch:Q}),[d,g,v,f,N,G,B,Q]);(0,l.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("status")||"",a=e.get("priority")||"",s=e.get("q")||"",l=parseInt(e.get("page")||"1",10),n=parseInt(e.get("pageSize")||"20",10),i="true"===(e.get("staffOnly")||"").toLowerCase(),c=e.get("role")||"",d="true"===(e.get("deepRoleFetch")||"").toLowerCase();t&&h(t),a&&b(a),s&&j(s),!Number.isNaN(l)&&l>0&&k(l),!Number.isNaN(n)&&[10,20,50,100].includes(n)&&y(n),H(i),c&&D(c),J(d),(async()=>{try{var e;let t=await r.h.getCurrentUser();W((null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id)||null)}catch(e){}})()},[]),(0,l.useEffect)(()=>{let e=new URL(window.location.href);d?e.searchParams.set("status",d):e.searchParams.delete("status"),g?e.searchParams.set("priority",g):e.searchParams.delete("priority"),v?e.searchParams.set("q",v):e.searchParams.delete("q"),e.searchParams.set("page",String(f)),e.searchParams.set("pageSize",String(N)),G?e.searchParams.set("staffOnly","true"):e.searchParams.delete("staffOnly"),G&&B?e.searchParams.set("role",B):e.searchParams.delete("role"),Q?e.searchParams.set("deepRoleFetch","true"):e.searchParams.delete("deepRoleFetch"),window.history.replaceState({},"",e.toString())},[d,g,v,f,N,G,B,Q]),(0,l.useEffect)(()=>{if(!a)return;let e=!1;return(async()=>{try{let t=await r.h.getRoles(a);e||O((t.roles||[]).map(e=>({id:String(e.id),name:String(e.name)})))}catch(e){}})(),()=>{e=!0}},[a]),(0,l.useEffect)(()=>{if(!a)return;let e=!1;return(async()=>{try{let t=await r.h.getChannels(a);e||I((t.channels||t||[]).filter(e=>e&&e.id&&e.name))}catch(e){}})(),()=>{e=!0}},[a]),(0,l.useEffect)(()=>{if(!a||!B){U([]),V("");return}let e=!1;return(async()=>{try{let t=await r.h.getMembers(a,{role:B,limit:200});e||U((t||[]).map(e=>({id:String(e.id),username:String(e.username),discriminator:String(e.discriminator),nick:e.nick||null})))}catch(t){e||U([])}})(),()=>{e=!0}},[a,B]),(0,l.useEffect)(()=>{if(!a)return;let e=!1;return(async()=>{C(!0),T(null);try{let t=await r.h.getTickets(a,Y);e||_(t)}catch(t){e||T((null==t?void 0:t.message)||"Failed to load tickets")}finally{e||C(!1)}})(),()=>{e=!0}},[a,Y]);let Z=async(e,t)=>{if(a)try{await r.h.ticketAction(a,e,t);let s=await r.h.getTickets(a,Y);_(s)}catch(e){alert((null==e?void 0:e.message)||"Failed to perform action")}},$=e=>{let t={};for(let a of(null==P?void 0:P.tickets)||[])t[a.id]=e;L(t)},ee=(0,l.useMemo)(()=>Object.keys(F).filter(e=>F[e]),[F]),et=async()=>{if(a&&0!==ee.length&&confirm("Close ".concat(ee.length," tickets?"))){for(let e of ee)try{await r.h.ticketAction(a,e,"close")}catch(e){}_(await r.h.getTickets(a,Y)),L({})}},ea=async()=>{if(!a||0===ee.length)return;let e=q||"";if(!e){alert("Select a staff role and assignee.");return}for(let t of ee)try{await r.h.ticketAction(a,t,"assign",{userId:e})}catch(e){}_(await r.h.getTickets(a,Y)),L({})},es=async()=>{if(!a||0===ee.length)return;let e=prompt("Add note to selected tickets:");if(e){for(let t of ee)try{await r.h.ticketAction(a,t,"addNote",{content:e})}catch(e){}_(await r.h.getTickets(a,Y)),L({})}};return(0,s.jsxs)("div",{className:"space-y-4",children:[!a&&(0,s.jsx)("div",{className:"card p-4 text-sm text-neutral-400",children:c("tickets.selectGuildHelp")}),(0,s.jsxs)("div",{className:"card p-4 grid grid-cols-1 md:grid-cols-8 gap-3 items-end",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-neutral-400",children:c("tickets.status")}),(0,s.jsx)("select",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1","aria-label":"Filter by status",title:"Filter by status",value:d,onChange:e=>{k(1),h(e.target.value)},children:u.map(e=>(0,s.jsx)("option",{value:e,children:e||c("common.any")},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-neutral-400",children:c("tickets.priority")}),(0,s.jsx)("select",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1","aria-label":"Filter by priority",title:"Filter by priority",value:g,onChange:e=>{k(1),b(e.target.value)},children:x.map(e=>(0,s.jsx)("option",{value:e,children:e||c("common.any")},e))})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"text-xs text-neutral-400",children:c("tickets.search")}),(0,s.jsx)("input",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",placeholder:c("tickets.search.placeholder"),value:v,onChange:e=>{k(1),j(e.target.value)}})]}),(0,s.jsxs)("div",{className:"flex gap-2 md:col-span-3",children:[(0,s.jsx)("button",{onClick:()=>{if(!a)return;let e=r.h.exportTicketsUrl(a,Y);window.open(e,"_blank")},className:"mt-5 bg-neutral-800 hover:bg-neutral-700 text-sm px-3 py-2 rounded border border-neutral-700",children:c("tickets.export")}),(0,s.jsxs)("div",{className:"ml-auto flex items-end gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-neutral-400",children:c("tickets.staffRole")}),(0,s.jsxs)("select",{className:"mt-1 w-40 bg-neutral-900 border border-neutral-700 rounded px-2 py-1","aria-label":"Staff role",title:"Staff role",value:B,onChange:e=>{D(e.target.value),V("")},children:[(0,s.jsx)("option",{value:"",children:c("tickets.selectRole")}),M.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-neutral-400",children:c("tickets.assignee")}),(0,s.jsxs)("select",{className:"mt-1 w-48 bg-neutral-900 border border-neutral-700 rounded px-2 py-1","aria-label":"Assignee",title:"Assignee",value:q,onChange:e=>V(e.target.value),children:[(0,s.jsx)("option",{value:"",children:c("tickets.selectMember")}),z.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nick?"".concat(e.nick," (").concat(e.username,"#").concat(e.discriminator,")"):"".concat(e.username,"#").concat(e.discriminator)},e.id))]})]}),(0,s.jsxs)("div",{className:"mt-5 flex items-center gap-2",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-xs text-neutral-300",children:[(0,s.jsx)("input",{type:"checkbox",checked:G,onChange:e=>{H(e.target.checked),k(1)}})," ",c("tickets.staffOnly")]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 text-xs text-neutral-300",children:[(0,s.jsx)("input",{type:"checkbox",checked:Q,onChange:e=>J(e.target.checked)})," ",c("tickets.deepFetch")]})]})]})]})]}),(G||!!B||Q||!!d||!!g||!!v)&&(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[(0,s.jsx)("span",{className:"text-neutral-400 mr-1",children:c("tickets.filtersApplied")}),!!d&&(0,s.jsxs)("span",{className:"px-2 py-0.5 rounded bg-neutral-800 border border-neutral-700 text-neutral-200",children:[c("tickets.status"),": ",d]}),!!g&&(0,s.jsxs)("span",{className:"px-2 py-0.5 rounded bg-neutral-800 border border-neutral-700 text-neutral-200",children:[c("tickets.priority"),": ",g]}),!!v&&(0,s.jsxs)("span",{className:"px-2 py-0.5 rounded bg-neutral-800 border border-neutral-700 text-neutral-200",children:[c("tickets.search"),": “",v,"”"]}),G&&(0,s.jsx)("span",{className:"px-2 py-0.5 rounded bg-neutral-800 border border-neutral-700 text-neutral-200",children:c("tickets.staffOnly")}),!!B&&(0,s.jsxs)("span",{className:"px-2 py-0.5 rounded bg-neutral-800 border border-neutral-700 text-neutral-200",children:[c("tickets.role"),": ",X||B]}),Q&&(0,s.jsx)("span",{className:"px-2 py-0.5 rounded bg-neutral-800 border border-neutral-700 text-neutral-200",children:c("tickets.deepFetch")}),(0,s.jsx)("button",{type:"button",className:"ml-1 underline text-neutral-400 hover:text-neutral-200",onClick:()=>{h(""),b(""),j(""),H(!1),D(""),J(!1),k(1)},"aria-label":"Clear filters",title:c("tickets.clearFilters"),children:c("tickets.clearFilters")})]}),P&&(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[(0,s.jsx)(p,{label:c("tickets.stats.total"),value:P.stats.total,colorClass:"bg-neutral-400"}),(0,s.jsx)(p,{label:c("tickets.stats.open"),value:P.stats.open,colorClass:"bg-emerald-500"}),(0,s.jsx)(p,{label:c("tickets.stats.claimed"),value:P.stats.claimed,colorClass:"bg-amber-500"}),(0,s.jsx)(p,{label:c("tickets.stats.closed"),value:P.stats.closed,colorClass:"bg-rose-500"}),(0,s.jsx)(p,{label:c("tickets.stats.pending"),value:P.stats.pending,colorClass:"bg-blue-500"})]}),(0,s.jsxs)("div",{className:"card p-0 overflow-hidden",children:[(0,s.jsxs)("div",{className:"divide-y divide-neutral-800",children:[w&&(0,s.jsx)("div",{className:"p-6 text-neutral-400",children:c("tickets.loading")}),S&&(0,s.jsx)("div",{className:"p-6 text-red-400",children:S}),!w&&!S&&(null==P?void 0:null===(e=P.tickets)||void 0===e?void 0:e.length)===0&&(0,s.jsx)("div",{className:"p-6 text-neutral-400",children:c("tickets.none")}),null==P?void 0:null===(t=P.tickets)||void 0===t?void 0:t.map(e=>(0,s.jsxs)("div",{className:"p-4 flex flex-col md:flex-row md:items-center gap-3",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("input",{type:"checkbox","aria-label":"Select ticket ".concat(e.id),checked:!!F[e.id],onChange:t=>L(a=>({...a,[e.id]:t.target.checked}))})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsxs)("span",{className:"text-neutral-300 font-mono",children:["#",e.id]}),(0,s.jsx)("span",{className:"px-2 py-0.5 text-xs rounded bg-neutral-800 border border-neutral-700",children:e.status}),e.priority&&(0,s.jsx)("span",{className:"px-2 py-0.5 text-xs rounded bg-neutral-800 border border-neutral-700",children:e.priority}),e.timeAgo&&(0,s.jsx)("span",{className:"text-xs text-neutral-500",children:e.timeAgo})]}),(0,s.jsx)("div",{className:"mt-1 text-neutral-200 truncate",children:e.subject||e.category||"Ticket"}),(0,s.jsxs)("div",{className:"mt-1 text-xs text-neutral-400 truncate",children:[e.ownerTag," • ",(()=>{let t=R.find(t=>t.id===e.channel_id);return t?"#".concat(t.name," (").concat(m(t),")"):e.channelName?"#".concat(e.channelName):e.channel_id})()]}),e.claimedByTag&&(0,s.jsxs)("div",{className:"mt-1 text-xs text-neutral-400",children:[c("tickets.claimedBy")," ",e.claimedByTag]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>E(e.id),className:"bg-neutral-800 hover:bg-neutral-700 px-3 py-1.5 rounded text-sm border border-neutral-700",children:c("tickets.view")}),"open"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>Z(e.id,"claim"),className:"bg-emerald-600 hover:bg-emerald-500 px-3 py-1.5 rounded text-sm",children:c("tickets.claim")}),(0,s.jsx)("button",{onClick:()=>Z(e.id,"claim"),className:"bg-blue-600 hover:bg-blue-500 px-3 py-1.5 rounded text-sm",children:c("tickets.assignToMe")})]}),"claimed"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>Z(e.id,"release"),className:"bg-neutral-700 hover:bg-neutral-600 px-3 py-1.5 rounded text-sm",children:c("tickets.release")}),(0,s.jsx)("button",{onClick:()=>Z(e.id,"close"),className:"bg-rose-600 hover:bg-rose-500 px-3 py-1.5 rounded text-sm",children:c("tickets.close")}),K&&(0,s.jsx)("button",{onClick:()=>r.h.ticketAction(a,e.id,"assign",{userId:K}).then(()=>r.h.getTickets(a,Y).then(_)),className:"bg-blue-600 hover:bg-blue-500 px-3 py-1.5 rounded text-sm",children:c("tickets.assignToMe")})]}),"open"===e.status&&(0,s.jsx)("button",{onClick:()=>Z(e.id,"close"),className:"bg-rose-600 hover:bg-rose-500 px-3 py-1.5 rounded text-sm",children:c("tickets.close")})]})]},e.id))]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border-t border-neutral-800 text-sm",children:[(0,s.jsxs)("div",{className:"text-neutral-400",children:["Page ",(null==P?void 0:P.pagination.page)||f," / ",(null==P?void 0:P.pagination.totalPages)||1]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox","aria-label":"Select all on page",onChange:e=>$(e.target.checked)}),ee.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-neutral-400",children:[ee.length," ",c("tickets.selectedSuffix")]}),(0,s.jsx)("button",{onClick:et,className:"px-3 py-1.5 rounded bg-rose-600 hover:bg-rose-500",children:c("tickets.close")}),(0,s.jsx)("button",{onClick:ea,className:"px-3 py-1.5 rounded bg-neutral-700 hover:bg-neutral-600",children:c("tickets.bulk.assign")}),(0,s.jsx)("button",{onClick:es,className:"px-3 py-1.5 rounded bg-blue-600 hover:bg-blue-500",children:c("tickets.bulk.addNote")})]}),(0,s.jsx)("button",{className:"px-3 py-1.5 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 disabled:opacity-50",disabled:1>=((null==P?void 0:P.pagination.page)||f),onClick:()=>k(((null==P?void 0:P.pagination.page)||f)-1),children:c("common.prev")}),(0,s.jsx)("button",{className:"px-3 py-1.5 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 disabled:opacity-50",disabled:((null==P?void 0:P.pagination.page)||f)>=((null==P?void 0:P.pagination.totalPages)||1),onClick:()=>k(((null==P?void 0:P.pagination.page)||f)+1),children:c("common.next")}),(0,s.jsx)("select",{className:"ml-2 bg-neutral-900 border border-neutral-700 rounded px-2 py-1","aria-label":"Items per page",title:"Items per page",value:N,onChange:e=>{k(1),y(parseInt(e.target.value,10))},children:[10,20,50,100].map(e=>(0,s.jsxs)("option",{value:e,children:[e,c("tickets.perPageSuffix")]},e))})]})]})]}),a&&A&&(0,s.jsx)(i,{guildId:a,ticketId:A,onClose:()=>E(null)})]})}function p(e){let{label:t,value:a,colorClass:l}=e;return(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsx)("div",{className:"text-sm text-neutral-400",children:t}),(0,s.jsxs)("div",{className:"mt-1 text-2xl font-semibold flex items-center gap-2",children:[(0,s.jsx)("span",{className:"inline-block w-2 h-2 rounded-full ".concat(l)}),a]})]})}}}]);