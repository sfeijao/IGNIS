"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[630],{8183:function(e,t,i){i.d(t,{ToasterProvider:function(){return n},p:function(){return o}});var l=i(7437),r=i(2265);let a=(0,r.createContext)(null);function o(){let e=(0,r.useContext)(a);if(!e)throw Error("useToast must be used within <ToasterProvider />");return e}function n(e){let{children:t}=e,[i,o]=(0,r.useState)([]),n=(0,r.useRef)(0),s=(0,r.useCallback)(e=>{o(t=>t.filter(t=>t.id!==e))},[]),c=(0,r.useCallback)(e=>{let t="".concat(Date.now(),"_").concat(n.current++),i={id:t,...e};o(e=>[...e,i]),window.setTimeout(()=>s(t),4500)},[s]),d=(0,r.useMemo)(()=>({toast:c}),[c]);return(0,l.jsxs)(a.Provider,{value:d,children:[t,(0,l.jsx)("div",{className:"fixed z-50 right-4 bottom-4 flex flex-col gap-2 w-[min(92vw,380px)]",role:"status","aria-live":"polite",children:i.map(e=>(0,l.jsxs)("div",{className:"rounded-xl border p-3 shadow-lg backdrop-blur card ".concat("success"===e.type?"border-emerald-700/60":"error"===e.type?"border-rose-700/60":"border-neutral-700/60"),children:[e.title&&(0,l.jsx)("div",{className:"text-sm font-semibold mb-0.5",children:e.title}),e.description&&(0,l.jsx)("div",{className:"text-xs text-neutral-300",children:e.description})]},e.id))})]})}},7630:function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var l=i(7437),r=i(2265),a=i(2837),o=i(7814),n=i(8183),s=i(9988);let c=e=>{var t;let i=(null!==(t=null==e?void 0:e.type)&&void 0!==t?t:"").toString().toLowerCase();return""===i||"0"===i||"text"===i||"guild_text"===i||"5"===i||"announcement"===i||"guild_announcement"===i},d=e=>{switch(String("string"==typeof e?e:(null==e?void 0:e.type)||"").toLowerCase()){case"guild_text":case"text":return"Text";case"guild_announcement":case"announcement":return"Announcement";case"guild_voice":case"voice":return"Voice";case"guild_category":case"category":return"Category";default:return"Channel"}};function u(){var e;let t=(0,a._)(),[i,u]=(0,r.useState)({mode:"easy",method:"button",cooldownSeconds:0,logFails:!1}),[v,h]=(0,r.useState)({template:"minimal",title:"",description:"",buttonLabel:"",color:"#7C3AED"}),[x,f]=(0,r.useState)(""),[b,g]=(0,r.useState)(!0),[y,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)("idle"),[k,C]=(0,r.useState)([]),[S,F]=(0,r.useState)([]),[_,R]=(0,r.useState)("idle"),{t:L}=(0,o.QT)(),{toast:D}=(0,n.p)();(0,r.useEffect)(()=>{if(!t)return;let e=!1;return(async()=>{try{let i=await fetch("/api/guild/".concat(t,"/verification/config"),{credentials:"include"});if(i.ok){let t=await i.json(),l=(null==t?void 0:t.config)||t||{};if(!e){u({mode:l.mode||"easy",method:l.method||"button",cooldownSeconds:Number(l.cooldownSeconds||0),logFails:!!l.logFails,logFailRetention:l.logFailRetention||(l.logFails?7:void 0),verifiedRoleId:l.verifiedRoleId||"",unverifiedRoleId:l.unverifiedRoleId||"",form:l.form&&l.form.questions?{questions:l.form.questions}:void 0});let e=l.panelDefaults||{};h({template:["minimal","rich"].includes(e.template)?e.template:"minimal",title:e.title||"",description:e.description||"",buttonLabel:e.buttonLabel||"",color:e.color||"#7C3AED"})}}}catch(e){}try{let i=await s.h.getChannels(t);e||C(i.channels||i||[])}catch(e){}try{let i=await s.h.getRoles(t);e||F(i.roles||i||[])}catch(e){}})(),()=>{e=!0}},[t]);let A=(0,r.useMemo)(()=>k.filter(c),[k]),q=async()=>{if(t){j(!0),w("saving");try{let e={mode:i.mode||"easy",method:i.method||"button",cooldownSeconds:Math.max(0,Math.min(3600,Number(i.cooldownSeconds||0))),logFails:!!i.logFails,verifiedRoleId:i.verifiedRoleId||void 0,unverifiedRoleId:i.unverifiedRoleId||void 0};e.logFails&&(e.logFailRetention=Math.max(1,Math.min(90,Number(i.logFailRetention||7)))),"form"===i.method&&i.form&&Array.isArray(i.form.questions)&&i.form.questions.length>0&&(e.form={questions:i.form.questions}),(await fetch("/api/guild/".concat(t,"/verification/config"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)})).ok?(w("ok"),D({type:"success",title:L("verification.saved")})):(w("err"),D({type:"error",title:L("verification.saveFailed")}))}catch(e){w("err"),D({type:"error",title:L("verification.saveFailed")})}finally{j(!1),setTimeout(()=>w("idle"),1500)}}},T=async()=>{if(t){j(!0),w("saving");try{let e={panelDefaults:{template:v.template,title:(v.title||"").trim(),description:(v.description||"").trim(),buttonLabel:(v.buttonLabel||"").trim(),color:(v.color||"").trim()}};(await fetch("/api/guild/".concat(t,"/verification/config"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)})).ok?(w("ok"),D({type:"success",title:L("verification.saved")})):(w("err"),D({type:"error",title:L("verification.saveFailed")}))}catch(e){w("err"),D({type:"error",title:L("verification.saveFailed")})}finally{j(!1),setTimeout(()=>w("idle"),1500)}}},E=async()=>{if(t){j(!0),w("saving");try{(await fetch("/api/guild/".concat(t,"/verification/config"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({panelDefaults:{clear:!0}})})).ok?(w("ok"),D({type:"success",title:L("verification.saved")})):(w("err"),D({type:"error",title:L("verification.saveFailed")}))}catch(e){w("err"),D({type:"error",title:L("verification.saveFailed")})}finally{j(!1),setTimeout(()=>w("idle"),1500)}}},I=async()=>{if(t&&x){j(!0),w("saving");try{let e={type:"verification",channel_id:x,theme:"dark"};b||(e.template=v.template||"minimal",e.options={title:(v.title||"").trim()||void 0,description:(v.description||"").trim()||void 0,buttonLabel:(v.buttonLabel||"").trim()||void 0,color:(v.color||"").trim()||void 0});let i=await s.h.createPanel(t,e);(null==i?void 0:i.success)?(w("ok"),D({type:"success",title:L("verification.saved")})):(w("err"),D({type:"error",title:L("verification.saveFailed")}))}catch(e){w("err"),D({type:"error",title:L("verification.saveFailed")})}finally{j(!1),setTimeout(()=>w("idle"),1500)}}},M=async()=>{if(t){R("sending");try{let e={type:"verification",dryRun:!0,theme:"dark"};b||(e.template=v.template||"minimal",e.options={title:(v.title||"").trim()||void 0,description:(v.description||"").trim()||void 0,buttonLabel:(v.buttonLabel||"").trim()||void 0,color:(v.color||"").trim()||void 0});let i=await s.h.createPanel(t,e);(null==i?void 0:i.success)?(R("ok"),D({type:"success",title:L("verification.panel.test.sent")})):(R("err"),D({type:"error",title:L("verification.panel.test.fail")}))}catch(e){R("err"),D({type:"error",title:L("verification.panel.test.fail")})}finally{setTimeout(()=>R("idle"),2e3)}}};return(0,l.jsxs)("div",{className:"space-y-4",children:[!t&&(0,l.jsx)("div",{className:"card p-4 text-sm text-neutral-400",children:L("verification.selectGuild")}),(0,l.jsxs)("form",{className:"card p-5 max-w-2xl space-y-4",onSubmit:e=>{e.preventDefault(),q()},children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:L("verification.mode")}),(0,l.jsxs)("select",{title:L("verification.mode"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:i.mode,onChange:e=>u(t=>({...t,mode:e.target.value})),children:[(0,l.jsx)("option",{value:"easy",children:L("verification.mode.easy")}),(0,l.jsx)("option",{value:"medium",children:L("verification.mode.medium")}),(0,l.jsx)("option",{value:"hard",children:L("verification.mode.hard")})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:L("verification.method")}),(0,l.jsxs)("select",{title:L("verification.method"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:i.method,onChange:e=>u(t=>({...t,method:e.target.value})),children:[(0,l.jsx)("option",{value:"button",children:L("verification.method.button")}),(0,l.jsx)("option",{value:"image",children:L("verification.method.image")}),(0,l.jsx)("option",{value:"reaction",children:L("verification.method.reaction")}),(0,l.jsx)("option",{value:"form",children:L("verification.method.form")})]}),(0,l.jsxs)("p",{className:"text-xs opacity-70 mt-1",children:["button"===i.method&&L("verification.method.help.button"),"image"===i.method&&L("verification.method.help.image"),"reaction"===i.method&&L("verification.method.help.reaction"),"form"===i.method&&L("verification.method.help.form")]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:L("verification.cooldownSeconds")}),(0,l.jsx)("input",{title:L("verification.cooldownSeconds"),placeholder:"0",type:"number",min:0,max:3600,value:Number(i.cooldownSeconds||0),onChange:e=>u(t=>({...t,cooldownSeconds:Math.max(0,Math.min(3600,parseInt(e.target.value||"0",10)||0))})),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 pt-6",children:[(0,l.jsx)("input",{id:"v-logfails",type:"checkbox",checked:!!i.logFails,onChange:e=>u(t=>({...t,logFails:e.target.checked}))}),(0,l.jsx)("label",{htmlFor:"v-logfails",children:L("verification.logFails")})]})]}),i.logFails&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:L("verification.logFailRetention")}),(0,l.jsx)("input",{title:L("verification.logFailRetention"),placeholder:"7",type:"number",min:1,max:90,value:Number(i.logFailRetention||7),onChange:e=>u(t=>({...t,logFailRetention:Math.max(1,Math.min(90,parseInt(e.target.value||"7",10)||7))})),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2 max-w-xs"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:L("verification.verifiedRole")}),(0,l.jsxs)("select",{title:L("verification.verifiedRole"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:i.verifiedRoleId||"",onChange:e=>u(t=>({...t,verifiedRoleId:e.target.value})),children:[(0,l.jsx)("option",{value:"",children:"—"}),S.map(e=>(0,l.jsx)("option",{value:e.id,children:"@".concat(e.name)},e.id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:L("verification.unverifiedRole")}),(0,l.jsxs)("select",{title:L("verification.unverifiedRole"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:i.unverifiedRoleId||"",onChange:e=>u(t=>({...t,unverifiedRoleId:e.target.value})),children:[(0,l.jsx)("option",{value:"",children:"—"}),S.map(e=>(0,l.jsx)("option",{value:e.id,children:"@".concat(e.name)},e.id))]})]})]}),"form"===i.method&&(0,l.jsx)(m,{value:(null===(e=i.form)||void 0===e?void 0:e.questions)||[],onChange:e=>u(t=>({...t,form:{questions:e}}))}),(0,l.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,l.jsx)("button",{type:"submit",disabled:y,className:"px-4 py-2 rounded-lg bg-brand-600 hover:bg-brand-700 font-medium disabled:opacity-60",children:"saving"===N?L("verification.saving"):L("verification.save")}),"ok"===N&&(0,l.jsx)("span",{className:"text-emerald-400 text-sm",children:L("verification.saved")}),"err"===N&&(0,l.jsx)("span",{className:"text-rose-400 text-sm",children:L("verification.saveFailed")})]})]}),(0,l.jsxs)("div",{className:"card p-5 max-w-2xl space-y-4",children:[(0,l.jsx)("div",{className:"text-lg font-semibold",children:L("verification.panel.defaults")}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:L("verification.panel.template")}),(0,l.jsxs)("select",{title:L("verification.panel.template"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:v.template,onChange:e=>h(t=>({...t,template:e.target.value})),children:[(0,l.jsx)("option",{value:"minimal",children:L("verification.panel.template.minimal")}),(0,l.jsx)("option",{value:"rich",children:L("verification.panel.template.rich")})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:L("verification.panel.color")}),(0,l.jsx)("input",{title:L("verification.panel.color"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:v.color||"",onChange:e=>h(t=>({...t,color:e.target.value})),placeholder:"#7C3AED"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:L("verification.panel.title")}),(0,l.jsx)("input",{title:L("verification.panel.title"),placeholder:L("verification.panel.title"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:v.title||"",onChange:e=>h(t=>({...t,title:e.target.value}))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:L("verification.panel.buttonLabel")}),(0,l.jsx)("input",{title:L("verification.panel.buttonLabel"),placeholder:L("verification.panel.buttonLabel"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:v.buttonLabel||"",onChange:e=>h(t=>({...t,buttonLabel:e.target.value}))})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:L("verification.panel.description")}),(0,l.jsx)("textarea",{title:L("verification.panel.description"),placeholder:L("verification.panel.description"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",rows:3,value:v.description||"",onChange:e=>h(t=>({...t,description:e.target.value}))})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{type:"button",onClick:T,className:"px-4 py-2 rounded-lg bg-neutral-800 hover:bg-neutral-700 border border-neutral-700",children:L("verification.panel.saveDefaults")}),(0,l.jsx)("button",{type:"button",onClick:E,className:"px-4 py-2 rounded-lg bg-neutral-800 hover:bg-neutral-700 border border-neutral-700",children:L("verification.panel.resetDefaults")})]})]}),(0,l.jsxs)("div",{className:"card p-5 max-w-2xl space-y-4",children:[(0,l.jsx)("div",{className:"text-lg font-semibold",children:L("verification.panel.preview")}),(0,l.jsx)(p,{title:v.title||"",description:v.description||"",buttonLabel:v.buttonLabel||L("verification.panel.buttonLabel"),color:v.color||"#7C3AED",hideButton:"reaction"===i.method})]}),(0,l.jsxs)("div",{className:"card p-5 max-w-2xl space-y-4",children:[(0,l.jsx)("div",{className:"text-lg font-semibold",children:L("verification.panel.create")}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:L("verification.panel.channel")}),(0,l.jsxs)("select",{title:L("verification.panel.channel"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:x,onChange:e=>f(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"—"}),A.map(e=>(0,l.jsx)("option",{value:e.id,children:"#".concat(e.name," (").concat(d(e),")")},e.id))]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 pt-6",children:[(0,l.jsx)("input",{id:"useSavedDefaults",type:"checkbox",checked:b,onChange:e=>g(e.target.checked)}),(0,l.jsx)("label",{htmlFor:"useSavedDefaults",children:L("verification.panel.useSavedDefaults")})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("button",{type:"button",onClick:I,disabled:!x,className:"px-4 py-2 rounded-lg bg-brand-600 hover:bg-brand-700 font-medium disabled:opacity-60",children:L("verification.panel.createButton")}),(0,l.jsx)("button",{type:"button",onClick:M,className:"ml-2 px-4 py-2 rounded-lg bg-neutral-800 hover:bg-neutral-700 border border-neutral-700",children:L("verification.panel.test")}),"sending"===_&&(0,l.jsx)("span",{className:"ml-2 text-sm opacity-70",children:L("common.working")}),"ok"===_&&(0,l.jsx)("span",{className:"ml-2 text-sm text-emerald-400",children:L("verification.panel.test.sent")}),"err"===_&&(0,l.jsx)("span",{className:"ml-2 text-sm text-rose-400",children:L("verification.panel.test.fail")})]})]})]})}function m(e){let{value:t,onChange:i}=e,{t:a}=(0,o.QT)(),[n,s]=(0,r.useState)(()=>Array.isArray(t)?t.slice():[]),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)("short_text"),[p,v]=(0,r.useState)(!1),[h,x]=(0,r.useState)(""),[f,b]=(0,r.useState)([]),[g,y]=(0,r.useState)(null),[j,N]=(0,r.useState)(null);(0,r.useEffect)(()=>{s(Array.isArray(t)?t.slice():[])},[t]),(0,r.useEffect)(()=>{i(n)},[n]);let w=()=>{d(""),m("short_text"),v(!1),x(""),b([]),y(null)},k=e=>b(t=>t.filter((t,i)=>i!==e)),C=(e,t)=>s(i=>{let l=i.slice(),r=e+t;if(r<0||r>=l.length)return l;let a=l[e];return l[e]=l[r],l[r]=a,l}),S=e=>s(t=>t.filter((t,i)=>i!==e)),F=e=>{let t=n[e];t&&(d(t.label||""),m(t.type||"short_text"),v(!!t.required),b(Array.isArray(t.options)?t.options.slice():[]),y(e))},_=0===(c||"").trim().length,R=("multiple_choice"===u||"dropdown"===u)&&f.length<2,L=!_&&!R;return(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("div",{className:"text-lg font-semibold",children:a("verification.form.title")}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm mb-1",htmlFor:"q-label",children:a("verification.form.newQuestionLabel")}),(0,l.jsx)("input",{id:"q-label",title:a("verification.form.newQuestionLabel"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:c,onChange:e=>d(e.target.value),placeholder:a("verification.form.newQuestionLabel")}),_&&(0,l.jsx)("div",{className:"text-xs text-rose-400 mt-1",children:a("verification.form.errors.needLabel")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",htmlFor:"q-type",children:a("verification.form.type")}),(0,l.jsxs)("select",{id:"q-type",title:a("verification.form.type"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:u,onChange:e=>m(e.target.value),children:[(0,l.jsx)("option",{value:"short_text",children:a("verification.form.type.short_text")}),(0,l.jsx)("option",{value:"long_text",children:a("verification.form.type.long_text")}),(0,l.jsx)("option",{value:"yes_no",children:a("verification.form.type.yes_no")}),(0,l.jsx)("option",{value:"multiple_choice",children:a("verification.form.type.multiple_choice")}),(0,l.jsx)("option",{value:"dropdown",children:a("verification.form.type.dropdown")})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{id:"q-required",type:"checkbox",checked:p,onChange:e=>v(e.target.checked)}),(0,l.jsx)("label",{htmlFor:"q-required",children:a("verification.form.required")})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"button",disabled:!L,onClick:()=>{var e;let t=(c||"").trim();if(!t)return;let i={id:null!=g&&(null===(e=n[g])||void 0===e?void 0:e.id)||"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,8)),label:t,type:u,required:p};if("multiple_choice"===u||"dropdown"===u){if(f.length<2)return;i.options=f.slice()}s(e=>{if(null!=g){let t=e.slice();return t[g]=i,t}return[...e,i]}),w()},className:"px-4 py-2 rounded-lg bg-neutral-800 hover:bg-neutral-700 border border-neutral-700 w-full disabled:opacity-60",children:null!=g?a("verification.form.updateQuestion"):a("verification.form.addQuestion")})})]}),("multiple_choice"===u||"dropdown"===u)&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:a("verification.form.options")}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{title:a("verification.form.option.placeholder"),className:"flex-1 rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:h,onChange:e=>x(e.target.value),placeholder:a("verification.form.option.placeholder")}),(0,l.jsx)("button",{type:"button",onClick:()=>{let e=(h||"").trim();!(!e||f.includes(e))&&(f.length>=25||(b(t=>[...t,e]),x("")))},className:"px-3 py-2 rounded-lg bg-neutral-800 hover:bg-neutral-700 border border-neutral-700",children:a("verification.form.addOption")})]}),(0,l.jsx)("ul",{className:"mt-2 space-y-2",children:f.map((e,t)=>(0,l.jsxs)("li",{className:"flex items-center justify-between p-2 rounded-lg bg-neutral-900 border border-neutral-800",children:[(0,l.jsx)("span",{className:"text-sm",children:e}),(0,l.jsx)("button",{type:"button",onClick:()=>k(t),className:"text-xs text-rose-400 hover:text-rose-300",children:a("verification.form.delete")})]},"".concat(e,"-").concat(t)))}),R&&(0,l.jsx)("div",{className:"text-xs text-rose-400 mt-1",children:a("verification.form.errors.needTwoOptions")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm mb-2 opacity-80",children:a("verification.form.list")}),0===n.length&&(0,l.jsx)("div",{className:"text-sm opacity-60",children:a("verification.metrics.noData")}),(0,l.jsx)("ul",{className:"space-y-2",children:n.map((e,t)=>(0,l.jsx)("li",{className:"p-3 rounded-lg bg-neutral-900 border border-neutral-800",children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium",children:e.label}),(0,l.jsx)("div",{className:"text-xs opacity-70",children:a("verification.form.type.".concat(e.type))}),Array.isArray(e.options)&&e.options.length>0&&(0,l.jsxs)("div",{className:"text-xs opacity-70",children:[a("verification.form.options"),": ",e.options.length]}),e.required&&(0,l.jsx)("div",{className:"text-xs text-amber-300",children:a("verification.form.required")})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{type:"button",onClick:()=>C(t,-1),className:"text-xs px-2 py-1 rounded bg-neutral-800 hover:bg-neutral-700 border border-neutral-700",children:a("verification.form.moveUp")}),(0,l.jsx)("button",{type:"button",onClick:()=>C(t,1),className:"text-xs px-2 py-1 rounded bg-neutral-800 hover:bg-neutral-700 border border-neutral-700",children:a("verification.form.moveDown")}),(0,l.jsx)("button",{type:"button",onClick:()=>F(t),className:"text-xs px-2 py-1 rounded bg-neutral-800 hover:bg-neutral-700 border border-neutral-700",children:a("verification.form.edit")}),(0,l.jsx)("button",{type:"button",onClick:()=>S(t),className:"text-xs px-2 py-1 rounded bg-rose-700 hover:bg-rose-600 border border-rose-600",children:a("verification.form.delete")})]})]})},e.id||t))})]}),(0,l.jsxs)("div",{className:"pt-2 flex flex-wrap gap-2",children:[(0,l.jsx)("button",{type:"button",onClick:()=>(function(e){try{let t=new Blob([JSON.stringify(e||[],null,2)],{type:"application/json"}),i=URL.createObjectURL(t),l=document.createElement("a");l.href=i,l.download="verification-form.json",document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(i)}catch(e){}})(n),className:"px-3 py-2 rounded-lg bg-neutral-800 hover:bg-neutral-700 border border-neutral-700",children:a("verification.form.export")}),(0,l.jsxs)("label",{className:"px-3 py-2 rounded-lg bg-neutral-800 hover:bg-neutral-700 border border-neutral-700 cursor-pointer",children:[(0,l.jsx)("input",{type:"file",accept:"application/json",className:"hidden",onChange:e=>(function(e,t,i){try{var l,r;i(null);let a=null==e?void 0:null===(r=e.target)||void 0===r?void 0:null===(l=r.files)||void 0===l?void 0:l[0];if(!a)return;let o=new FileReader;o.onload=()=>{try{let e=JSON.parse(String(o.result||"[]"));if(!Array.isArray(e))throw Error("invalid");let i=new Set(["short_text","long_text","yes_no","multiple_choice","dropdown"]),l=e.map(e=>{let t=String((null==e?void 0:e.label)||"").trim(),l=String((null==e?void 0:e.type)||"short_text"),r=!!(null==e?void 0:e.required),a=Array.isArray(null==e?void 0:e.options)?e.options.map(e=>String(e)).filter(Boolean):void 0;if(!t||!i.has(l)||("multiple_choice"===l||"dropdown"===l)&&(!a||a.length<2))throw Error("invalid");return{id:String((null==e?void 0:e.id)||"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,8))),label:t,type:l,required:r,options:a}});t(l)}catch(e){i("invalid")}},o.readAsText(a)}catch(e){i("invalid")}})(e,s,N)}),a("verification.form.import")]}),j&&(0,l.jsx)("div",{className:"text-xs text-rose-400",children:j})]})]})}function p(e){let{title:t,description:i,buttonLabel:r,color:a,hideButton:o}=e,n=/^#?[0-9a-fA-F]{6}$/.test((a||"").replace("#",""))?a.startsWith("#")?a:"#"+a:"#7C3AED";return(0,l.jsxs)("div",{className:"rounded-lg border border-neutral-800 p-4 bg-neutral-900/50",children:[(0,l.jsx)("svg",{className:"w-full mb-3",role:"img","aria-label":"color-preview",height:"4",children:(0,l.jsx)("rect",{x:"0",y:"0",width:"100%",height:"4",fill:n})}),(0,l.jsx)("div",{className:"font-semibold text-lg mb-1",children:t||"\uD83D\uDD12 Verifica\xe7\xe3o do Servidor"}),(0,l.jsx)("div",{className:"text-sm opacity-90 whitespace-pre-line",children:i||"Clica em Verificar para concluir e ganhar acesso aos canais."}),!o&&(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsxs)("button",{type:"button",className:"px-4 py-2 rounded bg-brand-600 hover:bg-brand-700",children:[(0,l.jsx)("span",{className:"mr-1",children:"✅"}),r||"Verificar"]})})]})}}}]);