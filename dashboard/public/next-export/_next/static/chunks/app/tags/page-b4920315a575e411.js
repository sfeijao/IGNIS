(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[904],{2176:function(e,r,a){Promise.resolve().then(a.bind(a,7960)),Promise.resolve().then(a.bind(a,912)),Promise.resolve().then(a.bind(a,1481))},7960:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return i}});var t=a(7437),l=a(2265),n=a(2837),s=a(9988),d=a(7814);function i(){let e=(0,n._)(),{t:r}=(0,d.QT)(),[a,i]=(0,l.useState)([]),[o,c]=(0,l.useState)(null),[u,m]=(0,l.useState)(""),[x,b]=(0,l.useState)(!1),[p,h]=(0,l.useState)(!1),[g,f]=(0,l.useState)(""),[v,j]=(0,l.useState)(""),[y,N]=(0,l.useState)([]),[w,C]=(0,l.useState)(new Set),[k,S]=(0,l.useState)(""),P=(0,l.useMemo)(()=>a.filter(e=>!u||e.name.toLowerCase().includes(u.toLowerCase())||e.prefix.toLowerCase().includes(u.toLowerCase())),[a,u]),_=async()=>{if(e){b(!0);try{let r=await s.h.getTags(e);i(r.tags||[])}finally{b(!1)}}};(0,l.useEffect)(()=>{_()},[e]);let E=async()=>{if(e&&o&&o.name&&o.prefix){b(!0);try{await s.h.upsertTag(e,o),c(null),await _()}finally{b(!1)}}},O=async a=>{if(e&&confirm(r("tags.remove.confirm")||"Remover tag?")){b(!0);try{await s.h.deleteTag(e,a),await _()}finally{b(!1)}}},T=async r=>{if(f(r),h(!0),C(new Set),j(""),e)try{let r=await s.h.getMembers(e,{limit:50});N(r.members||r||[])}catch(e){N([])}},A=async()=>{if(e)try{let r=await s.h.getMembers(e,{q:v,limit:50,refresh:!0});N(r.members||r||[])}catch(e){N([])}},M=e=>C(r=>{let a=new Set(r);return a.has(e)?a.delete(e):a.add(e),a}),R=async()=>{if(e&&g&&0!==w.size){b(!0);try{await s.h.applyTag(e,{tagId:g,userIds:Array.from(w),expireSeconds:"number"==typeof k?k:void 0}),h(!1),C(new Set)}finally{b(!1)}}};return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"card p-4 flex flex-wrap items-end gap-3",children:[(0,t.jsxs)("div",{className:"md:w-64",children:[(0,t.jsx)("label",{className:"text-xs text-neutral-400",children:r("tags.search")||"Pesquisar"}),(0,t.jsx)("input",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:u,onChange:e=>m(e.target.value),placeholder:r("tags.search.placeholder")||"Procurar por nome/prefixo"})]}),(0,t.jsx)("button",{onClick:()=>c({id:"",name:"",prefix:"",color:"",icon:"",roleIds:[]}),className:"mt-5 px-3 py-2 rounded bg-brand-600 hover:bg-brand-700 disabled:opacity-50",children:r("tags.new")||"Nova tag"}),(0,t.jsx)("button",{onClick:_,className:"mt-5 px-3 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 disabled:opacity-50",disabled:x,children:r("common.refresh")||"Atualizar"})]}),o&&(0,t.jsxs)("div",{className:"card p-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-neutral-400",children:r("tags.name")||"Nome"}),(0,t.jsx)("input",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:o.name,onChange:e=>c({...o,name:e.target.value}),placeholder:"Owner"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-neutral-400",children:r("tags.prefix")||"Prefixo"}),(0,t.jsx)("input",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:o.prefix,onChange:e=>c({...o,prefix:e.target.value}),placeholder:"Owner | "})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-neutral-400",children:r("tags.color")||"Cor"}),(0,t.jsx)("input",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:o.color||"",onChange:e=>c({...o,color:e.target.value}),placeholder:"#a855f7"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-neutral-400",children:r("tags.icon")||"\xcdcone"}),(0,t.jsx)("input",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:o.icon||"",onChange:e=>c({...o,icon:e.target.value}),placeholder:"⭐"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:E,className:"mt-5 px-3 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 disabled:opacity-50",disabled:x,children:r("common.save")||"Guardar"}),(0,t.jsx)("button",{onClick:()=>c(null),className:"mt-5 px-3 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",children:r("common.cancel")||"Cancelar"})]})]}),(0,t.jsx)("div",{className:"card p-0 overflow-hidden",children:(0,t.jsxs)("div",{className:"divide-y divide-neutral-800",children:[x&&(0,t.jsx)("div",{className:"p-6 text-neutral-400",children:r("common.loading")||"A carregar…"}),P.map(e=>(0,t.jsxs)("div",{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-6 w-6 rounded bg-neutral-800 border border-neutral-700 flex items-center justify-center",title:e.icon||"",children:e.icon||"\uD83C\uDFF7️"}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"text-neutral-200 truncate",children:[e.name," ",(0,t.jsxs)("span",{className:"text-neutral-500",children:["(",e.prefix,")"]})]})}),(0,t.jsx)("button",{className:"px-2 py-1 text-xs rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",onClick:()=>c(e),title:"Editar",children:r("common.edit")||"Editar"}),(0,t.jsx)("button",{className:"px-2 py-1 text-xs rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",onClick:()=>T(e.id),title:"Aplicar",children:r("tags.apply")||"Aplicar"}),(0,t.jsx)("button",{className:"px-2 py-1 text-xs rounded bg-rose-600 hover:bg-rose-500",onClick:()=>O(e.id),title:"Remover",children:r("common.remove")||"Remover"})]},e.id))]})}),p&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",role:"dialog","aria-modal":!0,children:(0,t.jsxs)("div",{className:"bg-neutral-900 border border-neutral-700 rounded-xl w-full max-w-3xl p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-lg font-semibold",children:r("tags.apply.modalTitle")||"Aplicar tag"}),(0,t.jsx)("button",{onClick:()=>h(!1),className:"px-2 py-1 text-xs rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",children:r("common.close")||"Fechar"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"text-xs text-neutral-400",children:r("tags.members.search")||"Pesquisar membros"}),(0,t.jsx)("input",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:v,onChange:e=>j(e.target.value),placeholder:"nome ou id"})]}),(0,t.jsx)("button",{onClick:A,className:"mt-5 px-3 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",children:r("common.search")||"Pesquisar"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-neutral-400",children:r("tags.expireSeconds")||"Expira\xe7\xe3o (segundos, opcional)"}),(0,t.jsx)("input",{type:"number",className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:k,onChange:e=>S(e.target.value?parseInt(e.target.value,10):""),placeholder:"3600"})]})]}),(0,t.jsx)("div",{className:"h-64 overflow-auto border border-neutral-800 rounded",children:y.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-3 p-2 border-b border-neutral-800",children:[(0,t.jsx)("input",{type:"checkbox",checked:w.has(e.id),onChange:()=>M(e.id)}),(0,t.jsx)("span",{className:"flex-1 min-w-0 text-neutral-200 truncate",children:e.nick?"".concat(e.nick," (").concat(e.username,"#").concat(e.discriminator,")"):"".concat(e.username,"#").concat(e.discriminator)}),(0,t.jsx)("span",{className:"text-xs text-neutral-500",children:e.id})]},e.id))}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:R,className:"px-3 py-2 rounded bg-brand-600 hover:bg-brand-700 disabled:opacity-50",disabled:0===w.size,children:r("tags.applyNow")||"Aplicar agora"}),(0,t.jsx)("button",{onClick:()=>h(!1),className:"px-3 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",children:r("common.cancel")||"Cancelar"})]})]})})]})}},912:function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let t=a(5592);function l(e){let{reason:r,children:a}=e;if("undefined"==typeof window)throw new t.BailoutToCSRError(r);return a}},1481:function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadCss",{enumerable:!0,get:function(){return n}});let t=a(7437),l=a(8512);function n(e){let{moduleIds:r}=e;if("undefined"!=typeof window)return null;let a=(0,l.getExpectedRequestStore)("next/dynamic css"),n=[];if(a.reactLoadableManifest&&r){let e=a.reactLoadableManifest;for(let a of r){if(!e[a])continue;let r=e[a].files.filter(e=>e.endsWith(".css"));n.push(...r)}}return 0===n.length?null:(0,t.jsx)(t.Fragment,{children:n.map(e=>(0,t.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:a.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[814,482,971,23,744],function(){return e(e.s=2176)}),_N_E=e.O()}]);