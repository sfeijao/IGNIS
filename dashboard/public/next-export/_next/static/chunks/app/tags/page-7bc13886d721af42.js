(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[904],{2176:function(e,a,r){Promise.resolve().then(r.bind(r,7960)),Promise.resolve().then(r.bind(r,912)),Promise.resolve().then(r.bind(r,1481))},7960:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return o}});var t=r(7437),l=r(2265),n=r(2837),s=r(9988),i=r(7814);function o(){let e=(0,n._)(),{t:a}=(0,i.QT)(),[r,o]=(0,l.useState)([]),[d,c]=(0,l.useState)(null),[u,m]=(0,l.useState)(""),[x,b]=(0,l.useState)(!1),[p,h]=(0,l.useState)([]),[g,f]=(0,l.useState)(!1),[v,j]=(0,l.useState)(""),[y,N]=(0,l.useState)(""),[w,C]=(0,l.useState)([]),[k,S]=(0,l.useState)(new Set),[P,_]=(0,l.useState)(""),A=(0,l.useMemo)(()=>r.filter(e=>!u||e.name.toLowerCase().includes(u.toLowerCase())||e.prefix.toLowerCase().includes(u.toLowerCase())),[r,u]),E=async()=>{if(e){b(!0);try{let a=await s.h.getTags(e);o(a.tags||[]);try{let a=await s.h.getRoles(e),r=(a.roles||a||[]).map(e=>({id:e.id,name:e.name,manageable:e.manageable}));h(r)}catch(e){h([])}}finally{b(!1)}}};(0,l.useEffect)(()=>{E()},[e]);let O=async()=>{if(e&&d&&d.name&&d.prefix){b(!0);try{await s.h.upsertTag(e,d),c(null),await E()}finally{b(!1)}}},I=async r=>{if(e&&confirm(a("tags.remove.confirm")||"Remover tag?")){b(!0);try{await s.h.deleteTag(e,r),await E()}finally{b(!1)}}},R=async a=>{if(j(a),f(!0),S(new Set),N(""),e)try{let a=await s.h.getMembers(e,{limit:50});C(a.members||a||[])}catch(e){C([])}},T=async()=>{if(e)try{let a=await s.h.getMembers(e,{q:y,limit:50,refresh:!0});C(a.members||a||[])}catch(e){C([])}},q=e=>S(a=>{let r=new Set(a);return r.has(e)?r.delete(e):r.add(e),r}),M=async()=>{if(e&&v&&0!==k.size){b(!0);try{await s.h.applyTag(e,{tagId:v,userIds:Array.from(k),expireSeconds:"number"==typeof P?P:void 0}),f(!1),S(new Set)}finally{b(!1)}}};return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"card p-4 flex flex-wrap items-end gap-3",children:[(0,t.jsxs)("div",{className:"md:w-64",children:[(0,t.jsx)("label",{className:"text-xs text-neutral-400",children:a("tags.search")||"Pesquisar"}),(0,t.jsx)("input",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:u,onChange:e=>m(e.target.value),placeholder:a("tags.search.placeholder")||"Procurar por nome/prefixo"})]}),(0,t.jsx)("button",{onClick:()=>c({id:"",name:"",prefix:"",color:"",icon:"",roleIds:[]}),className:"mt-5 px-3 py-2 rounded bg-brand-600 hover:bg-brand-700 disabled:opacity-50",children:a("tags.new")||"Nova tag"}),(0,t.jsx)("button",{onClick:E,className:"mt-5 px-3 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 disabled:opacity-50",disabled:x,children:a("common.refresh")||"Atualizar"})]}),d&&(0,t.jsxs)("div",{className:"card p-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-neutral-400",children:a("tags.name")||"Nome"}),(0,t.jsx)("input",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:d.name,onChange:e=>c({...d,name:e.target.value}),placeholder:"Owner"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-neutral-400",children:a("tags.prefix")||"Prefixo"}),(0,t.jsx)("input",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:d.prefix,onChange:e=>c({...d,prefix:e.target.value}),placeholder:"Owner | "})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-neutral-400",children:a("tags.color")||"Cor"}),(0,t.jsx)("input",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:d.color||"",onChange:e=>c({...d,color:e.target.value}),placeholder:"#a855f7"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-neutral-400",children:a("tags.icon")||"\xcdcone"}),(0,t.jsx)("input",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:d.icon||"",onChange:e=>c({...d,icon:e.target.value}),placeholder:"⭐"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"quicktag-roles",className:"text-xs text-neutral-400",children:a("tags.roles")||a("tags.role")||"Cargos (opcional)"}),(0,t.jsx)("select",{id:"quicktag-roles",title:a("tags.roles")||"Cargos (opcional)",multiple:!0,className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1 h-28",value:Array.isArray(d.roleIds)?d.roleIds:[],onChange:e=>{let a=Array.from(e.target.selectedOptions).map(e=>e.value).filter(Boolean);c(e=>({...e,roleIds:a}))},children:p.map(e=>(0,t.jsxs)("option",{value:e.id,disabled:!1===e.manageable,children:["@".concat(e.name),!1===e.manageable?" (n\xe3o gerenci\xe1vel)":""]},e.id))})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:O,className:"mt-5 px-3 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 disabled:opacity-50",disabled:x,children:a("common.save")||"Guardar"}),(0,t.jsx)("button",{onClick:()=>c(null),className:"mt-5 px-3 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",children:a("common.cancel")||"Cancelar"})]})]}),(0,t.jsx)("div",{className:"card p-0 overflow-hidden",children:(0,t.jsxs)("div",{className:"divide-y divide-neutral-800",children:[x&&(0,t.jsx)("div",{className:"p-6 text-neutral-400",children:a("common.loading")||"A carregar…"}),A.map(e=>(0,t.jsxs)("div",{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-6 w-6 rounded bg-neutral-800 border border-neutral-700 flex items-center justify-center",title:e.icon||"",children:e.icon||"\uD83C\uDFF7️"}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"text-neutral-200 truncate",children:[e.name," ",(0,t.jsxs)("span",{className:"text-neutral-500",children:["(",e.prefix,")"]})]})}),(0,t.jsx)("button",{className:"px-2 py-1 text-xs rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",onClick:()=>c(e),title:"Editar",children:a("common.edit")||"Editar"}),(0,t.jsx)("button",{className:"px-2 py-1 text-xs rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",onClick:()=>R(e.id),title:"Aplicar",children:a("tags.apply")||"Aplicar"}),(0,t.jsx)("button",{className:"px-2 py-1 text-xs rounded bg-rose-600 hover:bg-rose-500",onClick:()=>I(e.id),title:"Remover",children:a("common.remove")||"Remover"})]},e.id))]})}),g&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",role:"dialog","aria-modal":!0,children:(0,t.jsxs)("div",{className:"bg-neutral-900 border border-neutral-700 rounded-xl w-full max-w-3xl p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-lg font-semibold",children:a("tags.apply.modalTitle")||"Aplicar tag"}),(0,t.jsx)("button",{onClick:()=>f(!1),className:"px-2 py-1 text-xs rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",children:a("common.close")||"Fechar"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"text-xs text-neutral-400",children:a("tags.members.search")||"Pesquisar membros"}),(0,t.jsx)("input",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:y,onChange:e=>N(e.target.value),placeholder:"nome ou id"})]}),(0,t.jsx)("button",{onClick:T,className:"mt-5 px-3 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",children:a("common.search")||"Pesquisar"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-neutral-400",children:a("tags.expireSeconds")||"Expira\xe7\xe3o (segundos, opcional)"}),(0,t.jsx)("input",{type:"number",className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:P,onChange:e=>_(e.target.value?parseInt(e.target.value,10):""),placeholder:"3600"})]})]}),(0,t.jsx)("div",{className:"h-64 overflow-auto border border-neutral-800 rounded",children:w.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-3 p-2 border-b border-neutral-800",children:[(0,t.jsx)("input",{type:"checkbox",checked:k.has(e.id),onChange:()=>q(e.id)}),(0,t.jsx)("span",{className:"flex-1 min-w-0 text-neutral-200 truncate",children:e.nick?"".concat(e.nick," (").concat(e.username,"#").concat(e.discriminator,")"):"".concat(e.username,"#").concat(e.discriminator)}),(0,t.jsx)("span",{className:"text-xs text-neutral-500",children:e.id})]},e.id))}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:M,className:"px-3 py-2 rounded bg-brand-600 hover:bg-brand-700 disabled:opacity-50",disabled:0===k.size,children:a("tags.applyNow")||"Aplicar agora"}),(0,t.jsx)("button",{onClick:()=>f(!1),className:"px-3 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",children:a("common.cancel")||"Cancelar"})]})]})})]})}},912:function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let t=r(5592);function l(e){let{reason:a,children:r}=e;if("undefined"==typeof window)throw new t.BailoutToCSRError(a);return r}},1481:function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"PreloadCss",{enumerable:!0,get:function(){return n}});let t=r(7437),l=r(8512);function n(e){let{moduleIds:a}=e;if("undefined"!=typeof window)return null;let r=(0,l.getExpectedRequestStore)("next/dynamic css"),n=[];if(r.reactLoadableManifest&&a){let e=r.reactLoadableManifest;for(let r of a){if(!e[r])continue;let a=e[r].files.filter(e=>e.endsWith(".css"));n.push(...a)}}return 0===n.length?null:(0,t.jsx)(t.Fragment,{children:n.map(e=>(0,t.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[814,482,971,23,744],function(){return e(e.s=2176)}),_N_E=e.O()}]);