(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{2728:function(e,a,l){Promise.resolve().then(l.bind(l,3842))},3842:function(e,a,l){"use strict";l.d(a,{default:function(){return i}});var s=l(7437),n=l(2265),t=l(2837),c=l(9988);function i(){let[e,a]=(0,n.useState)(null),[l,i]=(0,n.useState)({}),[o,d]=(0,n.useState)(""),[h,u]=(0,n.useState)(!1),[g,x]=(0,n.useState)(null),[f,m]=(0,n.useState)(!1);(0,n.useEffect)(()=>{a((0,t._)())},[]),(0,n.useEffect)(()=>{(async()=>{if(e){u(!0),x(null),m(!1);try{let a=await c.h.getTicketsConfig(e),l=(null==a?void 0:a.config)||a||{};i(l),d(JSON.stringify(l,null,2))}catch(e){x((null==e?void 0:e.message)||"Erro ao carregar config")}finally{u(!1)}}})()},[e]);let v=async()=>{if(e){u(!0),x(null),m(!1);try{let a=l;try{a=JSON.parse(o)}catch(e){}let s=await c.h.saveTicketsConfig(e,a),n=(null==s?void 0:s.config)||a;i(n),d(JSON.stringify(n,null,2)),m(!0)}catch(e){x((null==e?void 0:e.message)||"Erro ao salvar config")}finally{u(!1)}}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Configura\xe7\xe3o de Tickets"}),(0,s.jsx)("button",{onClick:()=>e&&a(e),className:"btn btn-secondary",title:"Recarregar",children:"Recarregar"})]}),g&&(0,s.jsx)("div",{className:"text-red-400",children:g}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("div",{className:"card-header",children:"Campos comuns"}),(0,s.jsxs)("div",{className:"card-body grid grid-cols-1 gap-3",children:[(0,s.jsx)(r,{label:"Canal do painel",value:l.panelChannelId||"",onChange:e=>i(a=>({...a,panelChannelId:e})),placeholder:"ID do canal"}),(0,s.jsx)(r,{label:"Cargo da equipe",value:l.staffRoleId||"",onChange:e=>i(a=>({...a,staffRoleId:e})),placeholder:"ID do cargo"}),(0,s.jsx)(r,{label:"Categoria de arquivo",value:l.archiveCategoryId||"",onChange:e=>i(a=>({...a,archiveCategoryId:e})),placeholder:"ID da categoria"}),(0,s.jsx)(r,{label:"Canal de logs",value:l.logChannelId||"",onChange:e=>i(a=>({...a,logChannelId:e})),placeholder:"ID do canal de logs"}),(0,s.jsx)(r,{label:"Webhook de transcri\xe7\xe3o",value:l.transcriptWebhook||"",onChange:e=>i(a=>({...a,transcriptWebhook:e})),placeholder:"URL do webhook"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("label",{className:"text-sm opacity-80",children:"Ativar tickets"}),(0,s.jsx)("input",{type:"checkbox",checked:!!l.enabled,onChange:e=>i(a=>({...a,enabled:e.target.checked})),title:"Ativar"})]}),(0,s.jsx)("button",{className:"btn btn-primary w-fit",onClick:v,disabled:h,children:"Salvar"}),f&&(0,s.jsx)("span",{className:"text-green-400",children:"Salvo!"})]})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("div",{className:"card-header",children:"Editor JSON (avan\xe7ado)"}),(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("textarea",{className:"input min-h-[280px] font-mono",value:o,onChange:e=>d(e.target.value),title:"Editor JSON"}),(0,s.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,s.jsx)("button",{className:"btn btn-secondary",onClick:()=>d(JSON.stringify(l,null,2)),children:"Reverter"}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:v,disabled:h,children:"Salvar JSON"})]})]})]})]})]})}function r(e){let{label:a,value:l,onChange:n,placeholder:t}=e;return(0,s.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-sm opacity-80",children:a}),(0,s.jsx)("input",{className:"input",value:l,onChange:e=>n(e.target.value),placeholder:t,title:a})]})}}},function(e){e.O(0,[482,971,23,744],function(){return e(e.s=2728)}),_N_E=e.O()}]);