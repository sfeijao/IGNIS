(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{2728:function(e,a,l){Promise.resolve().then(l.bind(l,3842))},3842:function(e,a,l){"use strict";l.d(a,{default:function(){return r}});var s=l(7437),t=l(2265),n=l(2837),c=l(9988),i=l(7814);function r(){let[e,a]=(0,t.useState)(null),[l,r]=(0,t.useState)({}),[o,h]=(0,t.useState)(""),[u,x]=(0,t.useState)(!1),[f,g]=(0,t.useState)(null),[m,b]=(0,t.useState)(!1),{t:p}=(0,i.QT)();(0,t.useEffect)(()=>{a((0,n._)())},[]),(0,t.useEffect)(()=>{(async()=>{if(e){x(!0),g(null),b(!1);try{let a=await c.h.getTicketsConfig(e),l=(null==a?void 0:a.config)||a||{};r(l),h(JSON.stringify(l,null,2))}catch(e){g((null==e?void 0:e.message)||p("common.saveFailed"))}finally{x(!1)}}})()},[e]);let v=async()=>{if(e){x(!0),g(null),b(!1);try{let a=l;try{a=JSON.parse(o)}catch(e){}let s=await c.h.saveTicketsConfig(e,a),t=(null==s?void 0:s.config)||a;r(t),h(JSON.stringify(t,null,2)),b(!0)}catch(e){g((null==e?void 0:e.message)||"Erro ao salvar config")}finally{x(!1)}}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:p("tickets.config.title")}),(0,s.jsx)("button",{onClick:()=>e&&a(e),className:"btn btn-secondary",title:p("tickets.reload"),children:p("tickets.reload")})]}),f&&(0,s.jsx)("div",{className:"text-red-400",children:f}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("div",{className:"card-header",children:p("tickets.fields.common")}),(0,s.jsxs)("div",{className:"card-body grid grid-cols-1 gap-3",children:[(0,s.jsx)(d,{label:p("tickets.panelChannelId"),value:l.panelChannelId||"",onChange:e=>r(a=>({...a,panelChannelId:e})),placeholder:"ID"}),(0,s.jsx)(d,{label:p("tickets.staffRoleId"),value:l.staffRoleId||"",onChange:e=>r(a=>({...a,staffRoleId:e})),placeholder:"ID"}),(0,s.jsx)(d,{label:p("tickets.archiveCategoryId"),value:l.archiveCategoryId||"",onChange:e=>r(a=>({...a,archiveCategoryId:e})),placeholder:"ID"}),(0,s.jsx)(d,{label:p("tickets.logChannelId"),value:l.logChannelId||"",onChange:e=>r(a=>({...a,logChannelId:e})),placeholder:"ID"}),(0,s.jsx)(d,{label:p("tickets.transcriptWebhook"),value:l.transcriptWebhook||"",onChange:e=>r(a=>({...a,transcriptWebhook:e})),placeholder:"URL"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("label",{className:"text-sm opacity-80",children:p("tickets.enabled")}),(0,s.jsx)("input",{type:"checkbox",checked:!!l.enabled,onChange:e=>r(a=>({...a,enabled:e.target.checked})),title:p("tickets.enabled")})]}),(0,s.jsx)("button",{className:"btn btn-primary w-fit",onClick:v,disabled:u,children:p("common.save")}),m&&(0,s.jsx)("span",{className:"text-green-400",children:p("tickets.saved")})]})]}),(0,s.jsxs)("section",{className:"card",children:[(0,s.jsx)("div",{className:"card-header",children:p("tickets.json.editor")}),(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("textarea",{className:"input min-h-[280px] font-mono",value:o,onChange:e=>h(e.target.value),title:"Editor JSON"}),(0,s.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,s.jsx)("button",{className:"btn btn-secondary",onClick:()=>h(JSON.stringify(l,null,2)),children:p("tickets.json.revert")}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:v,disabled:u,children:p("tickets.json.save")})]})]})]})]})]})}function d(e){let{label:a,value:l,onChange:t,placeholder:n}=e;return(0,s.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-sm opacity-80",children:a}),(0,s.jsx)("input",{className:"input",value:l,onChange:e=>t(e.target.value),placeholder:n,title:a})]})}}},function(e){e.O(0,[482,814,971,23,744],function(){return e(e.s=2728)}),_N_E=e.O()}]);