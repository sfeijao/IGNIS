(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[397],{6739:function(e,s,t){Promise.resolve().then(t.bind(t,7595))},8183:function(e,s,t){"use strict";t.d(s,{ToasterProvider:function(){return c},p:function(){return l}});var r=t(7437),a=t(2265);let i=(0,a.createContext)(null);function l(){let e=(0,a.useContext)(i);if(!e)throw Error("useToast must be used within <ToasterProvider />");return e}function c(e){let{children:s}=e,[t,l]=(0,a.useState)([]),c=(0,a.useRef)(0),n=(0,a.useCallback)(e=>{l(s=>s.filter(s=>s.id!==e))},[]),o=(0,a.useCallback)(e=>{let s="".concat(Date.now(),"_").concat(c.current++),t={id:s,...e};l(e=>[...e,t]),window.setTimeout(()=>n(s),4500)},[n]),d=(0,a.useMemo)(()=>({toast:o}),[o]);return(0,r.jsxs)(i.Provider,{value:d,children:[s,(0,r.jsx)("div",{className:"fixed z-50 right-4 bottom-4 flex flex-col gap-2 w-[min(92vw,380px)]",role:"status","aria-live":"polite",children:t.map(e=>(0,r.jsxs)("div",{className:"rounded-xl border p-3 shadow-lg backdrop-blur card ".concat("success"===e.type?"border-emerald-700/60":"error"===e.type?"border-rose-700/60":"border-neutral-700/60"),children:[e.title&&(0,r.jsx)("div",{className:"text-sm font-semibold mb-0.5",children:e.title}),e.description&&(0,r.jsx)("div",{className:"text-xs text-neutral-300",children:e.description})]},e.id))})]})}},7595:function(e,s,t){"use strict";t.d(s,{default:function(){return n}});var r=t(7437),a=t(2265),i=t(2837),l=t(9988),c=t(8183);function n(){let[e,s]=(0,a.useState)(null),[t,n]=(0,a.useState)(null),[o,d]=(0,a.useState)([]),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null),{toast:p}=(0,c.p)();(0,a.useEffect)(()=>{s((0,i._)())},[]);let f=async e=>{m(!0),h(null);try{let[s,t]=await Promise.all([l.h.getVerificationMetrics(e),l.h.getVerificationLogs(e,{limit:100})]);n((null==s?void 0:s.metrics)||s),d((null==t?void 0:t.logs)||t||[])}catch(e){h((null==e?void 0:e.message)||"Erro ao carregar m\xe9tricas")}finally{m(!1)}};(0,a.useEffect)(()=>{e&&f(e)},[e]);let g=async()=>{if(e){m(!0);try{await l.h.purgeVerificationLogs(e),p({type:"success",title:"Logs limpos"}),await f(e)}catch(e){p({type:"error",title:"Falha ao limpar",description:null==e?void 0:e.message})}finally{m(!1)}}};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Verifica\xe7\xe3o: M\xe9tricas e Logs"}),(0,r.jsx)("button",{className:"btn btn-secondary",onClick:()=>e&&f(e),title:"Recarregar",children:"Recarregar"}),(0,r.jsx)("button",{className:"btn btn-danger",onClick:g,title:"Limpar logs",children:"Limpar logs"})]}),x&&(0,r.jsx)("div",{className:"text-red-400",children:x}),(0,r.jsxs)("section",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:"M\xe9tricas"}),(0,r.jsx)("div",{className:"card-body grid grid-cols-2 md:grid-cols-4 gap-3",children:t?Object.entries(t).map(e=>{let[s,t]=e;return(0,r.jsxs)("div",{className:"p-3 rounded-lg bg-neutral-800/50 border border-neutral-800",children:[(0,r.jsx)("div",{className:"text-xs opacity-70",children:s}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:String(t)})]},s)}):(0,r.jsx)("div",{className:"opacity-70",children:"Sem dados"})})]}),(0,r.jsxs)("section",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:"Logs recentes"}),(0,r.jsxs)("div",{className:"card-body text-xs max-h-[360px] overflow-auto",children:[0===o.length&&(0,r.jsx)("div",{className:"opacity-70",children:"Sem logs"}),o.map((e,s)=>(0,r.jsxs)("div",{className:"border-b border-neutral-900/60 py-1",children:[(0,r.jsxs)("span",{className:"opacity-60",children:[new Date(e.timestamp||Date.now()).toLocaleString()," â€¢ "]}),(0,r.jsx)("span",{children:e.message||JSON.stringify(e)})]},s))]})]})]})}}},function(e){e.O(0,[482,971,23,744],function(){return e(e.s=6739)}),_N_E=e.O()}]);