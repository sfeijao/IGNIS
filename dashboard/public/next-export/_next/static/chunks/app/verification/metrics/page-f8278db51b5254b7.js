(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[397],{6739:function(e,s,t){Promise.resolve().then(t.bind(t,7595))},8183:function(e,s,t){"use strict";t.d(s,{ToasterProvider:function(){return n},p:function(){return l}});var i=t(7437),r=t(2265);let a=(0,r.createContext)(null);function l(){let e=(0,r.useContext)(a);if(!e)throw Error("useToast must be used within <ToasterProvider />");return e}function n(e){let{children:s}=e,[t,l]=(0,r.useState)([]),n=(0,r.useRef)(0),c=(0,r.useCallback)(e=>{l(s=>s.filter(s=>s.id!==e))},[]),o=(0,r.useCallback)(e=>{let s="".concat(Date.now(),"_").concat(n.current++),t={id:s,...e};l(e=>[...e,t]),window.setTimeout(()=>c(s),4500)},[c]),d=(0,r.useMemo)(()=>({toast:o}),[o]);return(0,i.jsxs)(a.Provider,{value:d,children:[s,(0,i.jsx)("div",{className:"fixed z-50 right-4 bottom-4 flex flex-col gap-2 w-[min(92vw,380px)]",role:"status","aria-live":"polite",children:t.map(e=>(0,i.jsxs)("div",{className:"rounded-xl border p-3 shadow-lg backdrop-blur card ".concat("success"===e.type?"border-emerald-700/60":"error"===e.type?"border-rose-700/60":"border-neutral-700/60"),children:[e.title&&(0,i.jsx)("div",{className:"text-sm font-semibold mb-0.5",children:e.title}),e.description&&(0,i.jsx)("div",{className:"text-xs text-neutral-300",children:e.description})]},e.id))})]})}},7595:function(e,s,t){"use strict";t.d(s,{default:function(){return o}});var i=t(7437),r=t(2265),a=t(2837),l=t(9988),n=t(8183),c=t(7814);function o(){let[e,s]=(0,r.useState)(null),[t,o]=(0,r.useState)(null),[d,u]=(0,r.useState)([]),[m,f]=(0,r.useState)(!1),[v,x]=(0,r.useState)(null),{toast:h}=(0,n.p)(),{t:p}=(0,c.QT)();(0,r.useEffect)(()=>{s((0,a._)())},[]);let g=async e=>{f(!0),x(null);try{let[s,t]=await Promise.all([l.h.getVerificationMetrics(e),l.h.getVerificationLogs(e,{limit:100})]);o((null==s?void 0:s.metrics)||s),u((null==t?void 0:t.logs)||t||[])}catch(e){x((null==e?void 0:e.message)||p("verification.metrics.error"))}finally{f(!1)}};(0,r.useEffect)(()=>{e&&g(e)},[e]);let b=async()=>{if(e){f(!0);try{await l.h.purgeVerificationLogs(e),h({type:"success",title:p("verification.metrics.clearLogs")}),await g(e)}catch(e){h({type:"error",title:p("verification.metrics.error"),description:null==e?void 0:e.message})}finally{f(!1)}}},[j,N]=(0,r.useState)(""),y=(0,r.useMemo)(()=>{let e=j.trim().toLowerCase();return e?d.filter(s=>(s.message?String(s.message).toLowerCase():JSON.stringify(s).toLowerCase()).includes(e)):d},[d,j]),w=(0,r.useMemo)(()=>{if(!t)return null;let e=t.successCount||t.verified||t.verificationsPassed||0,s=e+(t.failCount||t.failed||t.verificationsFailed||0);return s?e/s:null},[t]),C=(0,r.useMemo)(()=>t?(t.successCount||t.verified||t.verificationsPassed||0)+(t.failCount||t.failed||t.verificationsFailed||0):0,[t]);return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold",children:p("verification.metrics.title")}),(0,i.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>e&&g(e),title:p("verification.metrics.reload"),children:p("verification.metrics.reload")}),(0,i.jsx)("button",{type:"button",className:"btn btn-danger",onClick:b,title:p("verification.metrics.clearLogs"),children:p("verification.metrics.clearLogs")})]}),v&&(0,i.jsx)("div",{className:"text-red-400",children:v}),(0,i.jsxs)("section",{className:"card",children:[(0,i.jsx)("div",{className:"card-header",children:p("verification.metrics.section")}),(0,i.jsxs)("div",{className:"card-body grid grid-cols-2 md:grid-cols-4 gap-3",children:[m&&(0,i.jsx)(i.Fragment,{children:Array.from({length:4}).map((e,s)=>(0,i.jsxs)("div",{className:"p-3 rounded-lg bg-neutral-800/30 border border-neutral-800 animate-pulse",children:[(0,i.jsx)("div",{className:"h-3 w-20 bg-neutral-700 rounded mb-2"}),(0,i.jsx)("div",{className:"h-6 w-14 bg-neutral-700/70 rounded"})]},s))}),!m&&t?Object.entries(t).map(e=>{let[s,t]=e;return(0,i.jsxs)("div",{className:"p-3 rounded-lg bg-neutral-800/50 border border-neutral-800",children:[(0,i.jsx)("div",{className:"text-xs opacity-70",children:s}),(0,i.jsx)("div",{className:"text-xl font-semibold",children:String(t)})]},s)}):!m&&(0,i.jsx)("div",{className:"opacity-70",children:p("verification.metrics.noData")})]}),null!==w&&(0,i.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,i.jsxs)("div",{className:"text-sm font-medium",children:[p("verification.metrics.successRate")," (",Math.round(100*w),"%)"]}),(0,i.jsx)("div",{className:"h-3 w-full bg-neutral-800 rounded overflow-hidden",children:(0,i.jsx)("div",{className:"h-full bg-green-500/70",style:{width:"".concat(100*w,"%")}})}),(0,i.jsxs)("div",{className:"text-xs opacity-70",children:[p("verification.metrics.totalAttempts"),": ",C]})]})]}),(0,i.jsxs)("section",{className:"card",children:[(0,i.jsxs)("div",{className:"card-header flex items-center justify-between gap-2",children:[(0,i.jsx)("span",{children:p("verification.metrics.recentLogs")}),(0,i.jsx)("input",{className:"input w-48",placeholder:p("common.search"),"aria-label":p("common.search"),value:j,onChange:e=>N(e.target.value)})]}),(0,i.jsxs)("div",{className:"card-body text-xs max-h-[360px] overflow-auto",role:"status","aria-live":"polite","aria-busy":m,children:[m&&(0,i.jsx)("div",{className:"opacity-70",children:p("common.loading")}),!m&&0===y.length&&(0,i.jsx)("div",{className:"opacity-70",children:p("verification.metrics.noLogs")}),!m&&y.map((e,s)=>(0,i.jsxs)("div",{className:"border-b border-neutral-900/60 py-1",children:[(0,i.jsxs)("span",{className:"opacity-60",children:[new Date(e.timestamp||Date.now()).toLocaleString()," â€¢ "]}),(0,i.jsx)("span",{children:e.message||JSON.stringify(e)})]},s))]})]})]})}}},function(e){e.O(0,[814,482,971,23,744],function(){return e(e.s=6739)}),_N_E=e.O()}]);