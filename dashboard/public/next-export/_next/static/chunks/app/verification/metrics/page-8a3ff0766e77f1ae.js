(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[397],{6739:function(e,t,s){Promise.resolve().then(s.bind(s,7595))},8183:function(e,t,s){"use strict";s.d(t,{ToasterProvider:function(){return c},p:function(){return n}});var i=s(7437),r=s(2265);let a=(0,r.createContext)(null);function n(){let e=(0,r.useContext)(a);if(!e)throw Error("useToast must be used within <ToasterProvider />");return e}function c(e){let{children:t}=e,[s,n]=(0,r.useState)([]),c=(0,r.useRef)(0),l=(0,r.useCallback)(e=>{n(t=>t.filter(t=>t.id!==e))},[]),o=(0,r.useCallback)(e=>{let t="".concat(Date.now(),"_").concat(c.current++),s={id:t,...e};n(e=>[...e,s]),window.setTimeout(()=>l(t),4500)},[l]),d=(0,r.useMemo)(()=>({toast:o}),[o]);return(0,i.jsxs)(a.Provider,{value:d,children:[t,(0,i.jsx)("div",{className:"fixed z-50 right-4 bottom-4 flex flex-col gap-2 w-[min(92vw,380px)]",role:"status","aria-live":"polite",children:s.map(e=>(0,i.jsxs)("div",{className:"rounded-xl border p-3 shadow-lg backdrop-blur card ".concat("success"===e.type?"border-emerald-700/60":"error"===e.type?"border-rose-700/60":"border-neutral-700/60"),children:[e.title&&(0,i.jsx)("div",{className:"text-sm font-semibold mb-0.5",children:e.title}),e.description&&(0,i.jsx)("div",{className:"text-xs text-neutral-300",children:e.description})]},e.id))})]})}},7595:function(e,t,s){"use strict";s.d(t,{default:function(){return o}});var i=s(7437),r=s(2265),a=s(2837),n=s(9988),c=s(8183),l=s(7814);function o(){let[e,t]=(0,r.useState)(null),[s,o]=(0,r.useState)(null),[d,u]=(0,r.useState)([]),[m,x]=(0,r.useState)(!1),[f,h]=(0,r.useState)(null),{toast:v}=(0,c.p)(),{t:p}=(0,l.QT)();(0,r.useEffect)(()=>{t((0,a._)())},[]);let g=async e=>{x(!0),h(null);try{let[t,s]=await Promise.all([n.h.getVerificationMetrics(e),n.h.getVerificationLogs(e,{limit:100})]);o((null==t?void 0:t.metrics)||t),u((null==s?void 0:s.logs)||s||[])}catch(e){h((null==e?void 0:e.message)||p("verification.metrics.error"))}finally{x(!1)}};(0,r.useEffect)(()=>{e&&g(e)},[e]);let b=async()=>{if(e){x(!0);try{await n.h.purgeVerificationLogs(e),v({type:"success",title:p("verification.metrics.clearLogs")}),await g(e)}catch(e){v({type:"error",title:p("verification.metrics.error"),description:null==e?void 0:e.message})}finally{x(!1)}}},[j,N]=(0,r.useState)(""),y=(0,r.useMemo)(()=>{let e=j.trim().toLowerCase();return e?d.filter(t=>(t.message?String(t.message).toLowerCase():JSON.stringify(t).toLowerCase()).includes(e)):d},[d,j]);return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold",children:p("verification.metrics.title")}),(0,i.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>e&&g(e),title:p("verification.metrics.reload"),children:p("verification.metrics.reload")}),(0,i.jsx)("button",{type:"button",className:"btn btn-danger",onClick:b,title:p("verification.metrics.clearLogs"),children:p("verification.metrics.clearLogs")})]}),f&&(0,i.jsx)("div",{className:"text-red-400",children:f}),(0,i.jsxs)("section",{className:"card",children:[(0,i.jsx)("div",{className:"card-header",children:p("verification.metrics.section")}),(0,i.jsxs)("div",{className:"card-body grid grid-cols-2 md:grid-cols-4 gap-3",children:[m&&(0,i.jsx)(i.Fragment,{children:Array.from({length:4}).map((e,t)=>(0,i.jsxs)("div",{className:"p-3 rounded-lg bg-neutral-800/30 border border-neutral-800 animate-pulse",children:[(0,i.jsx)("div",{className:"h-3 w-20 bg-neutral-700 rounded mb-2"}),(0,i.jsx)("div",{className:"h-6 w-14 bg-neutral-700/70 rounded"})]},t))}),!m&&s?Object.entries(s).map(e=>{let[t,s]=e;return(0,i.jsxs)("div",{className:"p-3 rounded-lg bg-neutral-800/50 border border-neutral-800",children:[(0,i.jsx)("div",{className:"text-xs opacity-70",children:t}),(0,i.jsx)("div",{className:"text-xl font-semibold",children:String(s)})]},t)}):!m&&(0,i.jsx)("div",{className:"opacity-70",children:p("verification.metrics.noData")})]})]}),(0,i.jsxs)("section",{className:"card",children:[(0,i.jsxs)("div",{className:"card-header flex items-center justify-between gap-2",children:[(0,i.jsx)("span",{children:p("verification.metrics.recentLogs")}),(0,i.jsx)("input",{className:"input w-48",placeholder:p("common.search"),value:j,onChange:e=>N(e.target.value)})]}),(0,i.jsxs)("div",{className:"card-body text-xs max-h-[360px] overflow-auto",children:[m&&(0,i.jsx)("div",{className:"opacity-70",children:p("common.loading")}),!m&&0===y.length&&(0,i.jsx)("div",{className:"opacity-70",children:p("verification.metrics.noLogs")}),!m&&y.map((e,t)=>(0,i.jsxs)("div",{className:"border-b border-neutral-900/60 py-1",children:[(0,i.jsxs)("span",{className:"opacity-60",children:[new Date(e.timestamp||Date.now()).toLocaleString()," â€¢ "]}),(0,i.jsx)("span",{children:e.message||JSON.stringify(e)})]},t))]})]})]})}}},function(e){e.O(0,[814,482,971,23,744],function(){return e(e.s=6739)}),_N_E=e.O()}]);