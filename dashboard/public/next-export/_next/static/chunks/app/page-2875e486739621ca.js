(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6758:function(e,t,a){Promise.resolve().then(a.bind(a,5631))},5631:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var l=a(7437),s=a(7138),n=a(2265),i=a(2695);function r(e){let{label:t,value:a,dotColor:s,subtle:n}=e;return(0,l.jsxs)("div",{className:"card card-gradient p-5 relative",children:[n&&(0,l.jsx)("span",{className:"absolute top-2 right-2 text-[10px] px-2 py-0.5 rounded-full bg-neutral-800 border border-neutral-700 text-neutral-300",children:n}),(0,l.jsxs)("div",{className:"badge mb-2",children:[(0,l.jsx)("span",{className:"dot",style:{backgroundColor:s}}),t]}),(0,l.jsx)("div",{className:"text-2xl font-semibold",children:a})]})}var o=a(9988),d=a(2837),c=a(7814);function u(){let{t:e}=(0,c.QT)(),[t,a]=(0,n.useState)([{label:"",value:"—",color:"#10b981"},{label:"",value:"—",color:"#f59e0b"},{label:"",value:"—",color:"#ef4444"},{label:"",value:"—",color:"#f97316"},{label:"",value:"—",color:"#6366f1"},{label:"",value:"—",color:"#22d3ee"}]),[s,u]=(0,n.useState)("—"),[v,m]=(0,n.useState)(!1),[h,x]=(0,n.useState)("—"),[p,f]=(0,n.useState)(""),[g,b]=(0,n.useState)(!1),j=(0,n.useRef)(null),[N,k]=(0,n.useState)(1),[y,w]=(0,n.useState)("—"),S=e=>e?e.toLocaleString():"—",A=e=>{var t,a,l,s;for(let n of[null==e?void 0:e.lastActivity,null==e?void 0:e.lastEventAt,null==e?void 0:e.lastLogAt,null==e?void 0:null===(t=e.latest)||void 0===t?void 0:t.timestamp,null==e?void 0:null===(a=e.latest)||void 0===a?void 0:a.at,Array.isArray(null==e?void 0:e.recent)?null===(l=e.recent[0])||void 0===l?void 0:l.timestamp:null,null==e?void 0:null===(s=e.updates)||void 0===s?void 0:s.last].filter(Boolean)){let e=new Date(n);if(!isNaN(e.getTime()))return e}return null},T=e=>{var t,a,l,s,n,i,r;for(let o of[null==e?void 0:null===(t=e.tickets)||void 0===t?void 0:t.lastUpdated,null==e?void 0:null===(a=e.tickets)||void 0===a?void 0:a.last_activity,null==e?void 0:null===(s=e.tickets)||void 0===s?void 0:null===(l=s.latest)||void 0===l?void 0:l.timestamp,null==e?void 0:e.lastTicketAt,null==e?void 0:null===(n=e.latestTicket)||void 0===n?void 0:n.timestamp,Array.isArray(null==e?void 0:null===(i=e.tickets)||void 0===i?void 0:i.recent)?null===(r=e.tickets.recent[0])||void 0===r?void 0:r.timestamp:null].filter(Boolean)){let e=new Date(o);if(!isNaN(e.getTime()))return e}return null},C=async()=>{let t=(0,d._)();if(t){b(!0);try{var l,s,n,i,r,c,v,h,p,g,j,N,k,y,C,E,M,_,F,L;let d=await o.h.getLogStats(t);if(!d)return;let b=[{label:e("dash.activeModerators"),value:String(null!==(j=null===(l=d.totals)||void 0===l?void 0:l.activeModerators)&&void 0!==j?j:"—"),color:"#10b981"},{label:e("dash.warnings"),value:String(null!==(N=null===(s=d.totals)||void 0===s?void 0:s.warnings)&&void 0!==N?N:"—"),color:"#f59e0b"},{label:e("dash.bans"),value:String(null!==(k=null===(n=d.totals)||void 0===n?void 0:n.bans)&&void 0!==k?k:"—"),color:"#ef4444"},{label:e("dash.kicks"),value:String(null!==(y=null===(i=d.totals)||void 0===i?void 0:i.kicks)&&void 0!==y?y:"—"),color:"#f97316"},{label:e("dash.tickets"),value:String(null!==(C=null===(r=d.totals)||void 0===r?void 0:r.tickets)&&void 0!==C?C:"—"),color:"#6366f1"},{label:e("dash.modLogs"),value:String(null!==(E=null===(c=d.totals)||void 0===c?void 0:c.logs)&&void 0!==E?E:"—"),color:"#22d3ee"}];a(b);let D=d.updatedAt?new Date(d.updatedAt):new Date;u(D.toLocaleString()),m(Date.now()-D.getTime()<9e4);let I=null!==(M=null===(v=d.totals)||void 0===v?void 0:v.warnings)&&void 0!==M?M:0,q=null!==(_=null===(h=d.totals)||void 0===h?void 0:h.bans)&&void 0!==_?_:0,B=null!==(F=null===(p=d.totals)||void 0===p?void 0:p.kicks)&&void 0!==F?F:0,R=null!==(L=null===(g=d.totals)||void 0===g?void 0:g.tickets)&&void 0!==L?L:0;f("".concat(e("dash.quickSummary"),": ").concat(I," ").concat(e("dash.warnings"),", ").concat(q," ").concat(e("dash.bans"),", ").concat(B," ").concat(e("dash.kicks"),", ").concat(R," ").concat(e("dash.tickets"),"."));let U=A(d);x(S(U));let J=T(d);w(S(J))}catch(e){}finally{b(!1)}}};return(0,n.useEffect)(()=>{try{let e=localStorage.getItem("dash-refresh-mins"),t=new URLSearchParams(window.location.search),a=N,l=null==t?void 0:t.get("refresh");l?a=(e=>{let t=e.trim().toLowerCase();if("off"===t||"0"===t)return 0;if(t.endsWith("s"))return Math.max(0,parseFloat(t.slice(0,-1))/60);if(t.endsWith("m"))return Math.max(0,parseFloat(t.slice(0,-1)));let a=parseFloat(t);return isNaN(a)?1:Math.max(0,a)})(l):e&&(a=Math.max(0,parseFloat(e))),k(a)}catch(e){}C()},[]),(0,n.useEffect)(()=>{j.current&&(clearInterval(j.current),j.current=null),N>0&&(j.current=setInterval(C,6e4*N));try{localStorage.setItem("dash-refresh-mins",String(N))}catch(e){}return()=>{j.current&&clearInterval(j.current)}},[N]),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("div",{className:"card p-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-neutral-200",children:e("dash.statusSummary")}),(0,l.jsx)("p",{className:"text-xs text-neutral-400 mt-1",children:p}),(0,l.jsxs)("p",{className:"text-xs text-neutral-400 mt-1",children:[e("dash.lastActivity"),": ",h]}),(0,l.jsxs)("p",{className:"text-xs text-neutral-400 mt-1",children:[e("dash.lastTicket"),": ",y]})]}),(0,l.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,l.jsxs)("div",{className:"text-xs text-neutral-400 flex items-center gap-2",children:[g&&(0,l.jsx)("span",{className:"inline-block h-3 w-3 rounded-full border-2 border-neutral-500 border-t-transparent animate-spin","aria-label":e("dash.updating")}),(0,l.jsxs)("span",{children:[g?"".concat(e("dash.updating"),"…"):e("dash.updated"),": ",s]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("label",{className:"text-xs text-neutral-400 hidden sm:flex items-center gap-1",title:e("dash.refreshFrequency"),children:[(0,l.jsx)(i.J,{name:"clock",className:"h-4 w-4"}),(0,l.jsxs)("select",{className:"text-xs rounded-md bg-neutral-900 border border-neutral-700 px-2 py-1",value:N,onChange:e=>k(parseFloat(e.target.value)),"aria-label":e("dash.refreshFrequency"),children:[(0,l.jsx)("option",{value:0,children:e("dash.off")}),(0,l.jsx)("option",{value:.1667,children:"10s"}),(0,l.jsx)("option",{value:.5,children:"30s"}),(0,l.jsx)("option",{value:1,children:"1m"}),(0,l.jsx)("option",{value:2,children:"2m"}),(0,l.jsx)("option",{value:5,children:"5m"})]})]}),(0,l.jsxs)("button",{type:"button",className:"inline-flex items-center gap-1 px-2.5 py-1.5 rounded-md border border-neutral-700 bg-neutral-800 hover:bg-neutral-700 text-xs",onClick:()=>C(),disabled:g,title:e("dash.updateNow"),children:[(0,l.jsx)(i.J,{name:"refresh",className:"h-4 w-4"}),e("dash.updateNow")]})]})]})]})}),(0,l.jsx)("div",{className:"grid grid-cols-3 gap-3",children:t.map(t=>(0,l.jsx)(r,{label:t.label,value:t.value,dotColor:t.color,subtle:v?e("dash.recent"):void 0},t.label))})]})}var v=a(996);function m(){let{t:e}=(0,c.QT)();return(0,l.jsxs)("main",{className:"space-y-8",children:[(0,l.jsxs)("section",{className:"grid md:grid-cols-2 gap-6 items-center",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h1",{className:"text-3xl md:text-4xl font-extrabold tracking-tight",children:"Bem-vindo ao novo Centro de Modera\xe7\xe3o"}),(0,l.jsx)("p",{className:"text-neutral-300",children:"Uma experi\xeancia moderna, r\xe1pida e responsiva — inspirada no MEE6 — mantendo a compatibilidade com seus sistemas atuais."}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)(s.default,{href:"/plugins",className:"inline-flex items-center rounded-xl px-4 py-2 bg-brand-600 hover:bg-brand-700 transition text-white font-medium",children:"Explorar plugins"}),(0,l.jsx)(s.default,{href:"/tickets",className:"inline-flex items-center rounded-xl px-4 py-2 bg-neutral-800 hover:bg-neutral-700 transition border border-neutral-700",children:e("nav.tickets")}),(0,l.jsx)("a",{href:"/moderation-react.html",className:"inline-flex items-center rounded-xl px-4 py-2 bg-neutral-800 hover:bg-neutral-700 transition border border-neutral-700",children:e("nav.moderation.center")})]})]}),(0,l.jsx)(u,{})]}),(0,l.jsxs)("section",{className:"space-y-4",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:e("nav.plugins")}),(0,l.jsx)("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-5",children:[{name:"Modera\xe7\xe3o",desc:"Automod, logs, a\xe7\xf5es e auditoria.",icon:"shield",tip:"Configure regras, mod-logs e automod.",href:"/moderation"},{name:"Tickets",desc:"Gest\xe3o de tickets e pain\xe9is.",icon:"tickets",tip:"Crie pain\xe9is e gerencie filas.",href:"/tickets"},{name:"Tags",desc:"Respostas r\xe1pidas e pain\xe9is.",icon:"tag",tip:"Defina atalhos e cole\xe7\xf5es.",href:"/tags"}].map(e=>(0,l.jsx)(v.Z,{name:e.name,desc:e.desc,icon:e.icon,tip:e.tip,href:e.href},e.name))})]}),(0,l.jsxs)("section",{className:"space-y-4",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:e("nav.tickets")}),(0,l.jsx)("div",{className:"card p-5",children:(0,l.jsx)("p",{className:"text-neutral-300 text-sm",children:"A nova interface de Tickets ser\xe1 conectada ao adaptador para o sistema atual. Esta \xe9 uma pr\xe9via do layout."})})]})]})}}},function(e){e.O(0,[138,814,482,996,971,23,744],function(){return e(e.s=6758)}),_N_E=e.O()}]);