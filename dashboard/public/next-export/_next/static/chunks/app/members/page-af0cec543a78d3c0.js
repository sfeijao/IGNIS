(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[607],{9051:function(e,t,r){Promise.resolve().then(r.bind(r,9067)),Promise.resolve().then(r.bind(r,912)),Promise.resolve().then(r.bind(r,1481))},9067:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var a=r(7437),s=r(2265),l=r(9988),n=r(2837),i=r(8183);function c(e){let{guildId:t,member:r,onClose:n,onChanged:c}=e,{toast:d}=(0,i.p)(),[o,u]=(0,s.useState)([]),[m,x]=(0,s.useState)((null==r?void 0:r.nick)||""),[b,h]=(0,s.useState)(new Set(Array.isArray(null==r?void 0:r.roles)?r.roles:[])),[p,f]=(0,s.useState)(0),[g,v]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{let e=await l.h.getRoles(t);u(e.roles||[])}catch(e){}})()},[t]);let j=e=>{h(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},y=async()=>{v(!0);try{await l.h.setMemberNickname(t,r.id,m),d({type:"success",title:"Nickname atualizado"}),c()}catch(e){d({type:"error",title:"Falha ao atualizar nickname",description:null==e?void 0:e.message})}finally{v(!1)}},N=async()=>{v(!0);try{let e=new Set(Array.isArray(null==r?void 0:r.roles)?r.roles:[]),a=Array.from(b).filter(t=>!e.has(t)),s=Array.from(e).filter(e=>!b.has(e));await l.h.updateMemberRoles(t,r.id,{add:a,remove:s}),d({type:"success",title:"Cargos atualizados"}),c()}catch(e){d({type:"error",title:"Falha ao atualizar cargos",description:null==e?void 0:e.message})}finally{v(!1)}},w=async()=>{if(!(p>0)){d({type:"info",title:"Tempo inv\xe1lido"});return}if(confirm("Aplicar timeout de ".concat(p," minutos?"))){v(!0);try{await l.h.timeoutMember(t,r.id,Math.round(60*p)),d({type:"success",title:"Timeout aplicado"}),c()}catch(e){d({type:"error",title:"Falha ao aplicar timeout",description:null==e?void 0:e.message})}finally{v(!1)}}},k=async()=>{if(confirm("Expulsar este membro?")){v(!0);try{await l.h.kickMember(t,r.id),d({type:"success",title:"Membro expulso"}),c()}catch(e){d({type:"error",title:"Falha ao expulsar",description:null==e?void 0:e.message})}finally{v(!1)}}},C=async()=>{if(confirm("Banir este membro?")){v(!0);try{await l.h.banMember(t,r.id,{deleteMessageSeconds:3600}),d({type:"success",title:"Membro banido"}),c()}catch(e){d({type:"error",title:"Falha ao banir",description:null==e?void 0:e.message})}finally{v(!1)}}},S=(0,s.useMemo)(()=>o.sort((e,t)=>e.name.localeCompare(t.name)),[o]);return(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-label":"Gerir membro",children:(0,a.jsxs)("div",{className:"w-[min(96vw,720px)] rounded-2xl bg-neutral-900 border border-neutral-800 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-800",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-neutral-400",children:"Gerir"}),(0,a.jsx)("div",{className:"text-lg font-semibold",children:(null==r?void 0:r.nick)?"".concat(r.nick," (").concat(r.username,"#").concat(r.discriminator,")"):"".concat(r.username,"#").concat(r.discriminator)})]}),(0,a.jsx)("button",{onClick:n,className:"px-2 py-1 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",children:"Fechar"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:[(0,a.jsxs)("section",{className:"card p-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-2",children:"Nickname"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{className:"flex-1 bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:m,onChange:e=>x(e.target.value),placeholder:"Sem nickname"}),(0,a.jsx)("button",{onClick:y,className:"px-3 py-1.5 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",disabled:g,children:"Guardar"})]})]}),(0,a.jsxs)("section",{className:"card p-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-2",children:"Timeout"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"number",min:0,className:"w-32 bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:p,onChange:e=>f(parseInt(e.target.value||"0",10)),"aria-label":"Minutos"}),(0,a.jsx)("span",{className:"text-sm",children:"min"}),(0,a.jsx)("button",{onClick:w,className:"px-3 py-1.5 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",disabled:g,children:"Aplicar"})]})]}),(0,a.jsxs)("section",{className:"card p-3 md:col-span-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Cargos"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>h(new Set),className:"px-2 py-1 text-xs rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",children:"Limpar"}),(0,a.jsx)("button",{onClick:N,className:"px-3 py-1.5 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",disabled:g,children:"Guardar"})]})]}),(0,a.jsx)("div",{className:"max-h-60 overflow-auto grid grid-cols-2 gap-2",children:S.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:b.has(e.id),onChange:()=>j(e.id)}),(0,a.jsx)("span",{children:e.name})]},e.id))})]}),(0,a.jsxs)("section",{className:"card p-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-2",children:"A\xe7\xf5es"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:k,className:"px-3 py-1.5 rounded bg-amber-600/30 border border-amber-700/60 hover:bg-amber-600/40",disabled:g,children:"Kick"}),(0,a.jsx)("button",{onClick:C,className:"px-3 py-1.5 rounded bg-rose-600/40 hover:bg-rose-600/50",disabled:g,children:"Ban"})]})]})]})]})})}var d=r(7814);function o(){let{t:e}=(0,d.QT)(),t=(0,n._)(),[r,o]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[x,b]=(0,s.useState)(50),[h,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),[v,j]=(0,s.useState)([]),[y,N]=(0,s.useState)([]),[w,k]=(0,s.useState)(null),{toast:C}=(0,i.p)(),S=(0,s.useMemo)(()=>({q:r,role:u,limit:x,refresh:h}),[r,u,x,h]);return(0,s.useEffect)(()=>{t&&(async()=>{try{let e=await l.h.getRoles(t);j(e.roles||[])}catch(e){}})()},[t]),(0,s.useEffect)(()=>{if(!t)return;let e=!1;return(async()=>{g(!0);try{let r=await l.h.getMembers(t,S);e||N(r.members||r)}catch(t){e||N([])}finally{e||g(!1)}})(),()=>{e=!0}},[t,S]),(0,a.jsxs)("div",{className:"space-y-3",children:[!t&&(0,a.jsx)("div",{className:"card p-4 text-sm text-neutral-400",children:e("members.selectGuild")}),(0,a.jsxs)("div",{className:"card p-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"text-xs text-neutral-400",children:e("members.search")}),(0,a.jsx)("input",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",placeholder:"Nome ou apelido",value:r,onChange:e=>o(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-neutral-400",children:e("members.role")}),(0,a.jsxs)("select",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:u,onChange:e=>m(e.target.value),title:e("members.role"),children:[(0,a.jsx)("option",{value:"",children:"Todos"}),v.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-neutral-400",children:e("members.limit")}),(0,a.jsx)("select",{className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:x,onChange:e=>b(parseInt(e.target.value,10)),title:e("members.limit"),children:[25,50,100,150,200].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("label",{className:"flex items-center gap-2 text-xs text-neutral-300 mt-5",children:[(0,a.jsx)("input",{type:"checkbox",checked:h,onChange:e=>p(e.target.checked)}),e("members.refresh")]})})]}),(0,a.jsx)("div",{className:"card p-0 overflow-hidden",children:(0,a.jsxs)("div",{className:"divide-y divide-neutral-800",children:[f&&(0,a.jsx)("div",{className:"p-6 text-neutral-400",children:e("logs.loading")}),!f&&y.map(t=>(0,a.jsxs)("div",{className:"p-4 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-neutral-800 border border-neutral-700 flex items-center justify-center text-xs",children:String(t.username||"U")[0]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-neutral-200 truncate",children:t.nick?"".concat(t.nick," (").concat(t.username,"#").concat(t.discriminator,")"):"".concat(t.username,"#").concat(t.discriminator)}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:t.id})]}),t.manageable?(0,a.jsx)("button",{className:"px-2 py-1 text-xs rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",onClick:()=>k(t),title:e("members.manage"),children:e("members.manage")}):(0,a.jsx)("span",{className:"text-xs text-neutral-500",children:e("members.notManageable")})]},t.id))]})}),w&&t&&(0,a.jsx)(c,{guildId:t,member:w,onClose:()=>k(null),onChanged:()=>{C({type:"success",title:"Altera\xe7\xf5es guardadas"}),k(null)}})]})}},8183:function(e,t,r){"use strict";r.d(t,{ToasterProvider:function(){return i},p:function(){return n}});var a=r(7437),s=r(2265);let l=(0,s.createContext)(null);function n(){let e=(0,s.useContext)(l);if(!e)throw Error("useToast must be used within <ToasterProvider />");return e}function i(e){let{children:t}=e,[r,n]=(0,s.useState)([]),i=(0,s.useRef)(0),c=(0,s.useCallback)(e=>{n(t=>t.filter(t=>t.id!==e))},[]),d=(0,s.useCallback)(e=>{let t="".concat(Date.now(),"_").concat(i.current++),r={id:t,...e};n(e=>[...e,r]),window.setTimeout(()=>c(t),4500)},[c]),o=(0,s.useMemo)(()=>({toast:d}),[d]);return(0,a.jsxs)(l.Provider,{value:o,children:[t,(0,a.jsx)("div",{className:"fixed z-50 right-4 bottom-4 flex flex-col gap-2 w-[min(92vw,380px)]",role:"status","aria-live":"polite",children:r.map(e=>(0,a.jsxs)("div",{className:"rounded-xl border p-3 shadow-lg backdrop-blur card ".concat("success"===e.type?"border-emerald-700/60":"error"===e.type?"border-rose-700/60":"border-neutral-700/60"),children:[e.title&&(0,a.jsx)("div",{className:"text-sm font-semibold mb-0.5",children:e.title}),e.description&&(0,a.jsx)("div",{className:"text-xs text-neutral-300",children:e.description})]},e.id))})]})}},912:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let a=r(5592);function s(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new a.BailoutToCSRError(t);return r}},1481:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return l}});let a=r(7437),s=r(8512);function l(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,s.getExpectedRequestStore)("next/dynamic css"),l=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));l.push(...t)}}return 0===l.length?null:(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[482,814,971,23,744],function(){return e(e.s=9051)}),_N_E=e.O()}]);