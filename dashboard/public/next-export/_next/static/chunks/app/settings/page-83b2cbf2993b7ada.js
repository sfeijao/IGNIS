(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{7147:function(e,t,l){Promise.resolve().then(l.bind(l,3989))},3989:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return u}});var s=l(7437),n=l(2265),i=l(9988),a=l(2837),r=l(7814),o=l(8183);let d={prefix:"!",locale:"pt",logsEnabled:!0,modlogChannelId:""};function c(){let[e,t]=(0,n.useState)(d),[l,c]=(0,n.useState)({nickname:"",presenceStatus:"online",statusType:"CUSTOM",statusText:"",bannerUrl:"",iconUrl:"",staffRoleId:"",adminRoleId:"",verifiedRoleId:"",unverifiedRoleId:""}),[u,m]=(0,n.useState)(!1),[g,b]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),[x,v]=(0,n.useState)(!1),f=(0,a._)(),{t:y}=(0,r.QT)(),{toast:j}=(0,o.p)(),[R,N]=(0,n.useState)([]),[I,w]=(0,n.useState)([]),[C,T]=(0,n.useState)(!1),[k,U]=(0,n.useState)(null),[S,F]=(0,n.useState)(!1),E=e=>{switch(String("string"==typeof e?e:(null==e?void 0:e.type)||"").toLowerCase()){case"guild_text":case"text":return"Text";case"guild_announcement":case"announcement":return"Announcement";case"guild_voice":case"voice":return"Voice";case"guild_category":case"category":return"Category";default:return"Channel"}},M=(0,n.useMemo)(()=>{let e=[];return l.staffRoleId||e.push(y("settings.bot.systemRoles.staff")),l.adminRoleId||e.push(y("settings.bot.systemRoles.admin")),l.verifiedRoleId||e.push(y("verification.verifiedRole")),e},[l.staffRoleId,l.adminRoleId,l.verifiedRoleId,y]);(0,n.useEffect)(()=>{f&&(async()=>{var e,l,s,n,a,r;try{let r=await (null===(e=i.h.getSettings)||void 0===e?void 0:e.call(i.h,f));r&&t({prefix:null!==(l=r.prefix)&&void 0!==l?l:d.prefix,locale:null!==(s=r.locale)&&void 0!==s?s:d.locale,logsEnabled:null!==(n=r.logsEnabled)&&void 0!==n?n:d.logsEnabled,modlogChannelId:null!==(a=r.modlogChannelId)&&void 0!==a?a:d.modlogChannelId})}catch(e){}try{let e=await (null===(r=i.h.getBotSettings)||void 0===r?void 0:r.call(i.h,f)),t=e&&e.settings||e||{};c(e=>{var l,s,n,i;return{nickname:"string"==typeof t.nickname?t.nickname:"",presenceStatus:t.presenceStatus||"online",statusType:t.statusType||"CUSTOM",statusText:"string"==typeof t.statusText?t.statusText:"",bannerUrl:"string"==typeof t.bannerUrl?t.bannerUrl:"",iconUrl:"string"==typeof t.iconUrl?t.iconUrl:"",staffRoleId:"string"==typeof t.staffRoleId?t.staffRoleId:(null===(l=t.roles)||void 0===l?void 0:l.staff)||"",adminRoleId:"string"==typeof t.adminRoleId?t.adminRoleId:(null===(s=t.roles)||void 0===s?void 0:s.admin)||"",verifiedRoleId:"string"==typeof t.verifiedRoleId?t.verifiedRoleId:(null===(n=t.verification)||void 0===n?void 0:n.verifiedRoleId)||"",unverifiedRoleId:"string"==typeof t.unverifiedRoleId?t.unverifiedRoleId:(null===(i=t.verification)||void 0===i?void 0:i.unverifiedRoleId)||""}})}catch(e){}try{let e=await i.h.getChannels(f);N(e.channels||e||[])}catch(e){}try{T(!0),U(null);let e=await i.h.getRoles(f);w(e.roles||e||[])}catch(e){w([]),U((null==e?void 0:e.message)||"roles_failed")}finally{T(!1)}v(!0)})()},[f]);let D=async()=>{if(f)try{T(!0),U(null);let e=await i.h.getRoles(f);w(e.roles||e||[])}catch(e){w([]),U((null==e?void 0:e.message)||"roles_failed")}finally{T(!1)}};(0,n.useEffect)(()=>{if(f)try{let e="ignis:bannerCropToFill:".concat(f),t=window.localStorage.getItem(e);null!=t&&F("1"===t)}catch(e){}},[f]),(0,n.useEffect)(()=>{if(f)try{let e="ignis:bannerCropToFill:".concat(f);window.localStorage.setItem(e,S?"1":"0")}catch(e){}},[f,S]);let P=async()=>{if(f){h(!0);try{var t,s;await (null===(t=i.h.postSettings)||void 0===t?void 0:t.call(i.h,f,e));let n={nickname:l.nickname||"",presenceStatus:l.presenceStatus||"online",statusType:l.statusType||"CUSTOM",statusText:l.statusText||""};l.bannerUrl&&(n.bannerUrl=l.bannerUrl),l.iconUrl&&(n.iconUrl=l.iconUrl),l.staffRoleId&&(n.staffRoleId=l.staffRoleId),l.adminRoleId&&(n.adminRoleId=l.adminRoleId),l.verifiedRoleId&&(n.verifiedRoleId=l.verifiedRoleId),l.unverifiedRoleId&&(n.unverifiedRoleId=l.unverifiedRoleId),await (null===(s=i.h.postBotSettings)||void 0===s?void 0:s.call(i.h,f,n)),j({type:"success",title:y("settings.saveSuccess")})}catch(e){j({type:"error",title:y("settings.saveError")})}finally{h(!1)}}},_=async e=>{if(f&&e){if(!/^image\//i.test(e.type)){j({type:"error",title:y("settings.bot.banner.typeError")});return}if(e.size>20971520){j({type:"error",title:y("settings.bot.banner.sizeError")});return}m(!0);try{let t=await new Promise((t,l)=>{let s=new FileReader;s.onload=()=>t(String(s.result||"")),s.onerror=l,s.readAsDataURL(e)}),l=async(e,t)=>{if(/image\/gif/i.test(t.type))return e;let l=await new Promise((t,l)=>{let s=new Image;s.onload=()=>t(s),s.onerror=l,s.src=e}),s=l.naturalWidth||l.width,n=l.naturalHeight||l.height;if(!s||!n)return e;let i=document.createElement("canvas"),a=i.getContext("2d");if(!a)return e;if(S){if(s<1600&&n<400)return e;let t=s/n,r=0,o=0,d=s,c=n;t>4?(d=Math.floor(4*n),r=Math.floor((s-d)/2)):t<4&&(c=Math.floor(s/4),o=Math.floor((n-c)/2)),i.width=1600,i.height=400,a.drawImage(l,r,o,d,c,0,0,1600,400)}else{let t=Math.min(1,Math.min(1600/s,400/n));if(t>=1)return e;let r=Math.max(1,Math.floor(s*t)),o=Math.max(1,Math.floor(n*t));i.width=r,i.height=o,a.drawImage(l,0,0,r,o)}try{return i.toDataURL("image/webp",.85)}catch(e){return i.toDataURL("image/jpeg",.85)}},s=await l(t,e),n=await i.h.uploadGuildImage(f,e.name,s);n&&n.success&&n.url?(c(e=>({...e,bannerUrl:n.url})),j({type:"success",title:y("settings.bot.banner.uploaded")})):j({type:"error",title:y("settings.bot.banner.uploadFail")})}catch(e){j({type:"error",title:y("settings.bot.banner.uploadFail")})}finally{m(!1)}}},G=async e=>{if(f&&e){if(!/^image\//i.test(e.type)){j({type:"error",title:y("settings.bot.icon.typeError")});return}if(e.size>20971520){j({type:"error",title:y("settings.bot.icon.sizeError")});return}b(!0);try{let t=await new Promise((t,l)=>{let s=new FileReader;s.onload=()=>t(String(s.result||"")),s.onerror=l,s.readAsDataURL(e)}),l=async(e,t)=>{if(/image\/gif/i.test(t.type))return e;let l=await new Promise((t,l)=>{let s=new Image;s.onload=()=>t(s),s.onerror=l,s.src=e}),s=l.naturalWidth||l.width,n=l.naturalHeight||l.height;if(!s||!n)return e;let i=Math.min(1,Math.min(256/s,256/n));if(i>=1)return e;let a=Math.max(1,Math.floor(s*i)),r=Math.max(1,Math.floor(n*i)),o=document.createElement("canvas");o.width=a,o.height=r;let d=o.getContext("2d");if(!d)return e;d.drawImage(l,0,0,a,r);try{return o.toDataURL("image/webp",.9)}catch(e){return o.toDataURL("image/jpeg",.9)}},s=await l(t,e),n=await i.h.uploadGuildImage(f,e.name,s);(null==n?void 0:n.success)&&n.url?(c(e=>({...e,iconUrl:n.url})),j({type:"success",title:y("settings.bot.icon.uploaded")})):j({type:"error",title:y("settings.bot.icon.uploadFail")})}catch(e){j({type:"error",title:y("settings.bot.icon.uploadFail")})}finally{b(!1)}}};return(0,s.jsxs)("form",{className:"card p-5 max-w-xl space-y-4",onSubmit:e=>{e.preventDefault(),P()},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"prefix",className:"block text-sm mb-1",children:y("settings.prefix")}),(0,s.jsx)("input",{id:"prefix",title:y("settings.prefix"),placeholder:y("settings.prefix.placeholder"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:e.prefix,onChange:e=>t(t=>({...t,prefix:e.target.value}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"locale",className:"block text-sm mb-1",children:y("settings.locale")}),(0,s.jsxs)("select",{id:"locale",title:y("settings.locale"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:e.locale,onChange:e=>t(t=>({...t,locale:e.target.value})),children:[(0,s.jsx)("option",{value:"pt",children:y("settings.locale.pt")}),(0,s.jsx)("option",{value:"en",children:y("settings.locale.en")})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{id:"logsEnabled",type:"checkbox",className:"h-4 w-4",checked:e.logsEnabled,onChange:e=>t(t=>({...t,logsEnabled:e.target.checked}))}),(0,s.jsx)("label",{htmlFor:"logsEnabled",className:"text-sm",children:y("settings.logsEnabled")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"modlog",className:"block text-sm mb-1",children:y("settings.modlogChannelId")}),(0,s.jsxs)("select",{id:"modlog",title:y("settings.modlogChannelId"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:e.modlogChannelId,onChange:e=>t(t=>({...t,modlogChannelId:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"—"}),R.filter(e=>{let t=String(e.type||"").toLowerCase();return t.includes("text")||t.includes("announcement")}).map(e=>(0,s.jsx)("option",{value:e.id,children:"#".concat(e.name," (").concat(E(e),")")},e.id))]})]}),(0,s.jsxs)("div",{className:"mt-6 pt-4 border-t border-neutral-800",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-3",children:y("settings.bot.title")}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"nickname",className:"block text-sm mb-1",children:y("settings.bot.nickname")}),(0,s.jsx)("input",{id:"nickname",placeholder:y("settings.bot.nickname.placeholder"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:l.nickname||"",onChange:e=>c(t=>({...t,nickname:e.target.value}))}),(0,s.jsx)("p",{className:"text-xs text-neutral-400 mt-1",children:y("settings.bot.nickname.hint")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"presenceStatus",className:"block text-sm mb-1",children:y("settings.bot.presence")}),(0,s.jsxs)("select",{id:"presenceStatus",className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:l.presenceStatus||"online",onChange:e=>c(t=>({...t,presenceStatus:e.target.value})),children:[(0,s.jsx)("option",{value:"online",children:y("settings.bot.presence.online")}),(0,s.jsx)("option",{value:"idle",children:y("settings.bot.presence.idle")}),(0,s.jsx)("option",{value:"dnd",children:y("settings.bot.presence.dnd")}),(0,s.jsx)("option",{value:"invisible",children:y("settings.bot.presence.offline")})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"statusType",className:"block text-sm mb-1",children:y("settings.bot.activityType")}),(0,s.jsxs)("select",{id:"statusType",className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:l.statusType||"CUSTOM",onChange:e=>c(t=>({...t,statusType:e.target.value})),children:[(0,s.jsx)("option",{value:"PLAYING",children:y("settings.bot.activityType.playing")}),(0,s.jsx)("option",{value:"LISTENING",children:y("settings.bot.activityType.listening")}),(0,s.jsx)("option",{value:"WATCHING",children:y("settings.bot.activityType.watching")}),(0,s.jsx)("option",{value:"COMPETING",children:y("settings.bot.activityType.competing")}),(0,s.jsx)("option",{value:"CUSTOM",children:y("settings.bot.activityType.custom")})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"statusText",className:"block text-sm mb-1",children:y("settings.bot.activityText")}),(0,s.jsx)("input",{id:"statusText",placeholder:y("settings.bot.activityText.placeholder"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:l.statusText||"",onChange:e=>c(t=>({...t,statusText:e.target.value}))})]}),(0,s.jsxs)("div",{className:"md:col-span-2 mb-6 pb-4 border-b border-neutral-800",children:[M.length>0&&(0,s.jsxs)("div",{className:"mb-3 rounded-md border border-amber-500/50 bg-amber-500/10 text-amber-200 text-sm p-2",children:[y("settings.bot.systemRoles.warn.missing")," ",M.join(", ")]}),k&&(0,s.jsxs)("div",{className:"mb-3 rounded-md border border-rose-600 bg-rose-900/40 text-rose-200 text-xs p-2 flex items-center gap-3",children:[(0,s.jsx)("span",{children:y("settings.bot.systemRoles.loadingFailed")}),(0,s.jsx)("button",{type:"button",onClick:D,className:"px-2 py-1 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 text-rose-100 text-xs",children:y("settings.bot.systemRoles.retry")})]}),!k&&0===I.length&&x&&(0,s.jsxs)("div",{className:"mb-3 rounded-md border border-neutral-700 bg-neutral-800/60 text-neutral-300 text-xs p-2",children:[!f&&y("settings.bot.systemRoles.noGuild"),f&&C&&y("settings.bot.systemRoles.loading"),f&&!C&&y("settings.bot.systemRoles.rolesEmpty")]}),(0,s.jsx)("h3",{className:"text-md font-semibold mb-3",children:y("settings.bot.systemRoles.title")}),(0,s.jsx)("p",{className:"text-xs text-neutral-400 mb-4",children:y("settings.bot.systemRoles.help")}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"staffRoleId",className:"block text-sm mb-1",children:y("settings.bot.systemRoles.staff")}),(0,s.jsxs)("select",{id:"staffRoleId",className:"w-full rounded-lg bg-neutral-900 border px-3 py-2 ".concat(l.staffRoleId?"border-neutral-800":"border-rose-600"),value:l.staffRoleId||"",onChange:e=>c(t=>({...t,staffRoleId:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"—"}),C&&(0,s.jsx)("option",{disabled:!0,value:"",children:y("settings.bot.systemRoles.loading")}),!C&&I.map(e=>(0,s.jsx)("option",{value:e.id,children:"@".concat(e.name)},e.id)),!C&&0===I.length&&!k&&(0,s.jsx)("option",{disabled:!0,value:"",children:y("settings.bot.systemRoles.selectGuildFirst")})]}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:y("settings.bot.systemRoles.staff.hint")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"adminRoleId",className:"block text-sm mb-1",children:y("settings.bot.systemRoles.admin")}),(0,s.jsxs)("select",{id:"adminRoleId",className:"w-full rounded-lg bg-neutral-900 border px-3 py-2 ".concat(l.adminRoleId?"border-neutral-800":"border-rose-600"),value:l.adminRoleId||"",onChange:e=>c(t=>({...t,adminRoleId:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"—"}),C&&(0,s.jsx)("option",{disabled:!0,value:"",children:y("settings.bot.systemRoles.loading")}),!C&&I.map(e=>(0,s.jsx)("option",{value:e.id,children:"@".concat(e.name)},e.id)),!C&&0===I.length&&!k&&(0,s.jsx)("option",{disabled:!0,value:"",children:y("settings.bot.systemRoles.selectGuildFirst")})]}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:y("settings.bot.systemRoles.admin.hint")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"verifiedRoleId",className:"block text-sm mb-1",children:y("verification.verifiedRole")}),(0,s.jsxs)("select",{id:"verifiedRoleId",className:"w-full rounded-lg bg-neutral-900 border px-3 py-2 ".concat(l.verifiedRoleId?"border-neutral-800":"border-rose-600"),value:l.verifiedRoleId||"",onChange:e=>c(t=>({...t,verifiedRoleId:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"—"}),C&&(0,s.jsx)("option",{disabled:!0,value:"",children:y("settings.bot.systemRoles.loading")}),!C&&I.map(e=>(0,s.jsx)("option",{value:e.id,children:"@".concat(e.name)},e.id)),!C&&0===I.length&&!k&&(0,s.jsx)("option",{disabled:!0,value:"",children:y("settings.bot.systemRoles.selectGuildFirst")})]}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:y("settings.bot.systemRoles.verified.hint")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"unverifiedRoleId",className:"block text-sm mb-1",children:y("verification.unverifiedRole")}),(0,s.jsxs)("select",{id:"unverifiedRoleId",className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:l.unverifiedRoleId||"",onChange:e=>c(t=>({...t,unverifiedRoleId:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"—"}),C&&(0,s.jsx)("option",{disabled:!0,value:"",children:y("settings.bot.systemRoles.loading")}),!C&&I.map(e=>(0,s.jsx)("option",{value:e.id,children:"@".concat(e.name)},e.id)),!C&&0===I.length&&!k&&(0,s.jsx)("option",{disabled:!0,value:"",children:y("settings.bot.systemRoles.selectGuildFirst")})]}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:y("settings.bot.systemRoles.unverified.hint")})]})]}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-2",children:y("settings.bot.systemRoles.note")})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"bannerUrl",className:"block text-sm mb-1",children:y("settings.bot.banner")}),(0,s.jsx)("input",{id:"bannerUrl",placeholder:y("settings.bot.banner.placeholder"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:l.bannerUrl||"",onChange:e=>{let t=(e.target.value||"").trim();/^file:\/\//i.test(t)||/^[a-zA-Z]:\\/.test(t)?(j({type:"error",title:y("settings.bot.banner.localPathError")}),c(e=>({...e,bannerUrl:""}))):c(e=>({...e,bannerUrl:t}))}}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsxs)("label",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-md bg-neutral-800 hover:bg-neutral-700 cursor-pointer",children:[(0,s.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{let t=e.target.files&&e.target.files[0];t&&_(t),e.target.value=""}}),(0,s.jsx)("span",{children:u?y("settings.bot.banner.uploading"):y("settings.bot.banner.upload")})]}),(0,s.jsx)("span",{className:"text-xs text-neutral-400",children:y("settings.bot.banner.hint")})]}),(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,s.jsx)("input",{id:"bannerCropToFill",type:"checkbox",className:"h-4 w-4",checked:S,onChange:e=>F(e.target.checked)}),(0,s.jsx)("label",{htmlFor:"bannerCropToFill",className:"text-sm",children:y("settings.bot.banner.cropToFill")})]}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:y("settings.bot.banner.cropHint")}),(0,s.jsxs)("div",{onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{var t,l;e.preventDefault(),e.stopPropagation();let s=null===(l=e.dataTransfer)||void 0===l?void 0:null===(t=l.files)||void 0===t?void 0:t[0];s&&_(s)},className:"mt-3 rounded-lg border-2 border-dashed border-neutral-700 hover:border-neutral-500 transition-colors p-4 text-center text-sm text-neutral-300 cursor-pointer",onClick:()=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{var t,l;let s=null===(l=e.target)||void 0===l?void 0:null===(t=l.files)||void 0===t?void 0:t[0];s&&_(s)},e.click()},"aria-label":y("settings.bot.banner.dropHint"),title:y("settings.bot.banner.dropHint"),children:[(0,s.jsx)("div",{className:"opacity-90",children:y("settings.bot.banner.dropHint")}),(0,s.jsx)("div",{className:"text-xs text-neutral-500 mt-1",children:y("settings.bot.banner.limit")})]}),l.bannerUrl?(0,s.jsx)("div",{className:"mt-3 border border-neutral-800 rounded-lg overflow-hidden",children:(0,s.jsx)("img",{src:l.bannerUrl,alt:y("settings.bot.banner.previewAlt"),className:"w-full h-40 object-cover"})}):null]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"iconUrl",className:"block text-sm mb-1",children:y("settings.bot.icon")}),(0,s.jsx)("input",{id:"iconUrl",placeholder:y("settings.bot.icon.placeholder"),className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:l.iconUrl||"",onChange:e=>{let t=(e.target.value||"").trim();/^file:\/\//i.test(t)||/^[a-zA-Z]:\\/.test(t)?(j({type:"error",title:y("settings.bot.icon.localPathError")}),c(e=>({...e,iconUrl:""}))):c(e=>({...e,iconUrl:t}))}}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsxs)("label",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-md bg-neutral-800 hover:bg-neutral-700 cursor-pointer",children:[(0,s.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;let l=null===(t=e.target.files)||void 0===t?void 0:t[0];l&&G(l),e.target.value=""}}),(0,s.jsx)("span",{children:g?y("settings.bot.icon.uploading"):y("settings.bot.icon.upload")})]}),(0,s.jsx)("span",{className:"text-xs text-neutral-400",children:y("settings.bot.icon.hint")})]}),(0,s.jsxs)("div",{onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{var t,l;e.preventDefault(),e.stopPropagation();let s=null===(l=e.dataTransfer)||void 0===l?void 0:null===(t=l.files)||void 0===t?void 0:t[0];s&&G(s)},className:"mt-3 rounded-lg border-2 border-dashed border-neutral-700 hover:border-neutral-500 transition-colors p-4 text-center text-sm text-neutral-300 cursor-pointer",onClick:()=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{var t,l;let s=null===(l=e.target)||void 0===l?void 0:null===(t=l.files)||void 0===t?void 0:t[0];s&&G(s)},e.click()},"aria-label":y("settings.bot.icon.dropHint"),title:y("settings.bot.icon.dropHint"),children:[(0,s.jsx)("div",{className:"opacity-90",children:y("settings.bot.icon.dropHint")}),(0,s.jsx)("div",{className:"text-xs text-neutral-500 mt-1",children:y("settings.bot.icon.limit")})]}),l.iconUrl?(0,s.jsx)("div",{className:"mt-3 inline-flex items-center gap-3",children:(0,s.jsx)("img",{src:l.iconUrl,alt:y("settings.bot.icon.previewAlt"),className:"w-16 h-16 rounded object-cover border border-neutral-800"})}):null]})]})]}),(0,s.jsx)("div",{className:"flex gap-2 pt-2",children:(0,s.jsx)("button",{type:"submit",disabled:p,className:"px-4 py-2 rounded-lg bg-brand-600 hover:bg-brand-700 font-medium disabled:opacity-60",children:p?y("settings.saving"):x?y("settings.save"):y("settings.loading")})})]})}function u(){let{t:e}=(0,r.QT)();return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:e("settings.title")}),(0,s.jsx)(c,{})]})}},8183:function(e,t,l){"use strict";l.d(t,{ToasterProvider:function(){return r},p:function(){return a}});var s=l(7437),n=l(2265);let i=(0,n.createContext)(null);function a(){let e=(0,n.useContext)(i);if(!e)throw Error("useToast must be used within <ToasterProvider />");return e}function r(e){let{children:t}=e,[l,a]=(0,n.useState)([]),r=(0,n.useRef)(0),o=(0,n.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]),d=(0,n.useCallback)(e=>{let t="".concat(Date.now(),"_").concat(r.current++),l={id:t,...e};a(e=>[...e,l]),window.setTimeout(()=>o(t),4500)},[o]),c=(0,n.useMemo)(()=>({toast:d}),[d]);return(0,s.jsxs)(i.Provider,{value:c,children:[t,(0,s.jsx)("div",{className:"fixed z-50 right-4 bottom-4 flex flex-col gap-2 w-[min(92vw,380px)]",role:"status","aria-live":"polite",children:l.map(e=>(0,s.jsxs)("div",{className:"rounded-xl border p-3 shadow-lg backdrop-blur card ".concat("success"===e.type?"border-emerald-700/60":"error"===e.type?"border-rose-700/60":"border-neutral-700/60"),children:[e.title&&(0,s.jsx)("div",{className:"text-sm font-semibold mb-0.5",children:e.title}),e.description&&(0,s.jsx)("div",{className:"text-xs text-neutral-300",children:e.description})]},e.id))})]})}}},function(e){e.O(0,[814,482,971,23,744],function(){return e(e.s=7147)}),_N_E=e.O()}]);