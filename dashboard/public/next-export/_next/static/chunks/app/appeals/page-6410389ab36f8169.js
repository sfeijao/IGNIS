(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[146],{3871:function(e,a,s){Promise.resolve().then(s.bind(s,4271))},4271:function(e,a,s){"use strict";s.d(a,{default:function(){return d}});var l=s(7437),t=s(2265),n=s(2837),c=s(9988),i=s(7814);function d(){let{t:e}=(0,i.QT)(),[a,s]=(0,t.useState)(null),[d,r]=(0,t.useState)([]),[p,o]=(0,t.useState)(!1),[u,m]=(0,t.useState)(null),[h,x]=(0,t.useState)({});(0,t.useEffect)(()=>{s((0,n._)())},[]);let f=async e=>{o(!0),m(null);try{let a=await c.h.getAppeals(e,{status:"pending"});r((null==a?void 0:a.appeals)||a||[])}catch(e){m((null==e?void 0:e.message)||"Erro ao carregar apelos")}finally{o(!1)}};(0,t.useEffect)(()=>{a&&f(a)},[a]);let N=async(e,s)=>{if(a){o(!0);try{await c.h.decideAppeal(a,e,"approve"===s?"accepted":"rejected",h[e]),await f(a)}finally{o(!1)}}};return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:e("appeals.title")}),(0,l.jsx)("button",{className:"btn btn-secondary",onClick:()=>a&&f(a),title:e("common.reload"),children:e("common.reload")})]}),u&&(0,l.jsx)("div",{className:"text-red-400",children:u}),(0,l.jsxs)("section",{className:"card",children:[(0,l.jsx)("div",{className:"card-header",children:e("appeals.queue")}),(0,l.jsxs)("div",{className:"card-body grid gap-3",children:[0===d.length&&(0,l.jsx)("div",{className:"opacity-70",children:e("appeals.empty")}),d.map(a=>(0,l.jsxs)("div",{className:"p-3 rounded-lg bg-neutral-800/50 border border-neutral-800",children:[(0,l.jsxs)("div",{className:"text-sm opacity-70",children:[a.userId," • ",e("appeals.case")," ",a.caseId," • ",new Date(a.createdAt||Date.now()).toLocaleString()]}),(0,l.jsxs)("div",{className:"mt-1",children:[e("appeals.reason"),": ",a.reason||e("appeals.reason.empty")]}),(0,l.jsxs)("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-2 items-end",children:[(0,l.jsxs)("label",{className:"flex flex-col gap-1 md:col-span-2",children:[(0,l.jsx)("span",{className:"text-sm opacity-80",children:e("appeals.decision.justification")}),(0,l.jsx)("input",{className:"input",value:h[a.id]||"",onChange:e=>x(s=>({...s,[a.id]:e.target.value})),placeholder:e("appeals.decision.placeholder"),title:e("appeals.decision.title")})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{className:"btn btn-primary btn-xs",onClick:()=>N(a.id,"approve"),children:e("appeals.approve")}),(0,l.jsx)("button",{className:"btn btn-danger btn-xs",onClick:()=>N(a.id,"deny"),children:e("appeals.deny")})]})]})]},a.id))]})]})]})}}},function(e){e.O(0,[814,482,971,23,744],function(){return e(e.s=3871)}),_N_E=e.O()}]);