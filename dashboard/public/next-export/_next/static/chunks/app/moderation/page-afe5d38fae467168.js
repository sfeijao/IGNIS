(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{7616:function(e,t,r){Promise.resolve().then(r.bind(r,3979)),Promise.resolve().then(r.bind(r,6296)),Promise.resolve().then(r.bind(r,912)),Promise.resolve().then(r.bind(r,1481))},3979:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var s=r(7437),n=r(2265),l=r(2837),a=r(9988),i=r(8183),d=r(7814);function o(){let e=(0,l._)(),{toast:t}=(0,i.p)(),{t:r}=(0,d.QT)(),[o,c]=(0,n.useState)(""),[u,m]=(0,n.useState)("timeout"),[x,h]=(0,n.useState)(600),[b,f]=(0,n.useState)(""),[p,v]=(0,n.useState)(!1),[j,g]=(0,n.useState)([]),N=()=>Array.from(new Set(o.split(/[,\n\s]+/).map(e=>e.trim()).filter(Boolean))),y=async()=>{if(!e)return t({type:"error",title:"Guild missing"});let s=N();if(0===s.length)return t({type:"error",title:r("mod.bulk.noUsers")});v(!0),g([]);let n=[];try{for(let t of s)try{"timeout"===u?await a.h.timeoutMember(e,t,Number(x)||0,b||void 0):"kick"===u?await a.h.kickMember(e,t,b||void 0):"ban"===u&&await a.h.banMember(e,t,{reason:b||void 0,deleteMessageSeconds:Number(x)||0}),n.push({userId:t,ok:!0})}catch(e){n.push({userId:t,ok:!1,error:(null==e?void 0:e.message)||"error"})}g(n);let l=n.filter(e=>e.ok).length,i=n.length-l;t({type:i?"info":"success",title:r("mod.bulk.done"),description:"".concat(l,"/").concat(n.length)})}finally{v(!1)}};return(0,s.jsxs)("div",{className:"card p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"text-lg font-semibold",children:[r("nav.moderation")," – ",r("mod.bulk.title")]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"text-xs text-neutral-400",htmlFor:"user-ids",children:r("mod.bulk.userIds")}),(0,s.jsx)("textarea",{id:"user-ids",className:"mt-1 w-full min-h-[100px] bg-neutral-900 border border-neutral-700 rounded px-2 py-1 font-mono text-xs",placeholder:"123, 456, 789",value:o,onChange:e=>c(e.target.value)}),(0,s.jsx)("div",{className:"text-[11px] text-neutral-500 mt-1",children:r("mod.bulk.hint")})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-neutral-400",htmlFor:"action",children:r("mod.bulk.action")}),(0,s.jsxs)("select",{id:"action",className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:u,onChange:e=>m(e.target.value),children:[(0,s.jsx)("option",{value:"timeout",children:r("mod.action.timeout")}),(0,s.jsx)("option",{value:"kick",children:r("mod.action.kick")}),(0,s.jsx)("option",{value:"ban",children:r("mod.action.ban")})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-neutral-400",htmlFor:"duration",children:"timeout"===u?r("mod.bulk.durationSeconds"):"ban"===u?r("mod.bulk.deleteMsgSeconds"):r("mod.bulk.durationSeconds")}),(0,s.jsx)("input",{id:"duration",type:"number",className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",value:x,onChange:e=>h(parseInt(e.target.value,10)||0),min:0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-neutral-400",htmlFor:"reason",children:r("mod.reason")}),(0,s.jsx)("input",{id:"reason",className:"mt-1 w-full bg-neutral-900 border border-neutral-700 rounded px-2 py-1",placeholder:r("mod.reason.placeholder"),value:b,onChange:e=>f(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{className:"btn btn-primary",onClick:y,disabled:p,children:p?r("common.working"):r("mod.bulk.run")}),(0,s.jsx)("button",{className:"btn btn-secondary",onClick:()=>{c(""),g([])},disabled:p,children:r("logs.clear")})]})]})]}),j.length>0&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("div",{className:"text-sm text-neutral-300 mb-2",children:r("mod.bulk.results")}),(0,s.jsx)("div",{className:"max-h-48 overflow-auto border border-neutral-800 rounded",children:j.map((e,t)=>(0,s.jsxs)("div",{className:"px-3 py-1 text-xs border-b border-neutral-900 ".concat(e.ok?"text-green-400":"text-red-400"),children:[e.userId," — ",e.ok?"OK":e.error||"ERR"]},t))})]})]})}},6296:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var s=r(7437),n=r(2265),l=r(2837);function a(){let e=(0,l._)(),[t,r]=(0,n.useState)(null),[a,i]=(0,n.useState)([]),[d,o]=(0,n.useState)(!1),c=async()=>{if(e){o(!0);try{let t=await fetch("/api/guild/".concat(e,"/mod/stats"),{credentials:"include"}).then(e=>e.json()).catch(()=>null),s=await fetch("/api/guild/".concat(e,"/mod/cases?limit=20"),{credentials:"include"}).then(e=>e.json()).catch(()=>null);r(t),i((null==s?void 0:s.cases)||s||[])}finally{o(!1)}}};return(0,n.useEffect)(()=>{c()},[e]),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"card p-4",children:[d&&(0,s.jsx)("div",{className:"text-neutral-400",children:"A carregar…"}),t&&(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(t.totals||{}).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"p-3 rounded border border-neutral-800 bg-neutral-900",children:[(0,s.jsx)("div",{className:"text-xs text-neutral-400",children:t}),(0,s.jsx)("div",{className:"text-xl font-semibold",children:String(r)})]},t)})})]}),(0,s.jsx)("div",{className:"card p-0 overflow-hidden",children:(0,s.jsxs)("div",{className:"divide-y divide-neutral-800",children:[a.map((e,t)=>(0,s.jsxs)("div",{className:"p-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"font-mono text-xs text-neutral-500",children:e.id||t+1}),(0,s.jsx)("div",{className:"px-2 py-0.5 text-xs rounded bg-neutral-800 border border-neutral-700",children:e.type||"case"}),(0,s.jsx)("div",{className:"flex-1 min-w-0 text-neutral-200 truncate",children:e.reason||"—"}),(0,s.jsxs)("div",{className:"text-xs text-neutral-500",children:[e.userId||"—"," • ",e.moderatorId||"—"]}),(0,s.jsx)("div",{className:"text-xs text-neutral-500",children:e.createdAt?new Date(e.createdAt).toLocaleString():"—"})]},e.id||t)),!d&&0===a.length&&(0,s.jsx)("div",{className:"p-6 text-neutral-400",children:"Sem casos recentes."})]})})]})}},8183:function(e,t,r){"use strict";r.d(t,{ToasterProvider:function(){return i},p:function(){return a}});var s=r(7437),n=r(2265);let l=(0,n.createContext)(null);function a(){let e=(0,n.useContext)(l);if(!e)throw Error("useToast must be used within <ToasterProvider />");return e}function i(e){let{children:t}=e,[r,a]=(0,n.useState)([]),i=(0,n.useRef)(0),d=(0,n.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]),o=(0,n.useCallback)(e=>{let t="".concat(Date.now(),"_").concat(i.current++),r={id:t,...e};a(e=>[...e,r]),window.setTimeout(()=>d(t),4500)},[d]),c=(0,n.useMemo)(()=>({toast:o}),[o]);return(0,s.jsxs)(l.Provider,{value:c,children:[t,(0,s.jsx)("div",{className:"fixed z-50 right-4 bottom-4 flex flex-col gap-2 w-[min(92vw,380px)]",role:"status","aria-live":"polite",children:r.map(e=>(0,s.jsxs)("div",{className:"rounded-xl border p-3 shadow-lg backdrop-blur card ".concat("success"===e.type?"border-emerald-700/60":"error"===e.type?"border-rose-700/60":"border-neutral-700/60"),children:[e.title&&(0,s.jsx)("div",{className:"text-sm font-semibold mb-0.5",children:e.title}),e.description&&(0,s.jsx)("div",{className:"text-xs text-neutral-300",children:e.description})]},e.id))})]})}},912:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let s=r(5592);function n(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new s.BailoutToCSRError(t);return r}},1481:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return l}});let s=r(7437),n=r(8512);function l(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,n.getExpectedRequestStore)("next/dynamic css"),l=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));l.push(...t)}}return 0===l.length?null:(0,s.jsx)(s.Fragment,{children:l.map(e=>(0,s.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[814,482,971,23,744],function(){return e(e.s=7616)}),_N_E=e.O()}]);