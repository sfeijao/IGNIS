(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[353],{2382:function(e,t,s){Promise.resolve().then(s.bind(s,1018)),Promise.resolve().then(s.bind(s,912)),Promise.resolve().then(s.bind(s,1481))},1018:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});var r=s(7437),n=s(2265),l=s(2837),i=s(8183);function a(){var e,t,s,a,o,c,d;let u=(0,l._)(),[m,x]=(0,n.useState)(null),[f,h]=(0,n.useState)(!1),{toast:p}=(0,i.p)();(0,n.useEffect)(()=>{if(!u)return;let e=!1;return h(!0),(async()=>{try{let t=await fetch("/api/guild/".concat(u,"/diagnostics"),{credentials:"include"}),s=await t.json();e||x(s)}catch(e){}finally{e||h(!1)}})(),()=>{e=!0}},[u]);let g=async()=>{try{let e=v(m);await navigator.clipboard.writeText(e),p({type:"success",title:"Relat\xf3rio copiado",description:"Pronto para colar no suporte."})}catch(e){p({type:"error",title:"Falha ao copiar"})}},v=e=>{if(!e)return"";let t=[];t.push("=== Diagn\xf3stico do Servidor ==="),e.stats&&(t.push("Membros: ".concat(e.stats.memberCount)),t.push("Canais: ".concat(e.stats.channelCount)),t.push("Cargos: ".concat(e.stats.roleCount)));let s=Array.isArray(e.suggestions)?e.suggestions:[];if(s.length)for(let e of(t.push("Sugest\xf5es:"),s))t.push("- [".concat(e.type,"] ").concat(e.message));return t.join("\n")};return(0,r.jsxs)("div",{className:"card p-5 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Diagn\xf3sticos"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:g,className:"rounded-lg px-3 py-1.5 text-sm bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",children:"Copiar relat\xf3rio"}),(0,r.jsx)("button",{type:"button",onClick:()=>u&&x(null)||void 0,className:"rounded-lg px-3 py-1.5 text-sm bg-neutral-800 border border-neutral-700 hover:bg-neutral-700",children:"Limpar"})]})]}),f&&(0,r.jsx)("div",{className:"text-neutral-400",children:"A carregarâ€¦"}),m&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"card p-4",children:[(0,r.jsx)("div",{className:"text-xs text-neutral-400",children:"Membros"}),(0,r.jsx)("div",{className:"text-2xl font-bold",children:null!==(o=null===(e=m.stats)||void 0===e?void 0:e.memberCount)&&void 0!==o?o:"-"})]}),(0,r.jsxs)("div",{className:"card p-4",children:[(0,r.jsx)("div",{className:"text-xs text-neutral-400",children:"Canais"}),(0,r.jsx)("div",{className:"text-2xl font-bold",children:null!==(c=null===(t=m.stats)||void 0===t?void 0:t.channelCount)&&void 0!==c?c:"-"})]}),(0,r.jsxs)("div",{className:"card p-4",children:[(0,r.jsx)("div",{className:"text-xs text-neutral-400",children:"Cargos"}),(0,r.jsx)("div",{className:"text-2xl font-bold",children:null!==(d=null===(s=m.stats)||void 0===s?void 0:s.roleCount)&&void 0!==d?d:"-"})]})]}),(null==m?void 0:null===(a=m.suggestions)||void 0===a?void 0:a.length)?(0,r.jsxs)("div",{className:"card p-4",children:[(0,r.jsx)("div",{className:"text-sm font-medium mb-2",children:"Sugest\xf5es"}),(0,r.jsx)("ul",{className:"space-y-1 list-disc pl-5",children:m.suggestions.map((e,t)=>(0,r.jsxs)("li",{className:"text-sm text-neutral-200",children:[(0,r.jsxs)("span",{className:"text-neutral-400",children:["[",e.type,"]"]})," ",e.message]},t))})]}):!f&&(0,r.jsx)("div",{className:"text-sm text-neutral-400",children:"Sem sugest\xf5es no momento."})]})}},8183:function(e,t,s){"use strict";s.d(t,{ToasterProvider:function(){return a},p:function(){return i}});var r=s(7437),n=s(2265);let l=(0,n.createContext)(null);function i(){let e=(0,n.useContext)(l);if(!e)throw Error("useToast must be used within <ToasterProvider />");return e}function a(e){let{children:t}=e,[s,i]=(0,n.useState)([]),a=(0,n.useRef)(0),o=(0,n.useCallback)(e=>{i(t=>t.filter(t=>t.id!==e))},[]),c=(0,n.useCallback)(e=>{let t="".concat(Date.now(),"_").concat(a.current++),s={id:t,...e};i(e=>[...e,s]),window.setTimeout(()=>o(t),4500)},[o]),d=(0,n.useMemo)(()=>({toast:c}),[c]);return(0,r.jsxs)(l.Provider,{value:d,children:[t,(0,r.jsx)("div",{className:"fixed z-50 right-4 bottom-4 flex flex-col gap-2 w-[min(92vw,380px)]",role:"status","aria-live":"polite",children:s.map(e=>(0,r.jsxs)("div",{className:"rounded-xl border p-3 shadow-lg backdrop-blur card ".concat("success"===e.type?"border-emerald-700/60":"error"===e.type?"border-rose-700/60":"border-neutral-700/60"),children:[e.title&&(0,r.jsx)("div",{className:"text-sm font-semibold mb-0.5",children:e.title}),e.description&&(0,r.jsx)("div",{className:"text-xs text-neutral-300",children:e.description})]},e.id))})]})}},2837:function(e,t,s){"use strict";function r(){return new URL(window.location.href).searchParams.get("guildId")||localStorage.getItem("guildId")}function n(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s=(e||"").trim();if(s?localStorage.setItem("guildId",s):localStorage.removeItem("guildId"),t)try{let e=new URL(window.location.href);s?e.searchParams.set("guildId",s):e.searchParams.delete("guildId"),window.history.replaceState({},"",e.toString())}catch(e){}}s.d(t,{J:function(){return n},_:function(){return r}})},912:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let r=s(5592);function n(e){let{reason:t,children:s}=e;if("undefined"==typeof window)throw new r.BailoutToCSRError(t);return s}},1481:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return l}});let r=s(7437),n=s(8512);function l(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let s=(0,n.getExpectedRequestStore)("next/dynamic css"),l=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files.filter(e=>e.endsWith(".css"));l.push(...t)}}return 0===l.length?null:(0,r.jsx)(r.Fragment,{children:l.map(e=>(0,r.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:s.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=2382)}),_N_E=e.O()}]);