(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1387:function(e,t,a){Promise.resolve().then(a.bind(a,1262)),Promise.resolve().then(a.t.bind(a,231,23))},1262:function(e,t,a){"use strict";a.d(t,{default:function(){return c}});var n=a(7437),r=a(2265),i=a(2695);function o(e){let{label:t,value:a,dotColor:r}=e;return(0,n.jsxs)("div",{className:"card card-gradient p-5",children:[(0,n.jsxs)("div",{className:"badge mb-2",children:[(0,n.jsx)("span",{className:"dot",style:{backgroundColor:r}}),t]}),(0,n.jsx)("div",{className:"text-2xl font-semibold",children:a})]})}var l=a(9988),s=a(2837);function c(){let[e,t]=(0,r.useState)([{label:"Ativos",value:"—",color:"#10b981"},{label:"Warnings",value:"—",color:"#f59e0b"},{label:"Bans",value:"—",color:"#ef4444"},{label:"Kicks",value:"—",color:"#f97316"},{label:"Tickets",value:"—",color:"#6366f1"},{label:"Mod logs",value:"—",color:"#22d3ee"}]),[a,c]=(0,r.useState)("—"),[d,u]=(0,r.useState)("—"),[h,g]=(0,r.useState)("Dados ser\xe3o carregados ao selecionar um servidor."),[f,p]=(0,r.useState)(!1),v=(0,r.useRef)(null),[m,w]=(0,r.useState)(1),[x,k]=(0,r.useState)("—"),j=e=>e?e.toLocaleString():"—",y=e=>{var t,a,n,r;for(let i of[null==e?void 0:e.lastActivity,null==e?void 0:e.lastEventAt,null==e?void 0:e.lastLogAt,null==e?void 0:null===(t=e.latest)||void 0===t?void 0:t.timestamp,null==e?void 0:null===(a=e.latest)||void 0===a?void 0:a.at,Array.isArray(null==e?void 0:e.recent)?null===(n=e.recent[0])||void 0===n?void 0:n.timestamp:null,null==e?void 0:null===(r=e.updates)||void 0===r?void 0:r.last].filter(Boolean)){let e=new Date(i);if(!isNaN(e.getTime()))return e}return null},b=e=>{var t,a,n,r,i,o,l;for(let s of[null==e?void 0:null===(t=e.tickets)||void 0===t?void 0:t.lastUpdated,null==e?void 0:null===(a=e.tickets)||void 0===a?void 0:a.last_activity,null==e?void 0:null===(r=e.tickets)||void 0===r?void 0:null===(n=r.latest)||void 0===n?void 0:n.timestamp,null==e?void 0:e.lastTicketAt,null==e?void 0:null===(i=e.latestTicket)||void 0===i?void 0:i.timestamp,Array.isArray(null==e?void 0:null===(o=e.tickets)||void 0===o?void 0:o.recent)?null===(l=e.tickets.recent[0])||void 0===l?void 0:l.timestamp:null].filter(Boolean)){let e=new Date(s);if(!isNaN(e.getTime()))return e}return null},S=async()=>{let e=(0,s._)();if(e){p(!0);try{var a,n,r,i,o,d,h,f,v,m,w,x,S,N,E,L,F,O,T,P;let s=await l.h.getLogStats(e);if(!s)return;let p=[{label:"Ativos",value:String(null!==(w=null===(a=s.totals)||void 0===a?void 0:a.activeModerators)&&void 0!==w?w:"—"),color:"#10b981"},{label:"Warnings",value:String(null!==(x=null===(n=s.totals)||void 0===n?void 0:n.warnings)&&void 0!==x?x:"—"),color:"#f59e0b"},{label:"Bans",value:String(null!==(S=null===(r=s.totals)||void 0===r?void 0:r.bans)&&void 0!==S?S:"—"),color:"#ef4444"},{label:"Kicks",value:String(null!==(N=null===(i=s.totals)||void 0===i?void 0:i.kicks)&&void 0!==N?N:"—"),color:"#f97316"},{label:"Tickets",value:String(null!==(E=null===(o=s.totals)||void 0===o?void 0:o.tickets)&&void 0!==E?E:"—"),color:"#6366f1"},{label:"Mod logs",value:String(null!==(L=null===(d=s.totals)||void 0===d?void 0:d.logs)&&void 0!==L?L:"—"),color:"#22d3ee"}];t(p);let M=s.updatedAt?new Date(s.updatedAt):new Date;c(M.toLocaleString());let C=null!==(F=null===(h=s.totals)||void 0===h?void 0:h.warnings)&&void 0!==F?F:0,A=null!==(O=null===(f=s.totals)||void 0===f?void 0:f.bans)&&void 0!==O?O:0,W=null!==(T=null===(v=s.totals)||void 0===v?void 0:v.kicks)&&void 0!==T?T:0,R=null!==(P=null===(m=s.totals)||void 0===m?void 0:m.tickets)&&void 0!==P?P:0;g("Resumo r\xe1pido: ".concat(C," warnings, ").concat(A," bans, ").concat(W," kicks, ").concat(R," tickets."));let U=y(s);u(j(U));let I=b(s);k(j(I))}catch(e){}finally{p(!1)}}};return(0,r.useEffect)(()=>{try{let e=localStorage.getItem("dash-refresh-mins"),t=new URLSearchParams(window.location.search),a=m,n=null==t?void 0:t.get("refresh");n?a=(e=>{let t=e.trim().toLowerCase();if("off"===t||"0"===t)return 0;if(t.endsWith("s"))return Math.max(0,parseFloat(t.slice(0,-1))/60);if(t.endsWith("m"))return Math.max(0,parseFloat(t.slice(0,-1)));let a=parseFloat(t);return isNaN(a)?1:Math.max(0,a)})(n):e&&(a=Math.max(0,parseFloat(e))),w(a)}catch(e){}S()},[]),(0,r.useEffect)(()=>{v.current&&(clearInterval(v.current),v.current=null),m>0&&(v.current=setInterval(S,6e4*m));try{localStorage.setItem("dash-refresh-mins",String(m))}catch(e){}return()=>{v.current&&clearInterval(v.current)}},[m]),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("div",{className:"card p-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-neutral-200",children:"Status & Resumo"}),(0,n.jsx)("p",{className:"text-xs text-neutral-400 mt-1",children:h}),(0,n.jsxs)("p",{className:"text-xs text-neutral-400 mt-1",children:["\xdaltima atividade: ",d]}),(0,n.jsxs)("p",{className:"text-xs text-neutral-400 mt-1",children:["\xdaltimo ticket: ",x]})]}),(0,n.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,n.jsxs)("div",{className:"text-xs text-neutral-400 flex items-center gap-2",children:[f&&(0,n.jsx)("span",{className:"inline-block h-3 w-3 rounded-full border-2 border-neutral-500 border-t-transparent animate-spin","aria-label":"Atualizando"}),(0,n.jsxs)("span",{children:[f?"Atualizando…":"Atualizado",": ",a]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("label",{className:"text-xs text-neutral-400 hidden sm:flex items-center gap-1",title:"Frequ\xeancia de atualiza\xe7\xe3o",children:[(0,n.jsx)(i.J,{name:"clock",className:"h-4 w-4"}),(0,n.jsxs)("select",{className:"text-xs rounded-md bg-neutral-900 border border-neutral-700 px-2 py-1",value:m,onChange:e=>w(parseFloat(e.target.value)),"aria-label":"Frequ\xeancia de atualiza\xe7\xe3o",children:[(0,n.jsx)("option",{value:0,children:"Off"}),(0,n.jsx)("option",{value:.1667,children:"10s"}),(0,n.jsx)("option",{value:.5,children:"30s"}),(0,n.jsx)("option",{value:1,children:"1m"}),(0,n.jsx)("option",{value:2,children:"2m"}),(0,n.jsx)("option",{value:5,children:"5m"})]})]}),(0,n.jsxs)("button",{className:"inline-flex items-center gap-1 px-2.5 py-1.5 rounded-md border border-neutral-700 bg-neutral-800 hover:bg-neutral-700 text-xs",onClick:()=>S(),disabled:f,title:"Atualizar agora",children:[(0,n.jsx)(i.J,{name:"refresh",className:"h-4 w-4"}),"Atualizar"]})]})]})]})}),(0,n.jsx)("div",{className:"grid grid-cols-3 gap-3",children:e.map(e=>(0,n.jsx)(o,{label:e.label,value:e.value,dotColor:e.color},e.label))})]})}},2695:function(e,t,a){"use strict";a.d(t,{J:function(){return r}});var n=a(7437);function r(e){let{name:t,className:a="h-5 w-5",stroke:r="currentColor"}=e;switch(t){case"dashboard":return(0,n.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:a,stroke:r,children:[(0,n.jsx)("rect",{x:"3",y:"10",width:"4",height:"10",rx:"1.5",strokeWidth:"1.6"}),(0,n.jsx)("rect",{x:"10",y:"4",width:"4",height:"16",rx:"1.5",strokeWidth:"1.6"}),(0,n.jsx)("rect",{x:"17",y:"13",width:"4",height:"7",rx:"1.5",strokeWidth:"1.6"})]});case"plugins":return(0,n.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:a,stroke:r,xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M9 3h3a2 2 0 0 1 2 2v1h1a2 2 0 1 1 0 4h-1v2a2 2 0 0 1-2 2H9v1a2 2 0 1 1-4 0v-1H4a2 2 0 1 1 0-4h1V8a5 5 0 0 1 4-5Z",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})});case"settings":return(0,n.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:a,stroke:r,xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M12 8.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Z",strokeWidth:"1.6"}),(0,n.jsx)("path",{d:"M3 12h2.2M18.8 12H21M6.2 6.2l1.6 1.1M16.2 16.7l1.6 1.1M6.2 17.8l1.6-1.1M16.2 7.3l1.6-1.1",strokeWidth:"1.6",strokeLinecap:"round"})]});case"tickets":return(0,n.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:a,stroke:r,xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M4 8a2 2 0 0 1 2-2h10l4 4v6a2 2 0 0 1-2 2H8l-4-4V8Z",strokeWidth:"1.6"}),(0,n.jsx)("path",{d:"M15 6v12",strokeWidth:"1.6",strokeDasharray:"2 2"})]});case"shield":return(0,n.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:a,stroke:r,xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M12 3 5 6v6a9 9 0 0 0 7 8 9 9 0 0 0 7-8V6l-7-3Z",strokeWidth:"1.6",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M9.5 12.5 11 14l3.5-3.5",strokeWidth:"1.6",strokeLinecap:"round"})]});case"tag":return(0,n.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:a,stroke:r,xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M3 12V6a2 2 0 0 1 2-2h6l10 10-6 6L3 12Z",strokeWidth:"1.6",strokeLinejoin:"round"}),(0,n.jsx)("circle",{cx:"8",cy:"8",r:"1.2",fill:r})]});case"info":return(0,n.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:a,stroke:r,xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"1.6"}),(0,n.jsx)("path",{d:"M12 10v6",strokeWidth:"1.6",strokeLinecap:"round"}),(0,n.jsx)("circle",{cx:"12",cy:"7",r:"1.2",fill:r})]});case"refresh":return(0,n.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:a,stroke:r,xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M20 12a8 8 0 1 1-2.34-5.66",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M20 4v5h-5",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]});case"clock":return(0,n.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:a,stroke:r,xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"1.6"}),(0,n.jsx)("path",{d:"M12 7v6l4 2",strokeWidth:"1.6",strokeLinecap:"round"})]})}}a(2265)},9988:function(e,t,a){"use strict";a.d(t,{h:function(){return n}});let n={async getLogStats(e,t){let a=t?"?".concat(new URLSearchParams(Object.entries(t).map(e=>{let[t,a]=e;return[t,String(a)]}))):"",n=await fetch("/api/guild/".concat(e,"/logs/stats").concat(a),{credentials:"include"});if(!n.ok)throw Error("Failed to fetch stats");return n.json()},async getLogs(e,t){let a=t?"?".concat(new URLSearchParams(Object.entries(t).map(e=>{let[t,a]=e;return[t,String(a)]}))):"",n=await fetch("/api/guild/".concat(e,"/logs").concat(a),{credentials:"include"});if(!n.ok)throw Error("Failed to fetch logs");return n.json()},exportLogsUrl(e,t){let a=t?"?".concat(new URLSearchParams(Object.entries(t).map(e=>{let[t,a]=e;return[t,String(a)]}))):"";return"/api/guild/".concat(e,"/logs/export").concat(a)},async getSettings(e){let t=await fetch("/api/guild/".concat(e,"/settings"),{credentials:"include"});if(!t.ok)throw Error("Failed to fetch settings");return t.json()},async postSettings(e,t){let a=await fetch("/api/guild/".concat(e,"/settings"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to save settings");return a.json()},async getRoles(e){let t=await fetch("/api/guild/".concat(e,"/roles"),{credentials:"include"});if(!t.ok)throw Error("Failed to fetch roles");return t.json()},async getMembers(e,t){let a=t?new URLSearchParams(Object.entries(t).filter(e=>{let[,t]=e;return null!=t}).map(e=>{let[t,a]=e;return[t,String(a)]})).toString():"",n=await fetch("/api/guild/".concat(e,"/members").concat(a?"?".concat(a):""),{credentials:"include"});if(!n.ok)throw Error("Failed to fetch members");return n.json()},async getCurrentUser(){let e=await fetch("/api/user",{credentials:"include"});if(!e.ok)throw Error("Failed to fetch current user");return e.json()},async getTickets(e,t){let a=t?"?".concat(new URLSearchParams(Object.entries(t).map(e=>{let[t,a]=e;return[t,String(a)]}))):"",n=await fetch("/api/guild/".concat(e,"/tickets").concat(a),{credentials:"include"});if(!n.ok)throw Error("Failed to fetch tickets");return n.json()},exportTicketsUrl(e,t){let a=t?"?".concat(new URLSearchParams(Object.entries(t).map(e=>{let[t,a]=e;return[t,String(a)]}))):"";return"/api/guild/".concat(e,"/tickets/export").concat(a)},async getTicketDetails(e,t){let a=await fetch("/api/guild/".concat(e,"/tickets/").concat(t),{credentials:"include"});if(!a.ok)throw Error("Failed to fetch ticket details");return a.json()},async getTicketLogs(e,t,a){let n=a?"?".concat(new URLSearchParams(Object.entries(a).map(e=>{let[t,a]=e;return[t,String(a)]}))):"",r=await fetch("/api/guild/".concat(e,"/tickets/").concat(t,"/logs").concat(n),{credentials:"include"});if(!r.ok)throw Error("Failed to fetch ticket logs");return r.json()},async getTicketMessages(e,t,a){let n=a?"?".concat(new URLSearchParams(Object.entries(a).map(e=>{let[t,a]=e;return[t,String(a)]}))):"",r=await fetch("/api/guild/".concat(e,"/tickets/").concat(t,"/messages").concat(n),{credentials:"include"});if(!r.ok)throw Error("Failed to fetch ticket messages");return r.json()},async ticketAction(e,t,a,n){let r=await fetch("/api/guild/".concat(e,"/tickets/").concat(t,"/action"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:a,data:n})});if(!r.ok)throw Error("Failed to perform ticket action");return r.json()},async getPanels(e){let t=await fetch("/api/guild/".concat(e,"/panels"),{credentials:"include"});if(!t.ok)throw Error("Failed to fetch panels");return t.json()},async scanPanels(e){let t=await fetch("/api/guild/".concat(e,"/panels/scan"),{method:"POST",credentials:"include"});if(!t.ok)throw Error("Failed to scan panels");return t.json()},async createPanel(e,t){let a=await fetch("/api/guild/".concat(e,"/panels/create"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to create panel");return a.json()},async panelAction(e,t,a,n){let r=await fetch("/api/guild/".concat(e,"/panels/").concat(t,"/action"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:a,data:n})});if(!r.ok)throw Error("Failed to perform panel action");return r.json()},async getCategories(e){let t=await fetch("/api/guild/".concat(e,"/categories"),{credentials:"include"});if(!t.ok)throw Error("Failed to fetch categories");return t.json()},async createCategory(e,t){let a=await fetch("/api/guild/".concat(e,"/categories/create"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to create category");return a.json()},async getChannels(e){let t=await fetch("/api/guild/".concat(e,"/channels"),{credentials:"include"});if(!t.ok)throw Error("Failed to fetch channels");return t.json()},async getTicketsConfig(e){let t=await fetch("/api/guild/".concat(e,"/tickets/config"),{credentials:"include"});if(!t.ok)throw Error("Failed to fetch tickets config");return t.json()},async saveTicketsConfig(e,t){let a=await fetch("/api/guild/".concat(e,"/tickets/config"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to save tickets config");return a.json()},async getCommands(e){let t=await fetch("/api/guild/".concat(e,"/commands"),{credentials:"include"});if(!t.ok)throw Error("Failed to fetch commands");return t.json()},async postCommand(e,t){let a=await fetch("/api/guild/".concat(e,"/commands"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to execute command action");return a.json()},async getAutomodEvents(e,t){let a=t?"?".concat(new URLSearchParams(Object.entries(t).map(e=>{let[t,a]=e;return[t,String(a)]}))):"",n=await fetch("/api/guild/".concat(e,"/mod/automod/events").concat(a),{credentials:"include"});if(!n.ok)throw Error("Failed to fetch automod events");return n.json()},async reviewAutomodEvent(e,t,a,n){let r=await fetch("/api/guild/".concat(e,"/mod/automod/events/").concat(t,"/review"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:a})});if(!r.ok)throw Error("Failed to review event");return r.json()},async getAppeals(e,t){let a=t?"?".concat(new URLSearchParams(Object.entries(t).map(e=>{let[t,a]=e;return[t,String(a)]}))):"",n=await fetch("/api/guild/".concat(e,"/mod/appeals").concat(a),{credentials:"include"});if(!n.ok)throw Error("Failed to fetch appeals");return n.json()},async decideAppeal(e,t,a,n){let r=await fetch("/api/guild/".concat(e,"/mod/appeals/").concat(t,"/decision"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:a,response:n||""})});if(!r.ok)throw Error("Failed to submit appeal decision");return r.json()},async getVerificationMetrics(e){let t=await fetch("/api/guild/".concat(e,"/verification/metrics"),{credentials:"include"});if(!t.ok)throw Error("Failed to fetch verification metrics");return t.json()},async getVerificationLogs(e,t){let a=t?"?".concat(new URLSearchParams(Object.entries(t).map(e=>{let[t,a]=e;return[t,String(a)]}))):"",n=await fetch("/api/guild/".concat(e,"/verification/logs").concat(a),{credentials:"include"});if(!n.ok)throw Error("Failed to fetch verification logs");return n.json()},async purgeVerificationLogs(e){let t=await fetch("/api/guild/".concat(e,"/verification/logs"),{method:"DELETE",credentials:"include"});if(!t.ok)throw Error("Failed to purge verification logs");return t.json()}}},2837:function(e,t,a){"use strict";function n(){return new URL(window.location.href).searchParams.get("guildId")||localStorage.getItem("guildId")}function r(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=(e||"").trim();if(a?localStorage.setItem("guildId",a):localStorage.removeItem("guildId"),t)try{let e=new URL(window.location.href);a?e.searchParams.set("guildId",a):e.searchParams.delete("guildId"),window.history.replaceState({},"",e.toString())}catch(e){}}a.d(t,{J:function(){return r},_:function(){return n}})}},function(e){e.O(0,[231,971,23,744],function(){return e(e.s=1387)}),_N_E=e.O()}]);