(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[367],{3865:function(e,t,r){Promise.resolve().then(r.bind(r,3621)),Promise.resolve().then(r.bind(r,912)),Promise.resolve().then(r.bind(r,1481))},3621:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var n=r(7437),i=r(2265),l=r(2837);function s(e){let{data:t,width:r=400,height:i=40,className:l}=e,s=t&&t.length?t:[0],a=Math.min(...s),o=Math.max(1,Math.max(...s)-a),c=s.map((e,t)=>{let n=t/Math.max(1,s.length-1)*r,l=i-(e-a)/o*i;return"".concat(n,",").concat(l)}).join(" ");return(0,n.jsxs)("svg",{viewBox:"0 0 ".concat(r," ").concat(i),width:"100%",height:i,className:l,"aria-hidden":!0,children:[(0,n.jsx)("polyline",{fill:"none",stroke:"url(#g)",strokeWidth:"2",points:c}),(0,n.jsx)("defs",{children:(0,n.jsxs)("linearGradient",{id:"g",x1:"0",y1:"0",x2:"1",y2:"0",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#7C3AED"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#60A5FA"})]})})]})}var a=r(8183);function o(){var e,t,r,o,c,d,u,f;let m=(0,l._)(),[x,h]=(0,i.useState)(null),[v,p]=(0,i.useState)(!1),[g,j]=(0,i.useState)([]),{toast:w}=(0,a.p)();return(0,i.useEffect)(()=>{let e;if(!m)return;let t=!1,r=async()=>{try{let r=await fetch("/api/guild/".concat(m,"/performance"),{credentials:"include"});if(!r.ok)throw Error("Falha ao obter performance");let n=await r.json();if(!t){var e;h(n);let t=Number((null==n?void 0:null===(e=n.metrics)||void 0===e?void 0:e.memoryMB)||0);j(e=>[...e.slice(-99),t])}}catch(e){t||w({type:"error",title:"Erro de performance",description:null==e?void 0:e.message})}};return p(!0),r().finally(()=>p(!1)),e=window.setInterval(r,5e3),()=>{t=!0,window.clearInterval(e)}},[m,w]),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{className:"card p-4",children:[(0,n.jsx)("div",{className:"text-xs text-neutral-400",children:"Uptime"}),(0,n.jsx)("div",{className:"text-2xl font-bold",children:(f=null==x?void 0:null===(e=x.metrics)||void 0===e?void 0:e.uptimeSeconds)||0===f?"".concat(Math.floor(f/86400),"d ").concat(Math.floor(f%86400/3600),"h ").concat(Math.floor(f%3600/60),"m"):"-"})]}),(0,n.jsxs)("div",{className:"card p-4",children:[(0,n.jsx)("div",{className:"text-xs text-neutral-400",children:"Mem\xf3ria (RSS)"}),(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[null!==(c=null==x?void 0:null===(t=x.metrics)||void 0===t?void 0:t.memoryMB)&&void 0!==c?c:"-"," MB"]})]}),(0,n.jsxs)("div",{className:"card p-4",children:[(0,n.jsx)("div",{className:"text-xs text-neutral-400",children:"Heap"}),(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[null!==(d=null==x?void 0:null===(r=x.metrics)||void 0===r?void 0:r.heapUsedMB)&&void 0!==d?d:"-"," MB"]})]}),(0,n.jsxs)("div",{className:"card p-4",children:[(0,n.jsx)("div",{className:"text-xs text-neutral-400",children:"Bot WS Ping"}),(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[null!==(u=null==x?void 0:null===(o=x.metrics)||void 0===o?void 0:o.apiPing)&&void 0!==u?u:"-"," ms"]})]})]}),(0,n.jsxs)("div",{className:"card p-4",children:[(0,n.jsx)("div",{className:"text-sm mb-2",children:"Mem\xf3ria (\xfaltimas leituras)"}),(0,n.jsx)(s,{data:g,height:48,className:"w-full"})]})]})}},8183:function(e,t,r){"use strict";r.d(t,{ToasterProvider:function(){return a},p:function(){return s}});var n=r(7437),i=r(2265);let l=(0,i.createContext)(null);function s(){let e=(0,i.useContext)(l);if(!e)throw Error("useToast must be used within <ToasterProvider />");return e}function a(e){let{children:t}=e,[r,s]=(0,i.useState)([]),a=(0,i.useRef)(0),o=(0,i.useCallback)(e=>{s(t=>t.filter(t=>t.id!==e))},[]),c=(0,i.useCallback)(e=>{let t="".concat(Date.now(),"_").concat(a.current++),r={id:t,...e};s(e=>[...e,r]),window.setTimeout(()=>o(t),4500)},[o]),d=(0,i.useMemo)(()=>({toast:c}),[c]);return(0,n.jsxs)(l.Provider,{value:d,children:[t,(0,n.jsx)("div",{className:"fixed z-50 right-4 bottom-4 flex flex-col gap-2 w-[min(92vw,380px)]",role:"status","aria-live":"polite",children:r.map(e=>(0,n.jsxs)("div",{className:"rounded-xl border p-3 shadow-lg backdrop-blur card ".concat("success"===e.type?"border-emerald-700/60":"error"===e.type?"border-rose-700/60":"border-neutral-700/60"),children:[e.title&&(0,n.jsx)("div",{className:"text-sm font-semibold mb-0.5",children:e.title}),e.description&&(0,n.jsx)("div",{className:"text-xs text-neutral-300",children:e.description})]},e.id))})]})}},2837:function(e,t,r){"use strict";function n(){return new URL(window.location.href).searchParams.get("guildId")||localStorage.getItem("guildId")}function i(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=(e||"").trim();if(r?localStorage.setItem("guildId",r):localStorage.removeItem("guildId"),t)try{let e=new URL(window.location.href);r?e.searchParams.set("guildId",r):e.searchParams.delete("guildId"),window.history.replaceState({},"",e.toString())}catch(e){}}r.d(t,{J:function(){return i},_:function(){return n}})},912:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return i}});let n=r(5592);function i(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return r}},1481:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return l}});let n=r(7437),i=r(8512);function l(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,i.getExpectedRequestStore)("next/dynamic css"),l=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));l.push(...t)}}return 0===l.length?null:(0,n.jsx)(n.Fragment,{children:l.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=3865)}),_N_E=e.O()}]);