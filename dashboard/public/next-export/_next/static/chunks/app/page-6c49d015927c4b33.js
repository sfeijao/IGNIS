(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1387:function(t,e,a){Promise.resolve().then(a.bind(a,1262)),Promise.resolve().then(a.t.bind(a,231,23))},1262:function(t,e,a){"use strict";a.d(e,{default:function(){return c}});var l=a(7437),n=a(2265);function r(t){let{label:e,value:a,dotColor:n}=t;return(0,l.jsxs)("div",{className:"card card-gradient p-5",children:[(0,l.jsxs)("div",{className:"badge mb-2",children:[(0,l.jsx)("span",{className:"dot",style:{backgroundColor:n}}),e]}),(0,l.jsx)("div",{className:"text-2xl font-semibold",children:a})]})}var i=a(9988),o=a(2837);function c(){let[t,e]=(0,n.useState)([{label:"Ativos",value:"—",color:"#10b981"},{label:"Warnings",value:"—",color:"#f59e0b"},{label:"Bans",value:"—",color:"#ef4444"},{label:"Kicks",value:"—",color:"#f97316"},{label:"Tickets",value:"—",color:"#6366f1"},{label:"Mod logs",value:"—",color:"#22d3ee"}]),[a,c]=(0,n.useState)("—"),[s,d]=(0,n.useState)("—"),[u,g]=(0,n.useState)("Dados ser\xe3o carregados ao selecionar um servidor."),[v,f]=(0,n.useState)(!1),h=(0,n.useRef)(null),m=t=>t?t.toLocaleString():"—",p=t=>{var e,a,l,n;for(let r of[null==t?void 0:t.lastActivity,null==t?void 0:t.lastEventAt,null==t?void 0:t.lastLogAt,null==t?void 0:null===(e=t.latest)||void 0===e?void 0:e.timestamp,null==t?void 0:null===(a=t.latest)||void 0===a?void 0:a.at,Array.isArray(null==t?void 0:t.recent)?null===(l=t.recent[0])||void 0===l?void 0:l.timestamp:null,null==t?void 0:null===(n=t.updates)||void 0===n?void 0:n.last].filter(Boolean)){let t=new Date(r);if(!isNaN(t.getTime()))return t}return null},w=async()=>{let t=(0,o._)();if(t){f(!0);try{var a,l,n,r,s,u,v,h,w,b,k,S,j,x,y,N,L,E,P,O;let o=await i.h.getLogStats(t);if(!o)return;let f=[{label:"Ativos",value:String(null!==(k=null===(a=o.totals)||void 0===a?void 0:a.activeModerators)&&void 0!==k?k:"—"),color:"#10b981"},{label:"Warnings",value:String(null!==(S=null===(l=o.totals)||void 0===l?void 0:l.warnings)&&void 0!==S?S:"—"),color:"#f59e0b"},{label:"Bans",value:String(null!==(j=null===(n=o.totals)||void 0===n?void 0:n.bans)&&void 0!==j?j:"—"),color:"#ef4444"},{label:"Kicks",value:String(null!==(x=null===(r=o.totals)||void 0===r?void 0:r.kicks)&&void 0!==x?x:"—"),color:"#f97316"},{label:"Tickets",value:String(null!==(y=null===(s=o.totals)||void 0===s?void 0:s.tickets)&&void 0!==y?y:"—"),color:"#6366f1"},{label:"Mod logs",value:String(null!==(N=null===(u=o.totals)||void 0===u?void 0:u.logs)&&void 0!==N?N:"—"),color:"#22d3ee"}];e(f);let R=o.updatedAt?new Date(o.updatedAt):new Date;c(R.toLocaleString());let A=null!==(L=null===(v=o.totals)||void 0===v?void 0:v.warnings)&&void 0!==L?L:0,U=null!==(E=null===(h=o.totals)||void 0===h?void 0:h.bans)&&void 0!==E?E:0,F=null!==(P=null===(w=o.totals)||void 0===w?void 0:w.kicks)&&void 0!==P?P:0,I=null!==(O=null===(b=o.totals)||void 0===b?void 0:b.tickets)&&void 0!==O?O:0;g("Resumo r\xe1pido: ".concat(A," warnings, ").concat(U," bans, ").concat(F," kicks, ").concat(I," tickets."));let T=p(o);d(m(T))}catch(t){}finally{f(!1)}}};return(0,n.useEffect)(()=>(w(),h.current&&clearInterval(h.current),h.current=setInterval(w,12e4),()=>{h.current&&clearInterval(h.current)}),[]),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("div",{className:"card p-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-neutral-200",children:"Status & Resumo"}),(0,l.jsx)("p",{className:"text-xs text-neutral-400 mt-1",children:u}),(0,l.jsxs)("p",{className:"text-xs text-neutral-400 mt-1",children:["\xdaltima atividade: ",s]})]}),(0,l.jsxs)("div",{className:"text-xs text-neutral-400 flex items-center gap-2",children:[v&&(0,l.jsx)("span",{className:"inline-block h-3 w-3 rounded-full border-2 border-neutral-500 border-t-transparent animate-spin","aria-label":"Atualizando"}),(0,l.jsxs)("span",{children:[v?"Atualizando…":"Atualizado",": ",a]})]})]})}),(0,l.jsx)("div",{className:"grid grid-cols-3 gap-3",children:t.map(t=>(0,l.jsx)(r,{label:t.label,value:t.value,dotColor:t.color},t.label))})]})}},9988:function(t,e,a){"use strict";a.d(e,{h:function(){return l}});let l={async getLogStats(t,e){let a=e?"?".concat(new URLSearchParams(Object.entries(e).map(t=>{let[e,a]=t;return[e,String(a)]}))):"",l=await fetch("/api/guild/".concat(t,"/logs/stats").concat(a),{credentials:"include"});if(!l.ok)throw Error("Failed to fetch stats");return l.json()},async getLogs(t,e){let a=e?"?".concat(new URLSearchParams(Object.entries(e).map(t=>{let[e,a]=t;return[e,String(a)]}))):"",l=await fetch("/api/guild/".concat(t,"/logs").concat(a),{credentials:"include"});if(!l.ok)throw Error("Failed to fetch logs");return l.json()},exportLogsUrl(t,e){let a=e?"?".concat(new URLSearchParams(Object.entries(e).map(t=>{let[e,a]=t;return[e,String(a)]}))):"";return"/api/guild/".concat(t,"/logs/export").concat(a)},async getSettings(t){let e=await fetch("/api/guild/".concat(t,"/settings"),{credentials:"include"});if(!e.ok)throw Error("Failed to fetch settings");return e.json()},async postSettings(t,e){let a=await fetch("/api/guild/".concat(t,"/settings"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!a.ok)throw Error("Failed to save settings");return a.json()},async getRoles(t){let e=await fetch("/api/guild/".concat(t,"/roles"),{credentials:"include"});if(!e.ok)throw Error("Failed to fetch roles");return e.json()},async getMembers(t,e){let a=e?new URLSearchParams(Object.entries(e).filter(t=>{let[,e]=t;return null!=e}).map(t=>{let[e,a]=t;return[e,String(a)]})).toString():"",l=await fetch("/api/guild/".concat(t,"/members").concat(a?"?".concat(a):""),{credentials:"include"});if(!l.ok)throw Error("Failed to fetch members");return l.json()},async getCurrentUser(){let t=await fetch("/api/user",{credentials:"include"});if(!t.ok)throw Error("Failed to fetch current user");return t.json()},async getTickets(t,e){let a=e?"?".concat(new URLSearchParams(Object.entries(e).map(t=>{let[e,a]=t;return[e,String(a)]}))):"",l=await fetch("/api/guild/".concat(t,"/tickets").concat(a),{credentials:"include"});if(!l.ok)throw Error("Failed to fetch tickets");return l.json()},exportTicketsUrl(t,e){let a=e?"?".concat(new URLSearchParams(Object.entries(e).map(t=>{let[e,a]=t;return[e,String(a)]}))):"";return"/api/guild/".concat(t,"/tickets/export").concat(a)},async getTicketDetails(t,e){let a=await fetch("/api/guild/".concat(t,"/tickets/").concat(e),{credentials:"include"});if(!a.ok)throw Error("Failed to fetch ticket details");return a.json()},async getTicketLogs(t,e,a){let l=a?"?".concat(new URLSearchParams(Object.entries(a).map(t=>{let[e,a]=t;return[e,String(a)]}))):"",n=await fetch("/api/guild/".concat(t,"/tickets/").concat(e,"/logs").concat(l),{credentials:"include"});if(!n.ok)throw Error("Failed to fetch ticket logs");return n.json()},async getTicketMessages(t,e,a){let l=a?"?".concat(new URLSearchParams(Object.entries(a).map(t=>{let[e,a]=t;return[e,String(a)]}))):"",n=await fetch("/api/guild/".concat(t,"/tickets/").concat(e,"/messages").concat(l),{credentials:"include"});if(!n.ok)throw Error("Failed to fetch ticket messages");return n.json()},async ticketAction(t,e,a,l){let n=await fetch("/api/guild/".concat(t,"/tickets/").concat(e,"/action"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:a,data:l})});if(!n.ok)throw Error("Failed to perform ticket action");return n.json()}}},2837:function(t,e,a){"use strict";function l(){return new URL(window.location.href).searchParams.get("guildId")||localStorage.getItem("guildId")}function n(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=(t||"").trim();if(a?localStorage.setItem("guildId",a):localStorage.removeItem("guildId"),e)try{let t=new URL(window.location.href);a?t.searchParams.set("guildId",a):t.searchParams.delete("guildId"),window.history.replaceState({},"",t.toString())}catch(t){}}a.d(e,{J:function(){return n},_:function(){return l}})}},function(t){t.O(0,[231,971,23,744],function(){return t(t.s=1387)}),_N_E=t.O()}]);