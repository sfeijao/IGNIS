const logger = require('../utils/logger');
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[360],{8819:function(e,a,n){Promise.resolve().then(n.bind(n,1313))},1313:function(e,a,n){"use strict";n.d(a,{default:function(){return r}});var t=n(7437),s=n(2265),l=n(2837),c=n(7814),o=n(9988);function r(){let{t:e}=(0,c.QT)(),[a,n]=(0,s.useState)(null),[r,i]=(0,s.useState)([]),[d,m]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),[p,x]=(0,s.useState)(null),[g,f]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[N,j]=(0,s.useState)(""),[v,C]=(0,s.useState)(""),[w,S]=(0,s.useState)([]),_=e=>{switch(String("string"==typeof e?e:(null==e?void 0:e.type)||"").toLowerCase()){case"guild_text":case"text":return"Text";case"guild_announcement":case"announcement":return"Announcement";case"guild_voice":case"voice":return"Voice";case"guild_category":case"category":return"Category";default:return"Channel"}};(0,s.useEffect)(()=>{n((0,l._)())},[]);let k=async a=>{m(!0),h(null),x(null);try{let e=await o.h.getCommands(a),n=(null==e?void 0:e.commands)||e||[];i(n)}catch(a){h((null==a?void 0:a.message)||e("commands.loadFailed"))}finally{m(!1)}};(0,s.useEffect)(()=>{a&&(k(a),(async()=>{try{let e=await o.h.getChannels(a);S(e.channels||e||[])}catch(e){ logger.debug('Caught error:', e?.message || e); }})())},[a]);let E=async n=>{if(a){m(!0),h(null),x(null);try{let e=await o.h.postCommand(a,n);x(JSON.stringify(e)),await k(a)}catch(a){h((null==a?void 0:a.message)||e("commands.actionFailed"))}finally{m(!1)}}},L=(0,s.useMemo)(()=>{let e=g.trim().toLowerCase();return e?r.filter(a=>a.name.toLowerCase().includes(e)||(a.description||"").toLowerCase().includes(e)):r},[r,g]);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:e("commands.title")}),(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>a&&k(a),title:e("common.reload"),children:e("common.reload")}),(0,t.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>E({action:"deploy"}),title:e("commands.redeploy"),children:e("commands.redeploy")}),(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>E({action:"sync"}),title:e("commands.sync"),children:e("commands.sync")}),(0,t.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>E({action:"clear"}),title:e("commands.clear.title"),children:e("commands.clear")}),(0,t.jsx)("input",{className:"input",placeholder:e("common.search"),value:g,onChange:e=>f(e.target.value)})]}),u&&(0,t.jsx)("div",{className:"text-red-400",children:u}),p&&(0,t.jsx)("pre",{className:"text-xs opacity-70 max-h-40 overflow-auto",children:p}),(0,t.jsxs)("section",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:e("commands.run.title")}),(0,t.jsxs)("div",{className:"card-body grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,t.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-sm opacity-80",children:e("commands.form.name")}),(0,t.jsx)("input",{className:"input",value:y,onChange:e=>b(e.target.value),placeholder:e("commands.form.name.placeholder"),title:e("commands.form.name.title")})]}),(0,t.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-sm opacity-80",children:e("commands.form.args")}),(0,t.jsx)("input",{className:"input",value:N,onChange:e=>j(e.target.value),placeholder:e("commands.form.args.placeholder"),title:e("commands.form.args.title")})]}),(0,t.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-sm opacity-80",children:e("commands.form.channel")}),(0,t.jsxs)("select",{className:"input",value:v,onChange:e=>C(e.target.value),title:e("commands.form.channel.title"),children:[(0,t.jsx)("option",{value:"",children:"â€”"}),w.filter(e=>{let a=String(e.type||"").toLowerCase();return a.includes("text")||a.includes("announcement")}).map(e=>(0,t.jsx)("option",{value:e.id,children:"#".concat(e.name," (").concat(_(e),")")},e.id))]})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>E({action:"run",name:y,args:N,channelId:v||void 0}),disabled:!y,children:e("commands.runButton")})})]})]}),(0,t.jsxs)("section",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:e("commands.registered")}),(0,t.jsxs)("div",{className:"card-body grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",role:"status","aria-live":"polite","aria-busy":d,children:[d&&Array.from({length:6}).map((e,a)=>(0,t.jsx)("div",{className:"p-3 rounded-lg bg-neutral-800/40 border border-neutral-800 animate-pulse h-20"},a)),!d&&L.map(a=>(0,t.jsxs)("div",{className:"p-3 rounded-lg bg-neutral-800/50 border border-neutral-800",children:[(0,t.jsxs)("div",{className:"font-medium",children:["/",a.name]}),(0,t.jsx)("div",{className:"text-xs opacity-70",children:a.description||e("commands.noDescription")})]},a.id||a.name)),!d&&0===L.length&&(0,t.jsx)("div",{className:"opacity-70 text-sm",children:e("commands.none")})]})]})]})}}},function(e){e.O(0,[814,482,971,23,744],function(){return e(e.s=8819)}),_N_E=e.O()}]);