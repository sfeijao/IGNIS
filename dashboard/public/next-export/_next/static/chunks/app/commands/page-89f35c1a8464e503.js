(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[360],{8819:function(e,a,n){Promise.resolve().then(n.bind(n,1313))},1313:function(e,a,n){"use strict";n.d(a,{default:function(){return o}});var t=n(7437),s=n(2265),l=n(2837),c=n(7814),i=n(9988);function o(){let{t:e}=(0,c.QT)(),[a,n]=(0,s.useState)(null),[o,r]=(0,s.useState)([]),[d,m]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),[x,p]=(0,s.useState)(null),[g,f]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[N,j]=(0,s.useState)(""),[v,C]=(0,s.useState)([]),S=e=>{switch(String("string"==typeof e?e:(null==e?void 0:e.type)||"").toLowerCase()){case"guild_text":case"text":return"Text";case"guild_announcement":case"announcement":return"Announcement";case"guild_voice":case"voice":return"Voice";case"guild_category":case"category":return"Category";default:return"Channel"}};(0,s.useEffect)(()=>{n((0,l._)())},[]);let _=async a=>{m(!0),h(null),p(null);try{let e=await i.h.getCommands(a),n=(null==e?void 0:e.commands)||e||[];r(n)}catch(a){h((null==a?void 0:a.message)||e("commands.loadFailed"))}finally{m(!1)}};(0,s.useEffect)(()=>{a&&(_(a),(async()=>{try{let e=await i.h.getChannels(a);C(e.channels||e||[])}catch(e){}})())},[a]);let w=async n=>{if(a){m(!0),h(null),p(null);try{let e=await i.h.postCommand(a,n);p(JSON.stringify(e)),await _(a)}catch(a){h((null==a?void 0:a.message)||e("commands.actionFailed"))}finally{m(!1)}}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:e("commands.title")}),(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>a&&_(a),title:e("common.reload"),children:e("common.reload")}),(0,t.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>w({action:"deploy"}),title:e("commands.redeploy"),children:e("commands.redeploy")}),(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>w({action:"sync"}),title:e("commands.sync"),children:e("commands.sync")}),(0,t.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>w({action:"clear"}),title:e("commands.clear.title"),children:e("commands.clear")})]}),u&&(0,t.jsx)("div",{className:"text-red-400",children:u}),x&&(0,t.jsx)("pre",{className:"text-xs opacity-70 max-h-40 overflow-auto",children:x}),(0,t.jsxs)("section",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:e("commands.run.title")}),(0,t.jsxs)("div",{className:"card-body grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,t.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-sm opacity-80",children:e("commands.form.name")}),(0,t.jsx)("input",{className:"input",value:g,onChange:e=>f(e.target.value),placeholder:e("commands.form.name.placeholder"),title:e("commands.form.name.title")})]}),(0,t.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-sm opacity-80",children:e("commands.form.args")}),(0,t.jsx)("input",{className:"input",value:y,onChange:e=>b(e.target.value),placeholder:e("commands.form.args.placeholder"),title:e("commands.form.args.title")})]}),(0,t.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-sm opacity-80",children:e("commands.form.channel")}),(0,t.jsxs)("select",{className:"input",value:N,onChange:e=>j(e.target.value),title:e("commands.form.channel.title"),children:[(0,t.jsx)("option",{value:"",children:"â€”"}),v.filter(e=>{let a=String(e.type||"").toLowerCase();return a.includes("text")||a.includes("announcement")}).map(e=>(0,t.jsx)("option",{value:e.id,children:"#".concat(e.name," (").concat(S(e),")")},e.id))]})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>w({action:"run",name:g,args:y,channelId:N||void 0}),disabled:!g,children:e("commands.runButton")})})]})]}),(0,t.jsxs)("section",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:e("commands.registered")}),(0,t.jsx)("div",{className:"card-body grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:o.map(a=>(0,t.jsxs)("div",{className:"p-3 rounded-lg bg-neutral-800/50 border border-neutral-800",children:[(0,t.jsxs)("div",{className:"font-medium",children:["/",a.name]}),(0,t.jsx)("div",{className:"text-xs opacity-70",children:a.description||e("commands.noDescription")})]},a.id||a.name))})]})]})}}},function(e){e.O(0,[814,482,971,23,744],function(){return e(e.s=8819)}),_N_E=e.O()}]);