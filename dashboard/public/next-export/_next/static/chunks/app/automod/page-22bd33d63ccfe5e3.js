(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[172],{6820:function(e,t,s){Promise.resolve().then(s.bind(s,965))},965:function(e,t,s){"use strict";s.d(t,{default:function(){return d}});var a=s(7437),n=s(2265),l=s(2837),r=s(9988),c=s(7814);function d(){let{t:e}=(0,c.QT)(),[t,s]=(0,n.useState)(null),[d,i]=(0,n.useState)([]),[o,m]=(0,n.useState)(!1),[u,x]=(0,n.useState)(null),[h,b]=(0,n.useState)(""),[p,v]=(0,n.useState)(0);(0,n.useEffect)(()=>{s((0,l._)())},[]);let j=async e=>{m(!0),x(null);try{let t=await r.h.getAutomodEvents(e,{resolved:!1});i((null==t?void 0:t.events)||t||[])}catch(e){x((null==e?void 0:e.message)||"Erro ao carregar eventos")}finally{m(!1)}};(0,n.useEffect)(()=>{t&&(v(0),j(t))},[t]);let N=async(e,s)=>{if(t){m(!0);try{await r.h.reviewAutomodEvent(t,e,"approve"===s?"confirm":"release"),await j(t)}finally{m(!1)}}},f=(0,n.useMemo)(()=>{let e=h.trim().toLowerCase();return e?d.filter(t=>[t.type,t.userId,t.content].map(e=>(e||"").toLowerCase()).join(" ").includes(e)):d},[d,h]),g=(0,n.useMemo)(()=>f.slice(20*p,20*p+20),[f,p]),y=Math.max(1,Math.ceil(f.length/20)),w=Array.from({length:4}).map((e,t)=>(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-neutral-800/30 border border-neutral-800 animate-pulse",children:[(0,a.jsx)("div",{className:"h-3 w-40 bg-neutral-700 rounded mb-2"}),(0,a.jsx)("div",{className:"h-3 w-60 bg-neutral-700 rounded mb-2"}),(0,a.jsx)("div",{className:"h-8 w-full bg-neutral-700/60 rounded"})]},t));return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:e("automod.title")}),(0,a.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:()=>t&&j(t),title:e("common.reload"),children:e("common.reload")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{className:"input w-48",placeholder:e("common.search"),value:h,onChange:e=>{b(e.target.value),v(0)}}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary btn-xs",disabled:0===p,onClick:()=>v(e=>Math.max(0,e-1)),children:"<"}),(0,a.jsxs)("span",{className:"opacity-70",children:[p+1,"/",y]}),(0,a.jsx)("button",{type:"button",className:"btn btn-secondary btn-xs",disabled:p>=y-1,onClick:()=>v(e=>Math.min(y-1,e+1)),children:">"})]})]})]}),u&&(0,a.jsx)("div",{className:"text-red-400",children:u}),(0,a.jsxs)("section",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:e("automod.queue")}),(0,a.jsxs)("div",{className:"card-body grid gap-3",children:[o&&(0,a.jsx)("div",{className:"grid md:grid-cols-2 gap-3",children:w}),!o&&0===g.length&&(0,a.jsx)("div",{className:"opacity-70",children:e("automod.empty")}),!o&&g.map(t=>(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-neutral-800/50 border border-neutral-800",children:[(0,a.jsxs)("div",{className:"text-sm opacity-70",children:[t.type," • ",t.userId," • ",new Date(t.createdAt||Date.now()).toLocaleString()]}),(0,a.jsx)("div",{className:"mt-1",children:t.content||e("automod.content.empty")}),(0,a.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-primary btn-xs",onClick:()=>N(t.id,"approve"),children:e("automod.approve")}),(0,a.jsx)("button",{type:"button",className:"btn btn-danger btn-xs",onClick:()=>N(t.id,"reject"),children:e("automod.reject")})]})]},t.id))]})]})]})}}},function(e){e.O(0,[814,482,971,23,744],function(){return e(e.s=6820)}),_N_E=e.O()}]);