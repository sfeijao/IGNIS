"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[630],{7630:function(e,a,t){t.r(a),t.d(a,{default:function(){return c}});var l=t(7437),n=t(2265),i=t(2837),r=t(7814);function c(){let e=(0,i._)(),[a,t]=(0,n.useState)({enabled:!1,method:"captcha",channelId:"",roleId:""}),[c,d]=(0,n.useState)(!1),[s,o]=(0,n.useState)("idle"),{t:u}=(0,r.QT)();(0,n.useEffect)(()=>{if(!e)return;let a=!1;return(async()=>{try{let l=await fetch("/api/guild/".concat(e,"/verification/config"),{credentials:"include"});if(l.ok){let e=await l.json();a||t({enabled:!!e.enabled,channelId:e.channelId||"",roleId:e.roleId||"",method:e.method||"captcha"})}}catch(e){}})(),()=>{a=!0}},[e]);let h=async()=>{if(e){d(!0),o("saving");try{let t=await fetch("/api/guild/".concat(e,"/verification/config"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)});o(t.ok?"ok":"err")}catch(e){o("err")}finally{d(!1),setTimeout(()=>o("idle"),1500)}}};return(0,l.jsxs)("div",{className:"space-y-3",children:[!e&&(0,l.jsx)("div",{className:"card p-4 text-sm text-neutral-400",children:u("verification.selectGuild")}),(0,l.jsxs)("form",{className:"card p-5 max-w-xl space-y-4",onSubmit:e=>{e.preventDefault(),h()},children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{id:"v-enabled",type:"checkbox",checked:!!a.enabled,onChange:e=>t(a=>({...a,enabled:e.target.checked}))}),(0,l.jsx)("label",{htmlFor:"v-enabled",children:u("verification.enable")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:u("verification.method")}),(0,l.jsxs)("select",{className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",value:a.method,onChange:e=>t(a=>({...a,method:e.target.value})),title:"M\xe9todo de verifica\xe7\xe3o",children:[(0,l.jsx)("option",{value:"captcha",children:u("verification.method.captcha")}),(0,l.jsx)("option",{value:"button",children:u("verification.method.button")})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:u("verification.channel")}),(0,l.jsx)("input",{className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",placeholder:"Canal ID",value:a.channelId||"",onChange:e=>t(a=>({...a,channelId:e.target.value}))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1",children:u("verification.role")}),(0,l.jsx)("input",{className:"w-full rounded-lg bg-neutral-900 border border-neutral-800 px-3 py-2",placeholder:"Role ID",value:a.roleId||"",onChange:e=>t(a=>({...a,roleId:e.target.value}))})]}),(0,l.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,l.jsx)("button",{disabled:c,className:"px-4 py-2 rounded-lg bg-brand-600 hover:bg-brand-700 font-medium disabled:opacity-60",children:u("saving"===s?"verification.saving":"verification.save")}),"ok"===s&&(0,l.jsx)("span",{className:"text-emerald-400 text-sm",children:u("verification.saved")}),"err"===s&&(0,l.jsx)("span",{className:"text-rose-400 text-sm",children:u("verification.saveFailed")})]})]})]})}},2837:function(e,a,t){function l(){return new URL(window.location.href).searchParams.get("guildId")||localStorage.getItem("guildId")}function n(e){let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=(e||"").trim();if(t?localStorage.setItem("guildId",t):localStorage.removeItem("guildId"),a)try{let e=new URL(window.location.href);t?e.searchParams.set("guildId",t):e.searchParams.delete("guildId"),window.history.replaceState({},"",e.toString())}catch(e){}}t.d(a,{J:function(){return n},_:function(){return l}})}}]);