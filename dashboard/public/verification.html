<!DOCTYPE html>
<html lang="pt">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>IGNIS - Verifica√ß√£o</title>
	<link rel="stylesheet" href="/css/style.css" />
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
	<style>
		.card-pad{padding:16px}
		.gap-12{gap:12px}
		.grid-col-2{grid-column: span 2}
		.small{font-size:12px}
		.text-danger{color:#ef4444}
		.hidden{display:none}
		.mb-8{margin-bottom:8px}
		.mt-6{margin-top:6px}
		.mt-8{margin-top:8px}
		.mt-12{margin-top:12px}
		.flex-row{display:flex;gap:8px}
		.align-center{align-items:center}
		.list{list-style:none;padding-left:0}
		.list li{display:flex;align-items:center;justify-content:space-between;background:var(--glass-bg);border:1px solid var(--glass-border);border-radius:8px;padding:8px;margin-bottom:6px}
		.badge{background:var(--bg-card);border:1px solid var(--glass-border);border-radius:6px;padding:2px 6px;font-size:12px;color:var(--text-secondary)}
		.actions button{margin-left:6px}
		.max-w-180{max-width:180px}
		.max-w-120{max-width:120px}
		/* New styles */
		.color-input{max-width:120px}
		.color-picker{width:48px;height:40px;border:none;background:transparent}
		.preview-embed{border-left:4px solid #7c3aed;padding:12px;border-radius:8px;background:var(--bg-card)}
		.preview-title{font-weight:600}
	</style>
	</head>
<body>
	<nav class="navbar">
		<div class="navbar-container">
			<div class="navbar-brand"><i class="fas fa-user-check"></i> Verifica√ß√£o</div>
			<div class="navbar-user"><a href="/dashboard" class="btn btn-glass"><i class="fas fa-home"></i> Dashboard</a></div>
		</div>
	</nav>
	<main class="main-content">
		<div class="container">
			<section class="dashboard-section">
				<div class="section-header">
					<h1 class="section-title"><i class="fas fa-shield"></i> Sistema de Verifica√ß√£o</h1>
					<p class="text-secondary">Captcha por bot√£o/imagem, rea√ß√£o ou formul√°rio.</p>
				</div>
				<div class="glass-card card-pad">
					<div class="grid grid-2 gap-12">
						<div>
							<label for="template">Template</label>
							<select id="template" class="input" title="Escolher layout do painel">
								<option value="minimal">Minimal</option>
								<option value="rich">Rich</option>
							</select>
						</div>
						<div>
							<label for="mode">Modo</label>
							<select id="mode" class="input" title="Selecionar modo de dificuldade">
								<option value="easy">F√°cil</option>
								<option value="medium">M√©dio</option>
								<option value="hard">Hard</option>
							</select>
						</div>
						<div>
							<label for="method">M√©todo</label>
							<select id="method" class="input" title="Selecionar m√©todo de verifica√ß√£o">
								<option value="button">Captcha por bot√£o</option>
								<option value="image">Captcha de imagem</option>
								<option value="reaction">Verifica√ß√£o por rea√ß√£o</option>
								<option value="form">Formul√°rio</option>
							</select>
							<p id="methodHelp" class="text-secondary small mt-6" aria-live="polite"></p>
						<div>
						<div>
							<label for="verifiedRole">Cargo verificado</label>
							<select id="verifiedRole" class="input" title="Cargo atribu√≠do ap√≥s verifica√ß√£o"></select>
						<div class="grid-col-2">
							<label for="title">T√≠tulo</label>
							<input id="title" class="input" placeholder="Ex.: Verifica√ß√£o do Servidor" maxlength="100" />
							<label for="description" class="mt-6">Descri√ß√£o</label>
							<textarea id="description" class="input" placeholder="Mensagem do painel" rows="3" maxlength="2000"></textarea>
						</div>
						<div class="grid-col-2">
							<div class="grid grid-2 gap-12">
								<div>
									<label for="buttonLabel">Texto do bot√£o</label>
									<input id="buttonLabel" class="input" placeholder="Verificar" maxlength="80" />
								</div>
								<div>
									<label for="color">Cor</label>
										<div class="flex-row align-center">
											<input id="color" class="input color-input" placeholder="#7C3AED" maxlength="7" />
											<input id="colorPicker" type="color" value="#7c3aed" class="color-picker" title="Selecionar cor" />
										</div>
										<small class="text-secondary">Hex RGB, ex.: #7C3AED. Deixe em branco (e outros campos de painel) para usar os padr√µes guardados.</small>
								</div>
							</div>
						</div>
						</div>

					<!-- Live Preview -->
					<div class="glass-card card-pad mt-12" id="previewCard" aria-live="polite">
						<h3 class="section-subtitle"><i class="fas fa-eye"></i> Pr√©-visualiza√ß√£o</h3>
						<div id="previewEmbed" class="mt-8 preview-embed">
							<div id="previewTitle" class="preview-title">üîí Verifica√ß√£o do Servidor</div>
							<div id="previewDesc" class="text-secondary mt-6">Clica em Verificar para concluir e ganhar acesso aos canais.</div>
							<div id="previewFooter" class="small mt-8">IGNIS COMMUNITY‚Ñ¢ ‚Ä¢ Sistema de verifica√ß√£o</div>
							<div id="previewButton" class="mt-8"><button class="btn btn-primary btn-sm"><i class="fas fa-check"></i> Verificar</button></div>
							<div id="previewReaction" class="mt-8 hidden"><span class="badge">Reage com ‚úÖ</span></div>
						</div>
					</div>
						<div>
							<label for="unverifiedRole">Cargo n√£o verificado</label>
							<select id="unverifiedRole" class="input" title="Cargo atribu√≠do enquanto n√£o verificado"></select>
						</div>
						<div>
							<label for="panelChannel">Canal para o painel</label>
							<select id="panelChannel" class="input" title="Canal onde publicar o painel"></select>
						</div>
						<div>
							<label for="cooldownSeconds">Cooldown (segundos)</label>
							<input id="cooldownSeconds" type="number" class="input" min="0" max="3600" value="0" />
							<p class="text-secondary small mt-6">Aguarde este tempo entre tentativas de verifica√ß√£o. 0 para desativar.</p>
						</div>
						<div class="grid-col-2">
							<label for="logFails">Logs quando algu√©m falha</label>
							<label class="switch"><input id="logFails" type="checkbox"><span>Ativar logs</span></label>
						</div>
						<div id="retentionRow" class="grid-col-2 hidden">
							<label for="logFailRetention">Reter logs (dias)</label>
							<input id="logFailRetention" type="number" class="input" min="1" max="90" value="7" />
							<p class="text-secondary small mt-6">M√°ximo 90 dias. Apenas ativo quando os logs est√£o ligados.</p>
						</div>
					</div>

					<div id="formBuilder" class="mt-12 hidden" aria-hidden="true">
						<h3 class="section-subtitle"><i class="fas fa-list-check"></i> Perguntas do formul√°rio</h3>
						<p class="text-secondary small mb-8">Adicione 1-20 perguntas. Suporta tipos: texto curto, texto longo, sim/n√£o, m√∫ltipla escolha, dropdown.</p>
						<p class="text-secondary small mb-8">Nota: atualmente s√£o usadas apenas as primeiras 5 perguntas durante a verifica√ß√£o.</p>
						<div class="mb-8">
							<label for="newQuestionLabel">Pergunta</label>
							<input id="newQuestionLabel" class="input" placeholder="Ex: Qual √© o seu ID do jogo?" />
						</div>
						<div class="grid grid-2 gap-12">
							<div>
								<label for="newQuestionType">Tipo</label>
								<select id="newQuestionType" class="input" title="Selecionar tipo de pergunta">
									<option value="short_text">Texto curto</option>
									<option value="long_text">Texto longo</option>
									<option value="yes_no">Sim/N√£o</option>
									<option value="multiple_choice">M√∫ltipla escolha</option>
									<option value="dropdown">Dropdown</option>
								</select>
							</div>
							<div class="flex-row align-center">
								<label class="switch" title="Obrigat√≥ria?">
									<input id="newQuestionRequired" type="checkbox" />
									<span>Obrigat√≥ria</span>
								</label>
							</div>
						</div>
						<div id="optionsEditor" class="mt-6 hidden">
							<label for="newOptionText">Op√ß√µes</label>
							<div class="flex-row gap-12">
								<input id="newOptionText" class="input" placeholder="Adicionar op√ß√£o" />
								<button id="addOption" type="button" class="btn btn-secondary"><i class="fas fa-plus"></i> Adicionar</button>
							</div>
							<ul id="optionsList" class="list mt-6"></ul>
						</div>
						<div class="mt-8">
							<button id="addQuestion" type="button" class="btn btn-primary"><i class="fas fa-plus-circle"></i> Adicionar pergunta</button>
						</div>
						<ul id="questionsList" class="list mt-12"></ul>
					</div>

					<div class="mt-12">
						<div id="formError" class="text-danger hidden mb-8" role="alert"></div>
						<button id="save" class="btn btn-primary" disabled><i class="fas fa-save"></i> Guardar</button>
						<button id="saveDefaults" class="btn btn-secondary ml-8" title="Guardar como padr√£o para novos pain√©is"><i class="fas fa-bookmark"></i> Guardar Padr√µes do Painel</button>
						<button id="resetDefaults" class="btn btn-glass ml-8" title="Limpar padr√µes guardados"><i class="fas fa-rotate-left"></i> Repor Padr√µes</button>
						<button id="createPanel" class="btn btn-glass ml-8"><i class="fas fa-plus"></i> Criar Painel de Verifica√ß√£o</button>
					</div>
				</div>

				<!-- M√©tricas de Verifica√ß√£o -->
				<div class="glass-card card-pad mt-12">
					<div class="section-header">
						<h2 class="section-title"><i class="fas fa-chart-line"></i> M√©tricas</h2>
						<p class="text-secondary small">Vis√£o geral do sucesso/falha e m√©todos usados.</p>
					</div>
					<div class="flex-row align-center mt-8">
						<label for="metricsWindow">Janela</label>
						<select id="metricsWindow" class="input max-w-180">
							<option value="1h">√öltima 1 hora</option>
							<option value="24h" selected>√öltimas 24 horas</option>
							<option value="7d">√öltimos 7 dias</option>
						</select>
						<button id="metricsRefresh" class="btn btn-glass"><i class="fas fa-rotate"></i> Atualizar</button>
					</div>
					<div class="grid grid-3 gap-12 mt-12">
						<div class="stat-card">
							<div class="stat-title">Sucessos</div>
							<div id="metricSuccess" class="stat-value">‚Äî</div>
						</div>
						<div class="stat-card">
							<div class="stat-title">Falhas</div>
							<div id="metricFail" class="stat-value">‚Äî</div>
						</div>
						<div class="stat-card">
							<div class="stat-title">Total</div>
							<div id="metricTotal" class="stat-value">‚Äî</div>
						</div>
					</div>
					<div class="grid grid-2 gap-12 mt-12">
						<div>
							<h3 class="section-subtitle">Por m√©todo</h3>
							<ul id="byMethodList" class="list mt-6"></ul>
						</div>
						<div>
							<h3 class="section-subtitle">Motivos de falha</h3>
							<ul id="failReasonsList" class="list mt-6"></ul>
						</div>
					</div>
				</div>

				<!-- Logs de Verifica√ß√£o -->
				<div class="glass-card card-pad mt-12">
					<div class="section-header">
						<h2 class="section-title"><i class="fas fa-clipboard-list"></i> Logs</h2>
						<p class="text-secondary small">√öltimos eventos de verifica√ß√£o.</p>
					</div>
					<div class="flex-row align-center mt-8">
						<button id="exportLogs" class="btn btn-secondary"><i class="fas fa-file-export"></i> Exportar JSON</button>
						<label for="pruneDays" class="ml-8">Limpar anteriores a (dias)</label>
						<input id="pruneDays" type="number" class="input max-w-120" min="1" max="365" value="30" />
						<button id="pruneLogs" class="btn btn-danger"><i class="fas fa-broom"></i> Limpar</button>
					</div>
					<ul id="logsList" class="list mt-12"></ul>
				</div>
			</section>
		</div>
	</main>
	<script src="/js/verification.js"></script>
</body>
</html>