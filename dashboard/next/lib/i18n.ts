"use client"

import { useEffect, useMemo, useState } from 'react'

export type Lang = 'pt' | 'en'

const STRINGS: Record<Lang, Record<string, string>> = {
  pt: {
  // Common
  'common.working': 'A trabalhar…',
  'common.loading': 'A carregar…',
  'common.refresh': 'Atualizar',
  'common.save': 'Guardar',
  'common.cancel': 'Cancelar',
  'common.edit': 'Editar',
  'common.remove': 'Remover',
  'common.close': 'Fechar',
  'common.search': 'Pesquisar',
  'common.saved': 'Guardado!',
  'common.saveFailed': 'Falhou ao guardar',
  'common.selectGuild': 'Selecione um servidor.',
  'common.enabled': 'Ativar',
  'common.reload': 'Recarregar',
  'common.create': 'Criar',
  'common.scan': 'Escanear',
  'common.actions': 'Ações',
  // Moderation
  'mod.bulk.title': 'Ações em massa',
  'mod.bulk.userIds': 'IDs dos utilizadores',
  'mod.bulk.hint': 'Separe por vírgula, espaço ou linha. Ex.: 123, 456, 789',
  'mod.bulk.action': 'Ação',
  'mod.action.timeout': 'Timeout',
  'mod.action.kick': 'Expulsar',
  'mod.action.ban': 'Banir',
  'mod.bulk.durationSeconds': 'Duração (segundos)',
  'mod.bulk.deleteMsgSeconds': 'Apagar mensagens (segundos)',
  'mod.reason': 'Razão',
  'mod.reason.placeholder': 'Opcional',
  'mod.bulk.run': 'Executar',
  'mod.bulk.results': 'Resultados',
  'mod.bulk.noUsers': 'Sem utilizadores',
  'mod.bulk.done': 'Concluído',
  // Sidebar labels
  'nav.dashboard': 'Dashboard',
  'nav.plugins': 'Plugins',
  'nav.logs': 'Logs',
  'nav.logs.live': 'Logs ao vivo',
  'nav.moderation': 'Moderação',
  'nav.members': 'Membros',
  'nav.roles': 'Cargos',
  'nav.webhooks': 'Webhooks',
  'nav.verification': 'Verificação',
  'nav.verification.metrics': 'Verificação: métricas',
  'nav.tags': 'Tags',
  'nav.tickets': 'Tickets',
  'nav.tickets.config': 'Tickets: config',
  'nav.tickets.panels': 'Tickets: painéis',
  'nav.commands': 'Comandos',
  'nav.automod': 'Automod',
  'nav.appeals': 'Apelos',
  'nav.settings': 'Settings',
  'nav.diagnostics': 'Diagnósticos',
  'nav.performance': 'Performance',
  // Logs
  'logs.title': 'Logs',
  'logs.search': 'Pesquisa',
  'logs.type': 'Tipo',
  'logs.user': 'User ID',
  'logs.mod': 'Mod ID',
  'logs.export': 'Exportar',
  'logs.clear': 'Limpar',
  'logs.total': 'Total',
  'logs.prev': 'Anterior',
  'logs.next': 'Seguinte',
  'logs.perPage': '{n}/página',
  'logs.perPageSuffix': '/página',
  'logs.none': 'Sem resultados.',
  'logs.loading': 'Carregando…',
  'logs.selectGuild': 'Selecione um servidor para ver os logs.',
  'logs.live.title': 'Logs ao vivo',
  'logs.live.connected': 'conectado',
  'logs.live.disconnected': 'desconectado',
  'logs.live.filter.placeholder': 'Filtrar tipo (ex: messageDelete)',
  'logs.live.reconnect': 'Reconectar',
  // Members
  'members.selectGuild': 'Selecione um servidor para listar membros.',
  'members.search': 'Pesquisar',
  'members.role': 'Cargo',
  'members.limit': 'Limite',
  'members.refresh': 'Refresh',
  'members.manage': 'Gerir',
  'members.notManageable': 'não gerenciável',
  // Tickets
  'tickets.title': 'Tickets',
  'tickets.status': 'Estado',
  'tickets.priority': 'Prioridade',
  'tickets.search': 'Pesquisar',
  'tickets.staffRole': 'Cargo da equipa',
  'tickets.selectRole': 'Selecione cargo',
  'tickets.assignee': 'Responsável',
  'tickets.selectMember': 'Selecione membro',
  'tickets.staffOnly': 'Só staff',
  'tickets.deepFetch': 'Pesquisa profunda',
  'tickets.filtersApplied': 'Filtros aplicados:',
  'tickets.role': 'Cargo',
  'tickets.clearFilters': 'Limpar filtros',
  'tickets.stats.total': 'Total',
  'tickets.stats.open': 'Abertos',
  'tickets.stats.claimed': 'Assumidos',
  'tickets.stats.closed': 'Fechados',
  'tickets.stats.pending': 'Pendentes',
  'tickets.loading': 'A carregar…',
  'tickets.none': 'Nenhum ticket encontrado.',
  'tickets.claimedBy': 'Assumido por',
  'tickets.view': 'Ver',
  'tickets.claim': 'Assumir',
  'tickets.assignToMe': 'Atribuir a mim',
  'tickets.release': 'Libertar',
  'tickets.close': 'Fechar',
  'tickets.selectedSuffix': 'selecionado(s)',
  'tickets.export': 'Exportar',
  'tickets.selectGuildHelp': 'Selecione um servidor: adicione ?guildId=SEU_GUILD_ID à URL ou salve via localStorage.',
  'tickets.perPageSuffix': '/página',
  // Tickets config/panels
  'tickets.config.title': 'Configuração de Tickets',
  'tickets.fields.common': 'Campos comuns',
  'tickets.panelChannelId': 'Canal do painel',
  'tickets.staffRoleId': 'Cargo da equipa',
  'tickets.archiveCategoryId': 'Categoria de arquivo',
  'tickets.logChannelId': 'Canal de logs',
  'tickets.transcriptWebhook': 'Webhook de transcrição',
  'tickets.enabled': 'Ativar tickets',
  'tickets.saved': 'Salvo!',
  'tickets.json.editor': 'Editor JSON (avançado)',
  'tickets.json.revert': 'Reverter',
  'tickets.json.save': 'Salvar JSON',
  'tickets.reload': 'Recarregar',
  'tickets.panels.title': 'Tickets: Painéis e Categorias',
  'tickets.scan': 'Escanear',
  'tickets.scan.done': 'Varredura concluída',
  'tickets.scan.fail': 'Falha ao escanear',
  'tickets.panel.create': 'Criar Painel',
  'tickets.panel.created': 'Painel criado',
  'tickets.panel.createFail': 'Falha ao criar painel',
  'tickets.category.create': 'Criar Categoria',
  'tickets.category.created': 'Categoria criada',
  'tickets.category.createFail': 'Falha ao criar categoria',
  'tickets.panels.list': 'Painéis',
  'tickets.action.sync': 'Sincronizar',
  'tickets.action.messageUpdate': 'Mensagem atualizada',
  'tickets.action.delete': 'Remover',
  'tickets.synced': 'Sincronizado',
  'tickets.removed': 'Removido',
  // Settings
  'settings.title': 'Settings',
  'settings.prefix': 'Prefixo',
  'settings.prefix.placeholder': '!',
  'settings.locale': 'Idioma',
  'settings.locale.pt': 'Português',
  'settings.locale.en': 'Inglês',
  'settings.logsEnabled': 'Ativar logs de moderação',
  'settings.modlogChannelId': 'Canal de mod-log (ID)',
  'settings.modlogChannelId.placeholder': '1234567890',
  'settings.save': 'Guardar definições',
  'settings.saving': 'A guardar…',
  'settings.loading': 'A carregar…',
  // Webhooks
  'webhooks.title': 'Webhooks',
  'webhooks.selectGuild': 'Selecione um servidor para gerir webhooks.',
  'webhooks.type': 'Tipo',
  'webhooks.channelId': 'ID do Canal',
  'webhooks.name': 'Nome',
  'webhooks.create': 'Criar',
  'webhooks.autosetup': 'Auto-setup logs',
  'webhooks.refresh': 'Atualizar',
  'webhooks.loading': 'A carregar…',
  'webhooks.error': 'Falha ao obter webhooks',
  'webhooks.active': 'ativo',
  'webhooks.test': 'Testar',
  'webhooks.remove': 'Remover',
  'webhooks.confirmRemove': 'Remover webhook?',
  'webhooks.created': 'Webhook criado',
  'webhooks.removed': 'Webhook removido',
  'webhooks.test.sent': 'Teste enviado',
  'webhooks.test.fail': 'Falha no teste',
  'webhooks.autosetup.ok': 'Auto-setup concluído',
  'webhooks.autosetup.fail': 'Falha no auto-setup',
  // Verification
  'verification.title': 'Verificação',
  'verification.selectGuild': 'Selecione um servidor para configurar verificação.',
  'verification.enable': 'Ativar verificação',
  'verification.method': 'Método',
  'verification.method.captcha': 'Captcha',
  'verification.method.button': 'Botão',
  'verification.channel': 'Canal',
  'verification.role': 'Cargo verificado',
  'verification.save': 'Guardar',
  'verification.saving': 'Guardando…',
  'verification.saved': 'Guardado!',
  'verification.saveFailed': 'Falhou ao guardar',
  'verification.metrics.title': 'Verificação: Métricas e Logs',
  'verification.metrics.reload': 'Recarregar',
  'verification.metrics.clearLogs': 'Limpar logs',
  'verification.metrics.section': 'Métricas',
  'verification.metrics.noData': 'Sem dados',
  'verification.metrics.recentLogs': 'Logs recentes',
  'verification.metrics.noLogs': 'Sem logs',
  'verification.metrics.error': 'Erro ao carregar métricas',
    'roles.title': 'Gestão de Cargos',
    'roles.selectGuild': 'Selecione um servidor para gerir cargos.',
    'roles.name': 'Nome',
    'roles.color': 'Cor (#RRGGBB)',
    'roles.create': 'Criar',
    'roles.refresh': 'Atualizar',
    'roles.loading': 'A carregar…',
    'roles.remove.confirm': 'Remover cargo?',
    'roles.remove': 'Remover',
    'roles.up': 'Subir',
    'roles.down': 'Descer',
    'roles.selectToEdit': 'Selecione um cargo para editar permissões.',
    'roles.showSeparately': 'Mostrar separado (hoist)',
    'roles.mentionable': 'Mencionável',
    'roles.permissions': 'Permissões',
    'roles.permissions.note': 'Nota: selecionar Administrador concede todas as permissões. Tenha cuidado.',
    'roles.permissions.search': 'Procurar permissões…',
    'roles.permissions.selectAll': 'Selecionar tudo',
    'roles.permissions.clearAll': 'Limpar',
    'roles.save': 'Guardar alterações',
    'roles.updated': 'Cargo atualizado',
    'roles.load.failed': 'Falha ao carregar cargos',
    'roles.role.load.failed': 'Falha ao carregar cargo',
    'roles.move.failed': 'Falha ao mover cargo',
    // Permission labels
    'perm.Administrator': 'Administrador',
    'perm.ManageGuild': 'Gerir Servidor',
    'perm.ManageRoles': 'Gerir Cargos',
    'perm.ManageChannels': 'Gerir Canais',
    'perm.ViewAuditLog': 'Ver Registo de Auditoria',
    'perm.KickMembers': 'Expulsar Membros',
    'perm.BanMembers': 'Banir Membros',
    'perm.ModerateMembers': 'Silenciar/Timeout',
    'perm.ManageNicknames': 'Gerir Nomes',
    'perm.ChangeNickname': 'Alterar Próprio Nome',
    'perm.ManageMessages': 'Gerir Mensagens',
    'perm.MentionEveryone': 'Mencionar @everyone',
    'perm.ManageWebhooks': 'Gerir Webhooks',
    'perm.ManageEmojisAndStickers': 'Gerir Emojis/Stickers',
    'perm.ManageEvents': 'Gerir Eventos',
    'perm.ManageThreads': 'Gerir Threads',
    'perm.CreatePublicThreads': 'Criar Threads Públicas',
    'perm.CreatePrivateThreads': 'Criar Threads Privadas',
    'perm.SendMessages': 'Enviar Mensagens',
    'perm.SendTTSMessages': 'Enviar Mensagens TTS',
    'perm.EmbedLinks': 'Inserir Links',
    'perm.AttachFiles': 'Anexar Ficheiros',
    'perm.ReadMessageHistory': 'Ler Histórico',
    'perm.UseExternalEmojis': 'Usar Emojis Externos',
    'perm.UseExternalStickers': 'Usar Stickers Externos',
    'perm.AddReactions': 'Adicionar Reações',
    'perm.UseApplicationCommands': 'Usar Comandos de App',
    'perm.SendMessagesInThreads': 'Enviar em Threads',
    'perm.ViewChannel': 'Ver Canais',
    'perm.Connect': 'Conectar Voz',
    'perm.Speak': 'Falar',
    'perm.MuteMembers': 'Silenciar',
    'perm.DeafenMembers': 'Ensurdecer',
    'perm.MoveMembers': 'Mover Membros',
    'perm.UseVAD': 'Usar Deteção de Voz',
    'perm.PrioritySpeaker': 'Orador Prioritário',
    'perm.Stream': 'Transmitir (Stream)',
    'perm.RequestToSpeak': 'Pedir para Falar',
    'perm.UseEmbeddedActivities': 'Usar Actividades Integradas',
    'perm.ViewGuildInsights': 'Ver Estatísticas do Servidor',
    'perm.UseSoundboard': 'Usar Soundboard',
    'perm.UseExternalSounds': 'Usar Sons Externos',
    'perm.ViewCreatorMonetizationAnalytics': 'Ver Analytics de Monetização',
    'perm.SendVoiceMessages': 'Enviar Mensagens de Voz',
    'perm.CreateInstantInvite': 'Criar Convites Instantâneos',
    // Tags
    'tags.search': 'Pesquisar',
    'tags.search.placeholder': 'Procurar por nome/prefixo',
    'tags.new': 'Nova tag',
    'tags.name': 'Nome',
    'tags.prefix': 'Prefixo',
    'tags.color': 'Cor',
    'tags.icon': 'Ícone',
    'tags.apply': 'Aplicar',
    'tags.apply.modalTitle': 'Aplicar tag',
    'tags.members.search': 'Pesquisar membros',
    'tags.expireSeconds': 'Expiração (segundos, opcional)',
    'tags.applyNow': 'Aplicar agora',
    'tags.remove.confirm': 'Remover tag?',
  },
  en: {
    'common.loading': 'Loading…',
    'common.refresh': 'Refresh',
    'common.save': 'Save',
    'common.cancel': 'Cancel',
    'common.edit': 'Edit',
    'common.remove': 'Remove',
    'common.close': 'Close',
    'common.search': 'Search',
    'common.saved': 'Saved!',
    'common.saveFailed': 'Failed to save',
    'common.selectGuild': 'Select a server.',
    'common.enabled': 'Enable',
    'common.reload': 'Reload',
    'common.create': 'Create',
    'common.scan': 'Scan',
    'common.actions': 'Actions',
    'roles.title': 'Role Management',
    'roles.selectGuild': 'Select a server to manage roles.',
    'roles.name': 'Name',
    'roles.color': 'Color (#RRGGBB)',
    'roles.create': 'Create',
    'roles.refresh': 'Refresh',
    'roles.loading': 'Loading…',
    'roles.remove.confirm': 'Remove role?',
    'roles.remove': 'Remove',
    'roles.up': 'Up',
    'roles.down': 'Down',
    'roles.selectToEdit': 'Select a role to edit permissions.',
    'roles.showSeparately': 'Display separately (hoist)',
    'roles.mentionable': 'Mentionable',
    'roles.permissions': 'Permissions',
    'roles.permissions.note': 'Note: Administrator grants all permissions. Be careful.',
    'roles.permissions.search': 'Search permissions…',
    'roles.permissions.selectAll': 'Select all',
    'roles.permissions.clearAll': 'Clear',
    'roles.save': 'Save changes',
    'roles.updated': 'Role updated',
    'roles.load.failed': 'Failed to load roles',
    'roles.role.load.failed': 'Failed to load role',
    'roles.move.failed': 'Failed to move role',
    // Permission labels
    'perm.Administrator': 'Administrator',
    'perm.ManageGuild': 'Manage Server',
    'perm.ManageRoles': 'Manage Roles',
    'perm.ManageChannels': 'Manage Channels',
    'perm.ViewAuditLog': 'View Audit Log',
    'perm.KickMembers': 'Kick Members',
    'perm.BanMembers': 'Ban Members',
    'perm.ModerateMembers': 'Timeout Members',
    'perm.ManageNicknames': 'Manage Nicknames',
    'perm.ChangeNickname': 'Change Own Nickname',
    'perm.ManageMessages': 'Manage Messages',
    'perm.MentionEveryone': 'Mention @everyone',
    'perm.ManageWebhooks': 'Manage Webhooks',
    'perm.ManageEmojisAndStickers': 'Manage Emojis/Stickers',
    'perm.ManageEvents': 'Manage Events',
    'perm.ManageThreads': 'Manage Threads',
    'perm.CreatePublicThreads': 'Create Public Threads',
    'perm.CreatePrivateThreads': 'Create Private Threads',
    'perm.SendMessages': 'Send Messages',
    'perm.SendTTSMessages': 'Send TTS Messages',
    'perm.EmbedLinks': 'Embed Links',
    'perm.AttachFiles': 'Attach Files',
    'perm.ReadMessageHistory': 'Read Message History',
    'perm.UseExternalEmojis': 'Use External Emojis',
    'perm.UseExternalStickers': 'Use External Stickers',
    'perm.AddReactions': 'Add Reactions',
    'perm.UseApplicationCommands': 'Use Application Commands',
    'perm.SendMessagesInThreads': 'Send in Threads',
    'perm.ViewChannel': 'View Channels',
    'perm.Connect': 'Connect (Voice)',
    'perm.Speak': 'Speak',
    'perm.MuteMembers': 'Mute Members',
    'perm.DeafenMembers': 'Deafen Members',
    'perm.MoveMembers': 'Move Members',
    'perm.UseVAD': 'Use Voice Activity',
    'perm.PrioritySpeaker': 'Priority Speaker',
    'perm.Stream': 'Stream',
    'perm.RequestToSpeak': 'Request to Speak',
    'perm.UseEmbeddedActivities': 'Use Embedded Activities',
    'perm.ViewGuildInsights': 'View Server Insights',
    'perm.UseSoundboard': 'Use Soundboard',
    'perm.UseExternalSounds': 'Use External Sounds',
    'perm.ViewCreatorMonetizationAnalytics': 'View Creator Monetization Analytics',
    'perm.SendVoiceMessages': 'Send Voice Messages',
    'perm.CreateInstantInvite': 'Create Instant Invites',
    // Tags
    'tags.search': 'Search',
    'tags.search.placeholder': 'Find by name/prefix',
    'tags.new': 'New tag',
    'tags.name': 'Name',
    'tags.prefix': 'Prefix',
    'tags.color': 'Color',
    'tags.icon': 'Icon',
    'tags.apply': 'Apply',
    'tags.apply.modalTitle': 'Apply tag',
    'tags.members.search': 'Search members',
    'tags.expireSeconds': 'Expiration (seconds, optional)',
    'tags.applyNow': 'Apply now',
    'tags.remove.confirm': 'Remove tag?',
    // Sidebar labels
    'nav.dashboard': 'Dashboard',
    'nav.plugins': 'Plugins',
    'nav.logs': 'Logs',
    'nav.logs.live': 'Live logs',
    'nav.moderation': 'Moderation',
    'nav.members': 'Members',
    'nav.roles': 'Roles',
    'nav.webhooks': 'Webhooks',
    'nav.verification': 'Verification',
    'nav.verification.metrics': 'Verification: metrics',
    'nav.tags': 'Tags',
    'nav.tickets': 'Tickets',
    'nav.tickets.config': 'Tickets: config',
    'nav.tickets.panels': 'Tickets: panels',
    'nav.commands': 'Commands',
    'nav.automod': 'Automod',
    'nav.appeals': 'Appeals',
    'nav.settings': 'Settings',
    'nav.diagnostics': 'Diagnostics',
    'nav.performance': 'Performance',
    // Logs
    'logs.title': 'Logs',
    'logs.search': 'Search',
    'logs.type': 'Type',
    'logs.user': 'User ID',
    'logs.mod': 'Mod ID',
    'logs.export': 'Export',
    'logs.clear': 'Clear',
    'logs.total': 'Total',
    'logs.prev': 'Prev',
    'logs.next': 'Next',
    'logs.perPage': '{n}/page',
  'logs.perPageSuffix': '/page',
    'logs.none': 'No results.',
    'logs.loading': 'Loading…',
    'logs.selectGuild': 'Select a server to view logs.',
    'logs.live.title': 'Live logs',
    'logs.live.connected': 'connected',
    'logs.live.disconnected': 'disconnected',
    'logs.live.filter.placeholder': 'Filter type (e.g., messageDelete)',
    'logs.live.reconnect': 'Reconnect',
    // Members
    'members.selectGuild': 'Select a server to list members.',
    'members.search': 'Search',
    'members.role': 'Role',
    'members.limit': 'Limit',
    'members.refresh': 'Refresh',
    'members.manage': 'Manage',
    'members.notManageable': 'not manageable',
  // Tickets
  'tickets.title': 'Tickets',
  'tickets.status': 'Status',
  'tickets.priority': 'Priority',
  'tickets.search': 'Search',
  'tickets.staffRole': 'Staff role',
  'tickets.selectRole': 'Select role',
  'tickets.assignee': 'Assignee',
  'tickets.selectMember': 'Select member',
  'tickets.staffOnly': 'Staff only',
  'tickets.deepFetch': 'Deep fetch',
  'tickets.filtersApplied': 'Filters applied:',
  'tickets.role': 'Role',
  'tickets.clearFilters': 'Clear filters',
  'tickets.stats.total': 'Total',
  'tickets.stats.open': 'Open',
  'tickets.stats.claimed': 'Claimed',
  'tickets.stats.closed': 'Closed',
  'tickets.stats.pending': 'Pending',
  'tickets.loading': 'Loading…',
  'tickets.none': 'No tickets found.',
  'tickets.claimedBy': 'Claimed by',
  'tickets.view': 'View',
  'tickets.claim': 'Claim',
  'tickets.assignToMe': 'Assign to me',
  'tickets.release': 'Release',
  'tickets.close': 'Close',
  'tickets.selectedSuffix': 'selected',
  'tickets.export': 'Export',
  'tickets.selectGuildHelp': 'Select a server: add ?guildId=YOUR_GUILD_ID to the URL or save via localStorage.',
  'tickets.perPageSuffix': '/page',
  // Tickets config/panels
  'tickets.config.title': 'Tickets Configuration',
  'tickets.fields.common': 'Common fields',
  'tickets.panelChannelId': 'Panel channel',
  'tickets.staffRoleId': 'Staff role',
  'tickets.archiveCategoryId': 'Archive category',
  'tickets.logChannelId': 'Logs channel',
  'tickets.transcriptWebhook': 'Transcript webhook',
  'tickets.enabled': 'Enable tickets',
  'tickets.saved': 'Saved!',
  'tickets.json.editor': 'JSON editor (advanced)',
  'tickets.json.revert': 'Revert',
  'tickets.json.save': 'Save JSON',
  'tickets.reload': 'Reload',
  'tickets.panels.title': 'Tickets: Panels & Categories',
  'tickets.scan': 'Scan',
  'tickets.scan.done': 'Scan completed',
  'tickets.scan.fail': 'Failed to scan',
  'tickets.panel.create': 'Create Panel',
  'tickets.panel.created': 'Panel created',
  'tickets.panel.createFail': 'Failed to create panel',
  'tickets.category.create': 'Create Category',
  'tickets.category.created': 'Category created',
  'tickets.category.createFail': 'Failed to create category',
  'tickets.panels.list': 'Panels',
  'tickets.action.sync': 'Sync',
  'tickets.action.messageUpdate': 'Message updated',
  'tickets.action.delete': 'Remove',
  'tickets.synced': 'Synced',
  'tickets.removed': 'Removed',
  // Settings
  'settings.title': 'Settings',
  'settings.prefix': 'Prefix',
  'settings.prefix.placeholder': '!',
  'settings.locale': 'Locale',
  'settings.locale.pt': 'Portuguese',
  'settings.locale.en': 'English',
  'settings.logsEnabled': 'Enable moderation logs',
  'settings.modlogChannelId': 'Mod-log Channel ID',
  'settings.modlogChannelId.placeholder': '1234567890',
  'settings.save': 'Save settings',
  'settings.saving': 'Saving…',
  'settings.loading': 'Loading…',
    // Webhooks
    'webhooks.title': 'Webhooks',
  'webhooks.selectGuild': 'Select a server to manage webhooks.',
  'webhooks.type': 'Type',
  'webhooks.channelId': 'Channel ID',
  'webhooks.name': 'Name',
  'webhooks.create': 'Create',
  'webhooks.autosetup': 'Auto-setup logs',
  'webhooks.refresh': 'Refresh',
  'webhooks.loading': 'Loading…',
  'webhooks.error': 'Failed to fetch webhooks',
  'webhooks.active': 'active',
  'webhooks.test': 'Test',
  'webhooks.remove': 'Remove',
  'webhooks.confirmRemove': 'Remove webhook?',
  'webhooks.created': 'Webhook created',
  'webhooks.removed': 'Webhook removed',
  'webhooks.test.sent': 'Test sent',
  'webhooks.test.fail': 'Test failed',
  'webhooks.autosetup.ok': 'Auto-setup done',
  'webhooks.autosetup.fail': 'Auto-setup failed',
    // Verification
    'verification.title': 'Verification',
  'verification.selectGuild': 'Select a server to configure verification.',
  'verification.enable': 'Enable verification',
  'verification.method': 'Method',
  'verification.method.captcha': 'Captcha',
  'verification.method.button': 'Button',
  'verification.channel': 'Channel',
  'verification.role': 'Verified role',
  'verification.save': 'Save',
  'verification.saving': 'Saving…',
  'verification.saved': 'Saved!',
  'verification.saveFailed': 'Failed to save',
  'verification.metrics.title': 'Verification: Metrics & Logs',
  'verification.metrics.reload': 'Reload',
  'verification.metrics.clearLogs': 'Clear logs',
  'verification.metrics.section': 'Metrics',
  'verification.metrics.noData': 'No data',
  'verification.metrics.recentLogs': 'Recent logs',
  'verification.metrics.noLogs': 'No logs',
  'verification.metrics.error': 'Failed to load metrics',
  // Common
  'common.working': 'Working…',
    // Moderation
    'mod.bulk.title': 'Bulk actions',
    'mod.bulk.userIds': 'User IDs',
    'mod.bulk.hint': 'Separate by comma, space, or line. Eg: 123, 456, 789',
    'mod.bulk.action': 'Action',
    'mod.action.timeout': 'Timeout',
    'mod.action.kick': 'Kick',
    'mod.action.ban': 'Ban',
    'mod.bulk.durationSeconds': 'Duration (seconds)',
    'mod.bulk.deleteMsgSeconds': 'Delete messages (seconds)',
    'mod.reason': 'Reason',
    'mod.reason.placeholder': 'Optional',
    'mod.bulk.run': 'Run',
    'mod.bulk.results': 'Results',
    'mod.bulk.noUsers': 'No users',
    'mod.bulk.done': 'Done',
  }
}

export function useI18n() {
  const [lang, setLang] = useState<Lang>('pt')
  useEffect(() => {
    const saved = typeof window !== 'undefined' ? (localStorage.getItem('lang') as Lang | null) : null
    if (saved === 'pt' || saved === 'en') setLang(saved)
  }, [])
  useEffect(() => {
    if (typeof window !== 'undefined') localStorage.setItem('lang', lang)
  }, [lang])
  const t = useMemo(() => {
    return (key: string) => STRINGS[lang][key] ?? key
  }, [lang])
  return { t, lang, setLang }
}

export const PERMISSION_KEYS: Array<{ key: string; danger?: boolean }> = [
  { key: 'Administrator', danger: true },
  { key: 'ManageGuild' },
  { key: 'ManageRoles' },
  { key: 'ManageChannels' },
  { key: 'ViewAuditLog' },
  { key: 'KickMembers' },
  { key: 'BanMembers' },
  { key: 'ModerateMembers' },
  { key: 'ManageNicknames' },
  { key: 'ChangeNickname' },
  { key: 'ManageMessages' },
  { key: 'MentionEveryone' },
  { key: 'ManageWebhooks' },
  { key: 'ManageEmojisAndStickers' },
  { key: 'ManageEvents' },
  { key: 'ManageThreads' },
  { key: 'CreatePublicThreads' },
  { key: 'CreatePrivateThreads' },
  { key: 'SendMessages' },
  { key: 'SendTTSMessages' },
  { key: 'EmbedLinks' },
  { key: 'AttachFiles' },
  { key: 'ReadMessageHistory' },
  { key: 'UseExternalEmojis' },
  { key: 'UseExternalStickers' },
  { key: 'AddReactions' },
  { key: 'UseApplicationCommands' },
  { key: 'SendMessagesInThreads' },
  { key: 'ViewChannel' },
  { key: 'Connect' },
  { key: 'Speak' },
  { key: 'MuteMembers' },
  { key: 'DeafenMembers' },
  { key: 'MoveMembers' },
  { key: 'UseVAD' },
  { key: 'PrioritySpeaker' },
  { key: 'Stream' },
  { key: 'RequestToSpeak' },
  { key: 'UseEmbeddedActivities' },
  { key: 'ViewGuildInsights' },
  { key: 'UseSoundboard' },
  { key: 'UseExternalSounds' },
  { key: 'ViewCreatorMonetizationAnalytics' },
  { key: 'SendVoiceMessages' },
  { key: 'CreateInstantInvite' },
]

// Bit mapping for decoding server-provided bitfield strings (Discord v14 flags)
export const PERMISSION_BITS: Record<string, bigint> = {
  CreateInstantInvite: 1n,
  KickMembers: 2n,
  BanMembers: 4n,
  Administrator: 8n,
  ManageChannels: 16n,
  ManageGuild: 32n,
  AddReactions: 64n,
  ViewAuditLog: 128n,
  PrioritySpeaker: 256n,
  Stream: 512n,
  ViewChannel: 1024n,
  SendMessages: 2048n,
  SendTTSMessages: 4096n,
  ManageMessages: 8192n,
  EmbedLinks: 16384n,
  AttachFiles: 32768n,
  ReadMessageHistory: 65536n,
  MentionEveryone: 131072n,
  UseExternalEmojis: 262144n,
  ViewGuildInsights: 524288n,
  Connect: 1048576n,
  Speak: 2097152n,
  MuteMembers: 4194304n,
  DeafenMembers: 8388608n,
  MoveMembers: 16777216n,
  UseVAD: 33554432n,
  ChangeNickname: 67108864n,
  ManageNicknames: 134217728n,
  ManageRoles: 268435456n,
  ManageWebhooks: 536870912n,
  ManageEmojisAndStickers: 1073741824n,
  UseApplicationCommands: 2147483648n,
  RequestToSpeak: 4294967296n,
  ManageEvents: 8589934592n,
  ManageThreads: 17179869184n,
  CreatePublicThreads: 34359738368n,
  CreatePrivateThreads: 68719476736n,
  UseExternalStickers: 137438953472n,
  SendMessagesInThreads: 274877906944n,
  UseEmbeddedActivities: 549755813888n,
  ModerateMembers: 1099511627776n,
  ViewCreatorMonetizationAnalytics: 2199023255552n,
  UseSoundboard: 4398046511104n,
  UseExternalSounds: 17592186044416n,
  SendVoiceMessages: 35184372088832n,
}
