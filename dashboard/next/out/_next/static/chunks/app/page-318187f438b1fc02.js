(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1387:function(t,e,a){Promise.resolve().then(a.bind(a,1262)),Promise.resolve().then(a.t.bind(a,231,23))},1262:function(t,e,a){"use strict";a.d(e,{default:function(){return c}});var n=a(7437),r=a(2265);function i(t){let{label:e,value:a,dotColor:r}=t;return(0,n.jsxs)("div",{className:"card card-gradient p-5",children:[(0,n.jsxs)("div",{className:"badge mb-2",children:[(0,n.jsx)("span",{className:"dot",style:{backgroundColor:r}}),e]}),(0,n.jsx)("div",{className:"text-2xl font-semibold",children:a})]})}var l=a(9988),o=a(2837);function c(){let[t,e]=(0,r.useState)([{label:"Ativos",value:"—",color:"#10b981"},{label:"Warnings",value:"—",color:"#f59e0b"},{label:"Bans",value:"—",color:"#ef4444"},{label:"Kicks",value:"—",color:"#f97316"},{label:"Tickets",value:"—",color:"#6366f1"},{label:"Mod logs",value:"—",color:"#22d3ee"}]),[a,c]=(0,r.useState)("—"),[s,d]=(0,r.useState)("Dados ser\xe3o carregados ao selecionar um servidor.");return(0,r.useEffect)(()=>{let t=(0,o._)();t&&l.h.getLogStats(t).then(t=>{var a,n,r,i,l,o,s,u,g,h,f,v,m,p,w,k,b,S,j,x;if(!t)return;e([{label:"Ativos",value:String(null!==(f=null===(a=t.totals)||void 0===a?void 0:a.activeModerators)&&void 0!==f?f:"—"),color:"#10b981"},{label:"Warnings",value:String(null!==(v=null===(n=t.totals)||void 0===n?void 0:n.warnings)&&void 0!==v?v:"—"),color:"#f59e0b"},{label:"Bans",value:String(null!==(m=null===(r=t.totals)||void 0===r?void 0:r.bans)&&void 0!==m?m:"—"),color:"#ef4444"},{label:"Kicks",value:String(null!==(p=null===(i=t.totals)||void 0===i?void 0:i.kicks)&&void 0!==p?p:"—"),color:"#f97316"},{label:"Tickets",value:String(null!==(w=null===(l=t.totals)||void 0===l?void 0:l.tickets)&&void 0!==w?w:"—"),color:"#6366f1"},{label:"Mod logs",value:String(null!==(k=null===(o=t.totals)||void 0===o?void 0:o.logs)&&void 0!==k?k:"—"),color:"#22d3ee"}]),c((t.updatedAt?new Date(t.updatedAt):new Date).toLocaleString());let y=null!==(b=null===(s=t.totals)||void 0===s?void 0:s.warnings)&&void 0!==b?b:0,E=null!==(S=null===(u=t.totals)||void 0===u?void 0:u.bans)&&void 0!==S?S:0,L=null!==(j=null===(g=t.totals)||void 0===g?void 0:g.kicks)&&void 0!==j?j:0,N=null!==(x=null===(h=t.totals)||void 0===h?void 0:h.tickets)&&void 0!==x?x:0;d("Resumo r\xe1pido: ".concat(y," warnings, ").concat(E," bans, ").concat(L," kicks, ").concat(N," tickets."))}).catch(()=>{})},[]),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("div",{className:"card p-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-neutral-200",children:"Status & Resumo"}),(0,n.jsx)("p",{className:"text-xs text-neutral-400 mt-1",children:s})]}),(0,n.jsxs)("div",{className:"text-xs text-neutral-400",children:["\xdaltima atualiza\xe7\xe3o: ",a]})]})}),(0,n.jsx)("div",{className:"grid grid-cols-3 gap-3",children:t.map(t=>(0,n.jsx)(i,{label:t.label,value:t.value,dotColor:t.color},t.label))})]})}},9988:function(t,e,a){"use strict";a.d(e,{h:function(){return n}});let n={async getLogStats(t,e){let a=e?"?".concat(new URLSearchParams(Object.entries(e).map(t=>{let[e,a]=t;return[e,String(a)]}))):"",n=await fetch("/api/guild/".concat(t,"/logs/stats").concat(a),{credentials:"include"});if(!n.ok)throw Error("Failed to fetch stats");return n.json()},async getLogs(t,e){let a=e?"?".concat(new URLSearchParams(Object.entries(e).map(t=>{let[e,a]=t;return[e,String(a)]}))):"",n=await fetch("/api/guild/".concat(t,"/logs").concat(a),{credentials:"include"});if(!n.ok)throw Error("Failed to fetch logs");return n.json()},exportLogsUrl(t,e){let a=e?"?".concat(new URLSearchParams(Object.entries(e).map(t=>{let[e,a]=t;return[e,String(a)]}))):"";return"/api/guild/".concat(t,"/logs/export").concat(a)},async getSettings(t){let e=await fetch("/api/guild/".concat(t,"/settings"),{credentials:"include"});if(!e.ok)throw Error("Failed to fetch settings");return e.json()},async postSettings(t,e){let a=await fetch("/api/guild/".concat(t,"/settings"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!a.ok)throw Error("Failed to save settings");return a.json()},async getRoles(t){let e=await fetch("/api/guild/".concat(t,"/roles"),{credentials:"include"});if(!e.ok)throw Error("Failed to fetch roles");return e.json()},async getMembers(t,e){let a=e?new URLSearchParams(Object.entries(e).filter(t=>{let[,e]=t;return null!=e}).map(t=>{let[e,a]=t;return[e,String(a)]})).toString():"",n=await fetch("/api/guild/".concat(t,"/members").concat(a?"?".concat(a):""),{credentials:"include"});if(!n.ok)throw Error("Failed to fetch members");return n.json()},async getCurrentUser(){let t=await fetch("/api/user",{credentials:"include"});if(!t.ok)throw Error("Failed to fetch current user");return t.json()},async getTickets(t,e){let a=e?"?".concat(new URLSearchParams(Object.entries(e).map(t=>{let[e,a]=t;return[e,String(a)]}))):"",n=await fetch("/api/guild/".concat(t,"/tickets").concat(a),{credentials:"include"});if(!n.ok)throw Error("Failed to fetch tickets");return n.json()},exportTicketsUrl(t,e){let a=e?"?".concat(new URLSearchParams(Object.entries(e).map(t=>{let[e,a]=t;return[e,String(a)]}))):"";return"/api/guild/".concat(t,"/tickets/export").concat(a)},async getTicketDetails(t,e){let a=await fetch("/api/guild/".concat(t,"/tickets/").concat(e),{credentials:"include"});if(!a.ok)throw Error("Failed to fetch ticket details");return a.json()},async getTicketLogs(t,e,a){let n=a?"?".concat(new URLSearchParams(Object.entries(a).map(t=>{let[e,a]=t;return[e,String(a)]}))):"",r=await fetch("/api/guild/".concat(t,"/tickets/").concat(e,"/logs").concat(n),{credentials:"include"});if(!r.ok)throw Error("Failed to fetch ticket logs");return r.json()},async getTicketMessages(t,e,a){let n=a?"?".concat(new URLSearchParams(Object.entries(a).map(t=>{let[e,a]=t;return[e,String(a)]}))):"",r=await fetch("/api/guild/".concat(t,"/tickets/").concat(e,"/messages").concat(n),{credentials:"include"});if(!r.ok)throw Error("Failed to fetch ticket messages");return r.json()},async ticketAction(t,e,a,n){let r=await fetch("/api/guild/".concat(t,"/tickets/").concat(e,"/action"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:a,data:n})});if(!r.ok)throw Error("Failed to perform ticket action");return r.json()}}},2837:function(t,e,a){"use strict";function n(){return new URL(window.location.href).searchParams.get("guildId")||localStorage.getItem("guildId")}function r(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=(t||"").trim();if(a?localStorage.setItem("guildId",a):localStorage.removeItem("guildId"),e)try{let t=new URL(window.location.href);a?t.searchParams.set("guildId",a):t.searchParams.delete("guildId"),window.history.replaceState({},"",t.toString())}catch(t){}}a.d(e,{J:function(){return r},_:function(){return n}})}},function(t){t.O(0,[231,971,23,744],function(){return t(t.s=1387)}),_N_E=t.O()}]);