<!doctype html>
<html lang="pt">
<head><meta charset="utf-8"><title>Admin Moderation</title></head>
<body>
  <script src="/js/frontend-helpers.js"></script>
  <script src="/js/dompurify.min.js"></script>
  <h2>Moderation</h2>
  <label>Guild ID <input id="guildId" /></label>
  <label>Target ID <input id="targetId" /></label>
  <label>Action <select id="action"><option value="kick">Kick</option><option value="ban">Ban</option><option value="timeout">Timeout</option><option value="addRole">Add Role</option><option value="removeRole">Remove Role</option></select></label>
  <label>Role ID (if needed) <input id="roleId" /></label>
  <label>Duration seconds (timeout) <input id="duration" type="number" /></label>
  <label>Reason <input id="reason" /></label>
  <button id="exec">Execute</button>
  <pre id="out"></pre>

  <script>
    document.getElementById('exec').addEventListener('click', async () => {
      const guildId = document.getElementById('guildId').value;
      const targetId = document.getElementById('targetId').value;
      const action = document.getElementById('action').value;
      const roleId = document.getElementById('roleId').value || null;
      const duration = Number(document.getElementById('duration').value || 0);
      const reason = document.getElementById('reason').value || 'Moderation via dashboard';
      const res = await fetch('/api/admin/moderation/action', { method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify({ guildId, action, targetId, roleId, durationSeconds: duration, reason }) });
      document.getElementById('out').textContent = JSON.stringify(await res.json(), null, 2);
    });
  </script>
</body>
</html>
