<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Central de Atendimento • IGNIS</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app-navbar"></div>

  <main class="container">
    <!-- View: Server selection -->
    <section id="view-servers" class="view" aria-labelledby="servers-title" hidden>
      <div class="actions justify-between">
        <h1 id="servers-title" class="m-0">Escolha um servidor</h1>
        <a class="btn btn-neutral" href="#/home" aria-label="Voltar ao dashboard">← Voltar</a>
      </div>
      <p class="muted">Selecione o servidor para abrir o painel.</p>
      <div class="server-toolbar" role="search">
        <input id="server-search" class="input" type="search" placeholder="Procurar por nome…" aria-label="Procurar servidor" autocomplete="off" />
        <select id="server-sort" class="input" aria-label="Ordenar por">
          <option value="name-asc">Nome (A→Z)</option>
          <option value="name-desc">Nome (Z→A)</option>
          <option value="members-desc">Membros (maior primeiro)</option>
          <option value="members-asc">Membros (menor primeiro)</option>
        </select>
        <span id="server-count" class="muted" aria-live="polite"></span>
      </div>
      <div id="server-grid" class="cards cards-servers" role="list" aria-busy="true"></div>
      <div id="server-empty" class="empty" hidden>
        <div class="empty-icon">🔍</div>
        <h2>Sem resultados</h2>
        <p class="muted">Não encontrámos servidores a corresponder à pesquisa.</p>
        <button id="server-reload" class="btn btn-neutral" type="button">Recarregar lista</button>
      </div>
    </section>

    <!-- View: Home / Dashboard -->
    <section id="view-home" class="view" aria-labelledby="hero-title">
      <div class="hero">
        <div class="hero-text">
          <h1 id="hero-title">Central de Atendimento</h1>
          <p class="hero-sub">Clique no departamento para abrir um atendimento privado.<br/>Tempo médio de resposta: <strong>15 minutos</strong>.</p>

          <div class="pills" role="status" aria-live="polite">
            <span class="pill" id="pill-guild">🏷️ <span data-guild-name>Servidor</span></span>
            <span class="pill" id="pill-staff">👥 Staff online: <span data-staff-online>—</span></span>
            <span class="pill status" id="pill-status" data-status="online">● <span data-system-status>ONLINE</span></span>
            <span class="pill" id="pill-active">🎫 Abertos: <span data-active-tickets>—</span></span>
            <span class="pill" id="pill-members">📊 Membros: <span data-total-members>—</span></span>
          </div>

          <div class="actions">
            <button class="btn btn-primary" data-ticket="technical" aria-label="Abrir ticket de suporte técnico">
              🔧 SUPORTE TÉCNICO
            </button>
            <button class="btn btn-danger" data-ticket="incident" aria-label="Reportar um problema">
              ⚠️ REPORTAR PROBLEMA
            </button>
            <button class="btn btn-neutral" data-ticket="moderation" aria-label="Abrir ticket de moderação e segurança">
              🛡️ MODERAÇÃO
            </button>
          </div>

          <div class="feedback" role="alert" aria-live="assertive" hidden></div>
        </div>
        <div class="hero-art">
          <img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?w=1200&h=420&fit=crop&crop=center" alt="Banner IGNIS" />
        </div>
      </div>
    </section>

    <!-- View: Tickets Config (SPA) -->
    <section id="view-tickets-config" class="view" aria-labelledby="tickets-config-title" hidden>
      <div class="actions justify-between">
        <h1 id="tickets-config-title" class="m-0">Configuração de Tickets</h1>
        <a class="btn btn-neutral" href="#/home" aria-label="Voltar ao dashboard">← Voltar</a>
      </div>
      <p class="muted">Define categoria, cargos com acesso, logs, template e a mensagem inicial.</p>
  <div class="cards two">
        <div class="card">
          <div class="card-body">
            <h3>🎛️ Painel & Acesso</h3>
            <div class="form-grid">
              <label>Canal do painel
                <select id="tc_panelChannel" class="input"></select>
              </label>
              <label>Categoria para tickets
                <select id="tc_ticketsCategory" class="input"></select>
              </label>
              <div class="row">
                <input id="tc_newCategoryName" class="input" placeholder="Criar nova categoria (ex.: 📁 TICKETS)" />
                <button id="tc_btnCreateCategory" class="btn btn-neutral" type="button">Criar categoria</button>
              </div>
              <label>Canal de logs
                <select id="tc_logsChannel" class="input"></select>
              </label>
              <label>Cargos com acesso inicial
                <select id="tc_accessRoles" class="input" multiple></select>
              </label>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <h3>🧩 Template & Mensagem</h3>
            <div class="form-grid">
              <label>Tema do painel
                <select id="tc_theme" class="input">
                  <option value="dark">Escuro</option>
                  <option value="light">Claro</option>
                </select>
              </label>
              <label>Template por omissão
                <select id="tc_defaultTemplate" class="input">
                  <option value="classic">Clássico</option>
                  <option value="compact">Compacto</option>
                  <option value="premium">Premium</option>
                  <option value="minimal">Minimal</option>
                </select>
              </label>
              <label>Cor do embed (opcional)
                <input id="tc_embedColor" class="input" placeholder="#7C3AED" pattern="#?[0-9a-fA-F]{6}" />
              </label>
              <label>Mensagem inicial
                <textarea id="tc_welcomeMsg" class="input" rows="4" placeholder="Olá {user}, obrigado por abrir o ticket #{ticket_id}!"></textarea>
              </label>
            </div>
          </div>
        </div>
      </div>
  <div class="actions spaced">
        <button id="tc_btnSave" class="btn btn-primary" type="button">Guardar</button>
        <button id="tc_btnPreview" class="btn btn-neutral" type="button">Pré‑visualizar</button>
        <button id="tc_btnPublish" class="btn" type="button">Publicar/Atualizar</button>
      </div>
  <div id="tc_preview" class="card hidden">
        <div class="card-body">
          <h3>Pré-visualização</h3>
          <div id="tc_previewBody" class="muted">—</div>
        </div>
      </div>
    </section>

    <!-- Cards -->
    <section class="cards" aria-label="Departamentos de atendimento">
      <article class="card">
        <img class="card-img" src="https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=840&h=280&fit=crop&crop=center" alt="Suporte Técnico" loading="lazy" />
        <div class="card-body" data-ticket="technical" role="button" tabindex="0" aria-label="Abrir ticket de suporte técnico">
          <h3>🔧 Suporte Técnico</h3>
          <ul>
            <li>Configuração de bots e integrações</li>
            <li>Ajuda com comandos e permissões</li>
            <li>Melhorias simples de performance</li>
          </ul>
        </div>
      </article>
      <article class="card">
        <img class="card-img" src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=840&h=280&fit=crop&crop=center" alt="Reportar Problema" loading="lazy" />
        <div class="card-body" data-ticket="incident" role="button" tabindex="0" aria-label="Reportar um problema">
          <h3>⚠️ Reportar Problema</h3>
          <ul>
            <li>Erros, bugs e instabilidades</li>
            <li>Comportamentos inesperados</li>
            <li>Partilha de prints e evidências</li>
          </ul>
        </div>
      </article>
      <article class="card">
        <img class="card-img" src="https://images.unsplash.com/photo-1584438784894-089d6a62b8fa?w=840&h=280&fit=crop&crop=center" alt="Moderação e Segurança" loading="lazy" />
        <div class="card-body" data-ticket="moderation" role="button" tabindex="0" aria-label="Abrir ticket de moderação e segurança">
          <h3>🛡️ Moderação & Segurança</h3>
          <ul>
            <li>Denúncias e investigações</li>
            <li>Questões de regras e disciplina</li>
            <li>Suporte reservado</li>
          </ul>
        </div>
      </article>
    </section>

    <!-- Banner final / identidade visual -->
    <section class="identity" aria-hidden="true">
      <img src="https://images.unsplash.com/photo-1511512578047-dfb367046420?w=1200&h=300&fit=crop&crop=center" alt="Identidade IGNIS" loading="lazy" />
    </section>

    <!-- Admin quick links to classic modules -->
    <section class="cards cards-admin" aria-label="Administração">
      <article class="card">
        <div class="card-body">
          <h3>📜 Logs</h3>
          <p class="muted">Consulta e exporta logs do sistema</p>
          <a class="card-link" href="/dashboard/logs.html">Abrir logs</a>
        </div>
      </article>
      <article class="card">
        <div class="card-body">
          <h3>🎫 Tickets</h3>
          <p class="muted">Configurar sistema de tickets</p>
          <a class="card-link" href="#/tickets-config">Configurar sistema</a>
        </div>
      </article>
      <article class="card">
        <div class="card-body">
          <h3>⚙️ Configurações</h3>
          <p class="muted">Ajusta preferências do servidor</p>
          <a class="card-link" href="/dashboard/configs.html">Abrir configs</a>
        </div>
      </article>
      <article class="card">
        <div class="card-body">
          <h3>👤 Cargos</h3>
          <p class="muted">Gerir cargos e permissões</p>
          <a class="card-link" href="/dashboard/roles.html">Abrir cargos</a>
        </div>
      </article>
      <article class="card">
        <div class="card-body">
          <h3>🧩 Painéis</h3>
          <p class="muted">Painéis de tickets e verificação</p>
          <a class="card-link" href="/dashboard/panels.html">Abrir painéis</a>
        </div>
      </article>
      <article class="card">
        <div class="card-body">
          <h3>🧪 Performance</h3>
          <p class="muted">Monitor de performance em tempo real</p>
          <a class="card-link" href="/dashboard/performance.html">Abrir monitor</a>
        </div>
      </article>
      <article class="card">
        <div class="card-body">
          <h3>⚡ Comandos</h3>
          <p class="muted">Executar ações administrativas</p>
          <a class="card-link" href="/dashboard/commands.html">Abrir comandos</a>
        </div>
      </article>
    </section>

    <div id="app-footer"></div>
  </main>

  <!-- Toast container -->
  <div id="toast-root" class="toast-container" aria-live="polite" aria-atomic="true"></div>
  <script src="components.js" defer></script>
  <script src="app.js" defer></script>
</body>
</html>
