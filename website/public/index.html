<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YSNM Bot - Modern Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.snow.css">
    <link rel="icon" href="https://cdn.discordapp.com/icons/1333825066928214053/a_8c5e2b5b5f4d3c2a1e0f9b8d7c6e5a4b.gif" type="image/gif">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <script src="/js/frontend-helpers.js"></script>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <img src="https://cdn.discordapp.com/icons/1333825066928214053/a_8c5e2b5b5f4d3c2a1e0f9b8d7c6e5a4b.gif" alt="YSNM Logo" class="logo">
                <div class="header-text">
                    <h1><i class="fas fa-rocket"></i> YSNM Modern Dashboard</h1>
                    <p>Sistema avan√ßado de gest√£o e updates para Discord bot</p>
                </div>
                <button id="logoutBtn" class="logout-btn" title="Terminar sess√£o">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </div>
        </header>

        <main class="main-content">
            <div class="update-form-container">
                <h2><i class="fas fa-edit"></i> Criar Novo Update</h2>
                
                <form id="updateForm" class="update-form">
                    <div class="form-group">
                        <label for="title">
                            <i class="fas fa-heading"></i> T√≠tulo do Update
                        </label>
                        <input type="text" id="title" name="title" placeholder="üöÄ YSNM Bot - Nova Atualiza√ß√£o Incr√≠vel" maxlength="256" required>
                    </div>

                    <div class="form-group">
                        <label for="channelSelect">
                            <i class="fas fa-hashtag"></i> Canal de Destino
                        </label>
                        <select id="channelSelect" name="channelId" required>
                            <option value="">üîÑ Carregando canais...</option>
                        </select>
                        <div class="channel-info">
                            <small><i class="fas fa-info-circle"></i> Selecione o canal onde o update ser√° publicado</small>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="description">
                            <i class="fas fa-align-left"></i> Descri√ß√£o Detalhada
                        </label>
                        <div id="description-editor" class="editor-container"></div>
                        <input type="hidden" id="description" name="description">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="color">
                                <i class="fas fa-palette"></i> Cor do Embed
                            </label>
                            <input type="color" id="color" name="color" value="#4318FF">
                        </div>

                        <div class="form-group">
                            <label for="icon">
                                <i class="fas fa-image"></i> √çcone (URL)
                            </label>
                            <input type="url" id="icon" name="icon" placeholder="https://exemplo.com/icone-incrivel.png">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="banner">
                            <i class="fas fa-panorama"></i> Banner Principal (URL)
                        </label>
                        <input type="url" id="banner" name="banner" placeholder="https://exemplo.com/banner-espetacular.png">
                    </div>

                    <div class="fields-section">
                        <div class="fields-header">
                            <h3><i class="fas fa-list-ul"></i> Campos Personalizados</h3>
                            <button type="button" id="addField" class="btn btn-secondary">
                                <i class="fas fa-plus"></i> Adicionar Campo
                            </button>
                        </div>
                        <div id="fieldsContainer" class="fields-container"></div>
                    </div>

                    <div class="emoji-picker-section">
                        <h3><i class="fas fa-smile-beam"></i> Emojis R√°pidos</h3>
                        <div class="emoji-grid">
                            <span class="emoji-btn" data-emoji="üöÄ" title="Lan√ßamento">üöÄ</span>
                            <span class="emoji-btn" data-emoji="‚ö°" title="Performance">‚ö°</span>
                            <span class="emoji-btn" data-emoji="üéâ" title="Celebra√ß√£o">üéâ</span>
                            <span class="emoji-btn" data-emoji="‚úÖ" title="Completado">‚úÖ</span>
                            <span class="emoji-btn" data-emoji="üîß" title="Corre√ß√£o">üîß</span>
                            <span class="emoji-btn" data-emoji="üÜï" title="Novo">üÜï</span>
                            <span class="emoji-btn" data-emoji="üíé" title="Premium">üíé</span>
                            <span class="emoji-btn" data-emoji="üî•" title="Hot">üî•</span>
                            <span class="emoji-btn" data-emoji="‚≠ê" title="Destaque">‚≠ê</span>
                            <span class="emoji-btn" data-emoji="üéØ" title="Objetivo">üéØ</span>
                            <span class="emoji-btn" data-emoji="üí´" title="Magia">üí´</span>
                            <span class="emoji-btn" data-emoji="üåü" title="Especial">üåü</span>
                        </div>
                    </div>

                    <div class="submit-section">
                        <button type="submit" id="submitBtn" class="submit-btn">
                            <i class="fas fa-paper-plane"></i>
                            Enviar Update
                        </button>
                    </div>
                </form>
            </div>
                            <span class="emoji-btn" data-emoji="üîÑ">üîÑ</span>
                            <span class="emoji-btn" data-emoji="üì¢">üì¢</span>
                            <span class="emoji-btn" data-emoji="üéØ">üéØ</span>
                            <span class="emoji-btn" data-emoji="üíú">üíú</span>
                            <span class="emoji-btn" data-emoji="üåü">üåü</span>
                            <span class="emoji-btn" data-emoji="üî•">üî•</span>
                            <span class="emoji-btn" data-emoji="üí°">üí°</span>
                            <span class="emoji-btn" data-emoji="üé®">üé®</span>
                            <span class="emoji-btn" data-emoji="üõ°Ô∏è">üõ°Ô∏è</span>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" id="previewBtn" class="btn btn-secondary">
                            <i class="fas fa-eye"></i> Preview
                        </button>
                        <button type="submit" id="sendBtn" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i> Enviar Update
                        </button>
                    </div>
                </form>
            </div>

            <div class="preview-container">
                <h2><i class="fas fa-eye"></i> Preview em Tempo Real</h2>
                
                <div class="preview-embed" id="previewEmbed">
                    <div class="embed-author" id="previewAuthor" style="display: none;">
                        <img id="previewAuthorIcon" src="" alt="Author Icon">
                        <span id="previewAuthorName"></span>
                    </div>
                    
                    <div class="embed-title" id="previewTitle">
                        üöÄ T√≠tulo do Update Aparece Aqui
                    </div>
                    
                    <div class="embed-description" id="previewDescription">
                        <p>A descri√ß√£o do teu update ser√° mostrada aqui em tempo real enquanto escreves...</p>
                        <p>‚ú® <strong>Dica:</strong> Usa formata√ß√£o Markdown para deixar o texto mais atrativo!</p>
                    </div>
                    
                    <div class="embed-fields" id="previewFields">
                        <!-- Campos din√¢micos aparecer√£o aqui -->
                    </div>
                    
                    <div class="embed-image" id="previewBanner" style="display: none;">
                        <img src="" alt="Banner" style="width: 100%; border-radius: 8px; margin-top: 16px;">
                    </div>
                    
                    <div class="embed-footer" id="previewFooter">
                        <img src="https://cdn.discordapp.com/icons/1333825066928214053/a_8c5e2b5b5f4d3c2a1e0f9b8d7c6e5a4b.gif" alt="Bot Icon">
                        <span>YSNM Bot ‚Ä¢ Agora</span>
                    </div>
                </div>

                <div class="preview-stats">
                    <div class="stat-item">
                        <i class="fas fa-font"></i>
                        <span>T√≠tulo: <span id="titleCount">0</span>/256</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-align-left"></i>
                        <span>Descri√ß√£o: <span id="descCount">0</span>/4096</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-list"></i>
                        <span>Campos: <span id="fieldsCount">0</span>/25</span>
                    </div>
                </div>

                <div class="preview-tips">
                    <h3><i class="fas fa-lightbulb"></i> Dicas R√°pidas</h3>
                    <ul>
                        <li>Use **texto** para negrito</li>
                        <li>Use *texto* para it√°lico</li>
                        <li>Use `c√≥digo` para highlight</li>
                        <li>Use emojis para tornar mais atrativo üöÄ</li>
                        <li>M√°ximo 25 campos personalizados</li>
                    </ul>
                </div>
            </div>
        </main>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <i class="fas fa-rocket"></i>
            <span>Enviando update...</span>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-check-circle"></i> Update Enviado!</h3>
            </div>
            <div class="modal-body">
                <p>O teu update foi enviado com sucesso para o canal selecionado! üéâ</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeModal()">
                    <i class="fas fa-thumbs-up"></i> Awesome!
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/dompurify.min.js"></script>
    <!-- CDN fallback (kept as optional): will load after local if available -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.4.0/purify.min.js" integrity="sha512-0+YqQbDq3YtAf2GmQ+z3Qy2q7c5j5f7E4nQf+q1mZ9jV7w2sVZQ8h3tA1Yxv9K8Gq9a1b2Z7N0x0s5b6c7d8eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="js/script.js"></script>
</body>

</body>
    <script src="/js/toast-fallback.js"></script>
    <script src="/js/event-fallback.js"></script>
</html>
</html>
